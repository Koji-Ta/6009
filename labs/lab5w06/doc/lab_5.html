<!DOCTYPE html>
<!-- saved from url=(0042)https://6009.cat-soop.org/fall18/labs/lab5 -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<!-- This page was generated by CAT-SOOP (development version, v13.0.0+).  miau. -->

<title>6.009 Fall 2018</title>
<link href="./lab_5_files/logo.gif" rel="icon" type="image/gif">
<!-- include catsoop base css -->
<link href="./lab_5_files/base.css" rel="stylesheet" type="text/css">
<!-- librejs compatibility -->
<script>
    /*
    @licstart  The following is the entire license notice for the JavaScript
    code in this page.

    The Javascript on this page is part of CAT-SOOP
    Copyright (C) 2011-2018 Adam Hartz <hz@mit.edu>

    The Javascript code on this page is free software: you can redistribute it
    and/or modify it under the terms of the GNU Affero General Public License
    as published by the Free Software Foundation, either version 3 of the
    License, or (at your option) any later version.  This code is distributed
    WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY
    or FITNESS FOR A PARTICULAR PURPOSE.  See the full text of the license for
    more details (https://www.gnu.org/licenses/agpl-3.0.en.html).

    As additional permission under GNU AGPL version 3 section 7, you may
    distribute non-source (e.g., minimized or compacted) forms of that code
    without the copy of the GNU AGPL normally required by section 4, provided
    you include this license notice and a URL through which recipients can
    access the Corresponding Source.

    @licend  The above is the entire license notice for the JavaScript code in
    this page.
    */
    </script>
<!-- set up JS namespace for catsoop -->
<script type="text/javascript">
    var catsoop = {plugins: {}};

    function toggleResponsiveHeader(){
        document.getElementsByTagName('header')[0].classList.toggle('responsive');
    }

    document.addEventListener('DOMContentLoaded', function(){
        var menu_boxes = document.getElementsByClassName('dropdown-checkbox');
        for(var i=0; i<menu_boxes.length; i++){
            menu_boxes[i].checked = false;
        }
    });
    </script>
<!-- load in katex and mathjax, and CAT-SOOP-specific math rendering  -->
<script src="./lab_5_files/katex.min.js.Без названия" type="text/javascript"></script>
<link href="./lab_5_files/katex.min.css" rel="stylesheet" type="text/css">
<script src="./lab_5_files/MathJax.js.Без названия" type="text/javascript"></script>
<script src="./lab_5_files/cs_math.js.Без названия" type="text/javascript"></script>
<!-- Syntax Highlighting -->
<script src="./lab_5_files/cs_highlight.pack.min.js.Без названия" type="text/javascript"></script>
<script type="text/javascript">
      hljs.initHighlightingOnLoad();
    </script>
<style>
      :root {
        --cs-base-bg-color: #039bba;
        --cs-light-bg-color: #33cded;
        --cs-base-font-color: #fff;
        --cs-light-font-color: #000;
    }
    </style>
<!--JS for questions-->
<script src="./lab_5_files/ace.js.Без названия" type="text/javascript"></script><style id="ace_editor.css">.ace_editor {position: relative;overflow: hidden;font: 12px/normal 'Monaco', 'Menlo', 'Ubuntu Mono', 'Consolas', 'source-code-pro', monospace;direction: ltr;text-align: left;}.ace_scroller {position: absolute;overflow: hidden;top: 0;bottom: 0;background-color: inherit;-ms-user-select: none;-moz-user-select: none;-webkit-user-select: none;user-select: none;cursor: text;}.ace_content {position: absolute;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;min-width: 100%;}.ace_dragging .ace_scroller:before{position: absolute;top: 0;left: 0;right: 0;bottom: 0;content: '';background: rgba(250, 250, 250, 0.01);z-index: 1000;}.ace_dragging.ace_dark .ace_scroller:before{background: rgba(0, 0, 0, 0.01);}.ace_selecting, .ace_selecting * {cursor: text !important;}.ace_gutter {position: absolute;overflow : hidden;width: auto;top: 0;bottom: 0;left: 0;cursor: default;z-index: 4;-ms-user-select: none;-moz-user-select: none;-webkit-user-select: none;user-select: none;}.ace_gutter-active-line {position: absolute;left: 0;right: 0;}.ace_scroller.ace_scroll-left {box-shadow: 17px 0 16px -16px rgba(0, 0, 0, 0.4) inset;}.ace_gutter-cell {padding-left: 19px;padding-right: 6px;background-repeat: no-repeat;}.ace_gutter-cell.ace_error {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAABOFBMVEX/////////QRswFAb/Ui4wFAYwFAYwFAaWGAfDRymzOSH/PxswFAb/SiUwFAYwFAbUPRvjQiDllog5HhHdRybsTi3/Tyv9Tir+Syj/UC3////XurebMBIwFAb/RSHbPx/gUzfdwL3kzMivKBAwFAbbvbnhPx66NhowFAYwFAaZJg8wFAaxKBDZurf/RB6mMxb/SCMwFAYwFAbxQB3+RB4wFAb/Qhy4Oh+4QifbNRcwFAYwFAYwFAb/QRzdNhgwFAYwFAbav7v/Uy7oaE68MBK5LxLewr/r2NXewLswFAaxJw4wFAbkPRy2PyYwFAaxKhLm1tMwFAazPiQwFAaUGAb/QBrfOx3bvrv/VC/maE4wFAbRPBq6MRO8Qynew8Dp2tjfwb0wFAbx6eju5+by6uns4uH9/f36+vr/GkHjAAAAYnRSTlMAGt+64rnWu/bo8eAA4InH3+DwoN7j4eLi4xP99Nfg4+b+/u9B/eDs1MD1mO7+4PHg2MXa347g7vDizMLN4eG+Pv7i5evs/v79yu7S3/DV7/498Yv24eH+4ufQ3Ozu/v7+y13sRqwAAADLSURBVHjaZc/XDsFgGIBhtDrshlitmk2IrbHFqL2pvXf/+78DPokj7+Fz9qpU/9UXJIlhmPaTaQ6QPaz0mm+5gwkgovcV6GZzd5JtCQwgsxoHOvJO15kleRLAnMgHFIESUEPmawB9ngmelTtipwwfASilxOLyiV5UVUyVAfbG0cCPHig+GBkzAENHS0AstVF6bacZIOzgLmxsHbt2OecNgJC83JERmePUYq8ARGkJx6XtFsdddBQgZE2nPR6CICZhawjA4Fb/chv+399kfR+MMMDGOQAAAABJRU5ErkJggg==");background-repeat: no-repeat;background-position: 2px center;}.ace_gutter-cell.ace_warning {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAmVBMVEX///8AAAD///8AAAAAAABPSzb/5sAAAAB/blH/73z/ulkAAAAAAAD85pkAAAAAAAACAgP/vGz/rkDerGbGrV7/pkQICAf////e0IsAAAD/oED/qTvhrnUAAAD/yHD/njcAAADuv2r/nz//oTj/p064oGf/zHAAAAA9Nir/tFIAAAD/tlTiuWf/tkIAAACynXEAAAAAAAAtIRW7zBpBAAAAM3RSTlMAABR1m7RXO8Ln31Z36zT+neXe5OzooRDfn+TZ4p3h2hTf4t3k3ucyrN1K5+Xaks52Sfs9CXgrAAAAjklEQVR42o3PbQ+CIBQFYEwboPhSYgoYunIqqLn6/z8uYdH8Vmdnu9vz4WwXgN/xTPRD2+sgOcZjsge/whXZgUaYYvT8QnuJaUrjrHUQreGczuEafQCO/SJTufTbroWsPgsllVhq3wJEk2jUSzX3CUEDJC84707djRc5MTAQxoLgupWRwW6UB5fS++NV8AbOZgnsC7BpEAAAAABJRU5ErkJggg==");background-position: 2px center;}.ace_gutter-cell.ace_info {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAAAAAA6mKC9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAJ0Uk5TAAB2k804AAAAPklEQVQY02NgIB68QuO3tiLznjAwpKTgNyDbMegwisCHZUETUZV0ZqOquBpXj2rtnpSJT1AEnnRmL2OgGgAAIKkRQap2htgAAAAASUVORK5CYII=");background-position: 2px center;}.ace_dark .ace_gutter-cell.ace_info {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAJFBMVEUAAAChoaGAgIAqKiq+vr6tra1ZWVmUlJSbm5s8PDxubm56enrdgzg3AAAAAXRSTlMAQObYZgAAAClJREFUeNpjYMAPdsMYHegyJZFQBlsUlMFVCWUYKkAZMxZAGdxlDMQBAG+TBP4B6RyJAAAAAElFTkSuQmCC");}.ace_scrollbar {position: absolute;right: 0;bottom: 0;z-index: 6;}.ace_scrollbar-inner {position: absolute;cursor: text;left: 0;top: 0;}.ace_scrollbar-v{overflow-x: hidden;overflow-y: scroll;top: 0;}.ace_scrollbar-h {overflow-x: scroll;overflow-y: hidden;left: 0;}.ace_print-margin {position: absolute;height: 100%;}.ace_text-input {position: absolute;z-index: 0;width: 0.5em;height: 1em;opacity: 0;background: transparent;-moz-appearance: none;appearance: none;border: none;resize: none;outline: none;overflow: hidden;font: inherit;padding: 0 1px;margin: 0 -1px;text-indent: -1em;-ms-user-select: text;-moz-user-select: text;-webkit-user-select: text;user-select: text;white-space: pre!important;}.ace_text-input.ace_composition {background: inherit;color: inherit;z-index: 1000;opacity: 1;text-indent: 0;}.ace_layer {z-index: 1;position: absolute;overflow: hidden;word-wrap: normal;white-space: pre;height: 100%;width: 100%;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;pointer-events: none;}.ace_gutter-layer {position: relative;width: auto;text-align: right;pointer-events: auto;}.ace_text-layer {font: inherit !important;}.ace_cjk {display: inline-block;text-align: center;}.ace_cursor-layer {z-index: 4;}.ace_cursor {z-index: 4;position: absolute;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;border-left: 2px solid;transform: translatez(0);}.ace_slim-cursors .ace_cursor {border-left-width: 1px;}.ace_overwrite-cursors .ace_cursor {border-left-width: 0;border-bottom: 1px solid;}.ace_hidden-cursors .ace_cursor {opacity: 0.2;}.ace_smooth-blinking .ace_cursor {-webkit-transition: opacity 0.18s;transition: opacity 0.18s;}.ace_editor.ace_multiselect .ace_cursor {border-left-width: 1px;}.ace_marker-layer .ace_step, .ace_marker-layer .ace_stack {position: absolute;z-index: 3;}.ace_marker-layer .ace_selection {position: absolute;z-index: 5;}.ace_marker-layer .ace_bracket {position: absolute;z-index: 6;}.ace_marker-layer .ace_active-line {position: absolute;z-index: 2;}.ace_marker-layer .ace_selected-word {position: absolute;z-index: 4;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;}.ace_line .ace_fold {-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;display: inline-block;height: 11px;margin-top: -2px;vertical-align: middle;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACJJREFUeNpi+P//fxgTAwPDBxDxD078RSX+YeEyDFMCIMAAI3INmXiwf2YAAAAASUVORK5CYII=");background-repeat: no-repeat, repeat-x;background-position: center center, top left;color: transparent;border: 1px solid black;border-radius: 2px;cursor: pointer;pointer-events: auto;}.ace_dark .ace_fold {}.ace_fold:hover{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACBJREFUeNpi+P//fz4TAwPDZxDxD5X4i5fLMEwJgAADAEPVDbjNw87ZAAAAAElFTkSuQmCC");}.ace_tooltip {background-color: #FFF;background-image: -webkit-linear-gradient(top, transparent, rgba(0, 0, 0, 0.1));background-image: linear-gradient(to bottom, transparent, rgba(0, 0, 0, 0.1));border: 1px solid gray;border-radius: 1px;box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);color: black;max-width: 100%;padding: 3px 4px;position: fixed;z-index: 999999;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;cursor: default;white-space: pre;word-wrap: break-word;line-height: normal;font-style: normal;font-weight: normal;letter-spacing: normal;pointer-events: none;}.ace_folding-enabled > .ace_gutter-cell {padding-right: 13px;}.ace_fold-widget {-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;margin: 0 -12px 0 1px;display: none;width: 11px;vertical-align: top;background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42mWKsQ0AMAzC8ixLlrzQjzmBiEjp0A6WwBCSPgKAXoLkqSot7nN3yMwR7pZ32NzpKkVoDBUxKAAAAABJRU5ErkJggg==");background-repeat: no-repeat;background-position: center;border-radius: 3px;border: 1px solid transparent;cursor: pointer;}.ace_folding-enabled .ace_fold-widget {display: inline-block;   }.ace_fold-widget.ace_end {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42m3HwQkAMAhD0YzsRchFKI7sAikeWkrxwScEB0nh5e7KTPWimZki4tYfVbX+MNl4pyZXejUO1QAAAABJRU5ErkJggg==");}.ace_fold-widget.ace_closed {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAGCAYAAAAG5SQMAAAAOUlEQVR42jXKwQkAMAgDwKwqKD4EwQ26sSOkVWjgIIHAzPiCgaqiqnJHZnKICBERHN194O5b9vbLuAVRL+l0YWnZAAAAAElFTkSuQmCCXA==");}.ace_fold-widget:hover {border: 1px solid rgba(0, 0, 0, 0.3);background-color: rgba(255, 255, 255, 0.2);box-shadow: 0 1px 1px rgba(255, 255, 255, 0.7);}.ace_fold-widget:active {border: 1px solid rgba(0, 0, 0, 0.4);background-color: rgba(0, 0, 0, 0.05);box-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);}.ace_dark .ace_fold-widget {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHklEQVQIW2P4//8/AzoGEQ7oGCaLLAhWiSwB146BAQCSTPYocqT0AAAAAElFTkSuQmCC");}.ace_dark .ace_fold-widget.ace_end {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAH0lEQVQIW2P4//8/AxQ7wNjIAjDMgC4AxjCVKBirIAAF0kz2rlhxpAAAAABJRU5ErkJggg==");}.ace_dark .ace_fold-widget.ace_closed {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAFCAYAAACAcVaiAAAAHElEQVQIW2P4//+/AxAzgDADlOOAznHAKgPWAwARji8UIDTfQQAAAABJRU5ErkJggg==");}.ace_dark .ace_fold-widget:hover {box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);background-color: rgba(255, 255, 255, 0.1);}.ace_dark .ace_fold-widget:active {box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);}.ace_fold-widget.ace_invalid {background-color: #FFB4B4;border-color: #DE5555;}.ace_fade-fold-widgets .ace_fold-widget {-webkit-transition: opacity 0.4s ease 0.05s;transition: opacity 0.4s ease 0.05s;opacity: 0;}.ace_fade-fold-widgets:hover .ace_fold-widget {-webkit-transition: opacity 0.05s ease 0.05s;transition: opacity 0.05s ease 0.05s;opacity:1;}.ace_underline {text-decoration: underline;}.ace_bold {font-weight: bold;}.ace_nobold .ace_bold {font-weight: normal;}.ace_italic {font-style: italic;}.ace_error-marker {background-color: rgba(255, 0, 0,0.2);position: absolute;z-index: 9;}.ace_highlight-marker {background-color: rgba(255, 255, 0,0.2);position: absolute;z-index: 8;}.ace_br1 {border-top-left-radius    : 3px;}.ace_br2 {border-top-right-radius   : 3px;}.ace_br3 {border-top-left-radius    : 3px; border-top-right-radius:    3px;}.ace_br4 {border-bottom-right-radius: 3px;}.ace_br5 {border-top-left-radius    : 3px; border-bottom-right-radius: 3px;}.ace_br6 {border-top-right-radius   : 3px; border-bottom-right-radius: 3px;}.ace_br7 {border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px;}.ace_br8 {border-bottom-left-radius : 3px;}.ace_br9 {border-top-left-radius    : 3px; border-bottom-left-radius:  3px;}.ace_br10{border-top-right-radius   : 3px; border-bottom-left-radius:  3px;}.ace_br11{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-left-radius:  3px;}.ace_br12{border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}.ace_br13{border-top-left-radius    : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}.ace_br14{border-top-right-radius   : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}.ace_br15{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px;}
/*# sourceURL=ace/css/ace_editor.css */</style><style id="ace-tm">.ace-tm .ace_gutter {background: #f0f0f0;color: #333;}.ace-tm .ace_print-margin {width: 1px;background: #e8e8e8;}.ace-tm .ace_fold {background-color: #6B72E6;}.ace-tm {background-color: #FFFFFF;color: black;}.ace-tm .ace_cursor {color: black;}.ace-tm .ace_invisible {color: rgb(191, 191, 191);}.ace-tm .ace_storage,.ace-tm .ace_keyword {color: blue;}.ace-tm .ace_constant {color: rgb(197, 6, 11);}.ace-tm .ace_constant.ace_buildin {color: rgb(88, 72, 246);}.ace-tm .ace_constant.ace_language {color: rgb(88, 92, 246);}.ace-tm .ace_constant.ace_library {color: rgb(6, 150, 14);}.ace-tm .ace_invalid {background-color: rgba(255, 0, 0, 0.1);color: red;}.ace-tm .ace_support.ace_function {color: rgb(60, 76, 114);}.ace-tm .ace_support.ace_constant {color: rgb(6, 150, 14);}.ace-tm .ace_support.ace_type,.ace-tm .ace_support.ace_class {color: rgb(109, 121, 222);}.ace-tm .ace_keyword.ace_operator {color: rgb(104, 118, 135);}.ace-tm .ace_string {color: rgb(3, 106, 7);}.ace-tm .ace_comment {color: rgb(76, 136, 107);}.ace-tm .ace_comment.ace_doc {color: rgb(0, 102, 255);}.ace-tm .ace_comment.ace_doc.ace_tag {color: rgb(128, 159, 191);}.ace-tm .ace_constant.ace_numeric {color: rgb(0, 0, 205);}.ace-tm .ace_variable {color: rgb(49, 132, 149);}.ace-tm .ace_xml-pe {color: rgb(104, 104, 91);}.ace-tm .ace_entity.ace_name.ace_function {color: #0000A2;}.ace-tm .ace_heading {color: rgb(12, 7, 255);}.ace-tm .ace_list {color:rgb(185, 6, 144);}.ace-tm .ace_meta.ace_tag {color:rgb(0, 22, 142);}.ace-tm .ace_string.ace_regex {color: rgb(255, 0, 0)}.ace-tm .ace_marker-layer .ace_selection {background: rgb(181, 213, 255);}.ace-tm.ace_multiselect .ace_selection.ace_start {box-shadow: 0 0 3px 0px white;}.ace-tm .ace_marker-layer .ace_step {background: rgb(252, 255, 0);}.ace-tm .ace_marker-layer .ace_stack {background: rgb(164, 229, 101);}.ace-tm .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid rgb(192, 192, 192);}.ace-tm .ace_marker-layer .ace_active-line {background: rgba(0, 0, 0, 0.07);}.ace-tm .ace_gutter-active-line {background-color : #dcdcdc;}.ace-tm .ace_marker-layer .ace_selected-word {background: rgb(250, 250, 255);border: 1px solid rgb(200, 200, 250);}.ace-tm .ace_indent-guide {background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;}
/*# sourceURL=ace/css/ace-tm */</style><style>    .error_widget_wrapper {        background: inherit;        color: inherit;        border:none    }    .error_widget {        border-top: solid 2px;        border-bottom: solid 2px;        margin: 5px 0;        padding: 10px 40px;        white-space: pre-wrap;    }    .error_widget.ace_error, .error_widget_arrow.ace_error{        border-color: #ff5a5a    }    .error_widget.ace_warning, .error_widget_arrow.ace_warning{        border-color: #F1D817    }    .error_widget.ace_info, .error_widget_arrow.ace_info{        border-color: #5a5a5a    }    .error_widget.ace_ok, .error_widget_arrow.ace_ok{        border-color: #5aaa5a    }    .error_widget_arrow {        position: absolute;        border: solid 5px;        border-top-color: transparent!important;        border-right-color: transparent!important;        border-left-color: transparent!important;        top: -5px;    }</style>
<meta content="width=device-width, initial-scale=1" name="viewport">
<style type="text/css">.MathJax_Hover_Frame {border-radius: .25em; -webkit-border-radius: .25em; -moz-border-radius: .25em; -khtml-border-radius: .25em; box-shadow: 0px 0px 15px #83A; -webkit-box-shadow: 0px 0px 15px #83A; -moz-box-shadow: 0px 0px 15px #83A; -khtml-box-shadow: 0px 0px 15px #83A; border: 1px solid #A6D ! important; display: inline-block; position: absolute}
.MathJax_Menu_Button .MathJax_Hover_Arrow {position: absolute; cursor: pointer; display: inline-block; border: 2px solid #AAA; border-radius: 4px; -webkit-border-radius: 4px; -moz-border-radius: 4px; -khtml-border-radius: 4px; font-family: 'Courier New',Courier; font-size: 9px; color: #F0F0F0}
.MathJax_Menu_Button .MathJax_Hover_Arrow span {display: block; background-color: #AAA; border: 1px solid; border-radius: 3px; line-height: 0; padding: 4px}
.MathJax_Hover_Arrow:hover {color: white!important; border: 2px solid #CCC!important}
.MathJax_Hover_Arrow:hover span {background-color: #CCC!important}
</style><style type="text/css">#MathJax_About {position: fixed; left: 50%; width: auto; text-align: center; border: 3px outset; padding: 1em 2em; background-color: #DDDDDD; color: black; cursor: default; font-family: message-box; font-size: 120%; font-style: normal; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; border-radius: 15px; -webkit-border-radius: 15px; -moz-border-radius: 15px; -khtml-border-radius: 15px; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_About.MathJax_MousePost {outline: none}
.MathJax_Menu {position: absolute; background-color: white; color: black; width: auto; padding: 2px; border: 1px solid #CCCCCC; margin: 0; cursor: default; font: menu; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
.MathJax_MenuItem {padding: 2px 2em; background: transparent}
.MathJax_MenuArrow {position: absolute; right: .5em; padding-top: .25em; color: #666666; font-size: .75em}
.MathJax_MenuActive .MathJax_MenuArrow {color: white}
.MathJax_MenuArrow.RTL {left: .5em; right: auto}
.MathJax_MenuCheck {position: absolute; left: .7em}
.MathJax_MenuCheck.RTL {right: .7em; left: auto}
.MathJax_MenuRadioCheck {position: absolute; left: 1em}
.MathJax_MenuRadioCheck.RTL {right: 1em; left: auto}
.MathJax_MenuLabel {padding: 2px 2em 4px 1.33em; font-style: italic}
.MathJax_MenuRule {border-top: 1px solid #CCCCCC; margin: 4px 1px 0px}
.MathJax_MenuDisabled {color: GrayText}
.MathJax_MenuActive {background-color: Highlight; color: HighlightText}
.MathJax_MenuDisabled:focus, .MathJax_MenuLabel:focus {background-color: #E8E8E8}
.MathJax_ContextMenu:focus {outline: none}
.MathJax_ContextMenu .MathJax_MenuItem:focus {outline: none}
#MathJax_AboutClose {top: .2em; right: .2em}
.MathJax_Menu .MathJax_MenuClose {top: -10px; left: -10px}
.MathJax_MenuClose {position: absolute; cursor: pointer; display: inline-block; border: 2px solid #AAA; border-radius: 18px; -webkit-border-radius: 18px; -moz-border-radius: 18px; -khtml-border-radius: 18px; font-family: 'Courier New',Courier; font-size: 24px; color: #F0F0F0}
.MathJax_MenuClose span {display: block; background-color: #AAA; border: 1.5px solid; border-radius: 18px; -webkit-border-radius: 18px; -moz-border-radius: 18px; -khtml-border-radius: 18px; line-height: 0; padding: 8px 0 6px}
.MathJax_MenuClose:hover {color: white!important; border: 2px solid #CCC!important}
.MathJax_MenuClose:hover span {background-color: #CCC!important}
.MathJax_MenuClose:hover:focus {outline: none}
</style><style type="text/css">.MathJax_Preview .MJXf-math {color: inherit!important}
</style><style type="text/css">.MJX_Assistive_MathML {position: absolute!important; top: 0; left: 0; clip: rect(1px, 1px, 1px, 1px); padding: 1px 0 0 0!important; border: 0!important; height: 1px!important; width: 1px!important; overflow: hidden!important; display: block!important; -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none}
.MJX_Assistive_MathML.MJX_Assistive_MathML_Block {width: 100%!important}
</style><style type="text/css">#MathJax_Zoom {position: absolute; background-color: #F0F0F0; overflow: auto; display: block; z-index: 301; padding: .5em; border: 1px solid black; margin: 0; font-weight: normal; font-style: normal; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; -webkit-box-sizing: content-box; -moz-box-sizing: content-box; box-sizing: content-box; box-shadow: 5px 5px 15px #AAAAAA; -webkit-box-shadow: 5px 5px 15px #AAAAAA; -moz-box-shadow: 5px 5px 15px #AAAAAA; -khtml-box-shadow: 5px 5px 15px #AAAAAA; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_ZoomOverlay {position: absolute; left: 0; top: 0; z-index: 300; display: inline-block; width: 100%; height: 100%; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
#MathJax_ZoomFrame {position: relative; display: inline-block; height: 0; width: 0}
#MathJax_ZoomEventTrap {position: absolute; left: 0; top: 0; z-index: 302; display: inline-block; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
</style><style type="text/css">.MathJax_Preview {color: #888}
#MathJax_Message {position: fixed; left: 1em; bottom: 1.5em; background-color: #E6E6E6; border: 1px solid #959595; margin: 0px; padding: 2px 8px; z-index: 102; color: black; font-size: 80%; width: auto; white-space: nowrap}
#MathJax_MSIE_Frame {position: absolute; top: 0; left: 0; width: 0px; z-index: 101; border: 0px; margin: 0px; padding: 0px}
.MathJax_Error {color: #CC0000; font-style: italic}
</style><style type="text/css">.MJXp-script {font-size: .8em}
.MJXp-right {-webkit-transform-origin: right; -moz-transform-origin: right; -ms-transform-origin: right; -o-transform-origin: right; transform-origin: right}
.MJXp-bold {font-weight: bold}
.MJXp-italic {font-style: italic}
.MJXp-scr {font-family: MathJax_Script,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-frak {font-family: MathJax_Fraktur,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-sf {font-family: MathJax_SansSerif,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-cal {font-family: MathJax_Caligraphic,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-mono {font-family: MathJax_Typewriter,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-largeop {font-size: 150%}
.MJXp-largeop.MJXp-int {vertical-align: -.2em}
.MJXp-math {display: inline-block; line-height: 1.2; text-indent: 0; font-family: 'Times New Roman',Times,STIXGeneral,serif; white-space: nowrap; border-collapse: collapse}
.MJXp-display {display: block; text-align: center; margin: 1em 0}
.MJXp-math span {display: inline-block}
.MJXp-box {display: block!important; text-align: center}
.MJXp-box:after {content: " "}
.MJXp-rule {display: block!important; margin-top: .1em}
.MJXp-char {display: block!important}
.MJXp-mo {margin: 0 .15em}
.MJXp-mfrac {margin: 0 .125em; vertical-align: .25em}
.MJXp-denom {display: inline-table!important; width: 100%}
.MJXp-denom > * {display: table-row!important}
.MJXp-surd {vertical-align: top}
.MJXp-surd > * {display: block!important}
.MJXp-script-box > *  {display: table!important; height: 50%}
.MJXp-script-box > * > * {display: table-cell!important; vertical-align: top}
.MJXp-script-box > *:last-child > * {vertical-align: bottom}
.MJXp-script-box > * > * > * {display: block!important}
.MJXp-mphantom {visibility: hidden}
.MJXp-munderover, .MJXp-munder {display: inline-table!important}
.MJXp-over {display: inline-block!important; text-align: center}
.MJXp-over > * {display: block!important}
.MJXp-munderover > *, .MJXp-munder > * {display: table-row!important}
.MJXp-mtable {vertical-align: .25em; margin: 0 .125em}
.MJXp-mtable > * {display: inline-table!important; vertical-align: middle}
.MJXp-mtr {display: table-row!important}
.MJXp-mtd {display: table-cell!important; text-align: center; padding: .5em 0 0 .5em}
.MJXp-mtr > .MJXp-mtd:first-child {padding-left: 0}
.MJXp-mtr:first-child > .MJXp-mtd {padding-top: 0}
.MJXp-mlabeledtr {display: table-row!important}
.MJXp-mlabeledtr > .MJXp-mtd:first-child {padding-left: 0}
.MJXp-mlabeledtr:first-child > .MJXp-mtd {padding-top: 0}
.MJXp-merror {background-color: #FFFF88; color: #CC0000; border: 1px solid #CC0000; padding: 1px 3px; font-style: normal; font-size: 90%}
.MJXp-scale0 {-webkit-transform: scaleX(.0); -moz-transform: scaleX(.0); -ms-transform: scaleX(.0); -o-transform: scaleX(.0); transform: scaleX(.0)}
.MJXp-scale1 {-webkit-transform: scaleX(.1); -moz-transform: scaleX(.1); -ms-transform: scaleX(.1); -o-transform: scaleX(.1); transform: scaleX(.1)}
.MJXp-scale2 {-webkit-transform: scaleX(.2); -moz-transform: scaleX(.2); -ms-transform: scaleX(.2); -o-transform: scaleX(.2); transform: scaleX(.2)}
.MJXp-scale3 {-webkit-transform: scaleX(.3); -moz-transform: scaleX(.3); -ms-transform: scaleX(.3); -o-transform: scaleX(.3); transform: scaleX(.3)}
.MJXp-scale4 {-webkit-transform: scaleX(.4); -moz-transform: scaleX(.4); -ms-transform: scaleX(.4); -o-transform: scaleX(.4); transform: scaleX(.4)}
.MJXp-scale5 {-webkit-transform: scaleX(.5); -moz-transform: scaleX(.5); -ms-transform: scaleX(.5); -o-transform: scaleX(.5); transform: scaleX(.5)}
.MJXp-scale6 {-webkit-transform: scaleX(.6); -moz-transform: scaleX(.6); -ms-transform: scaleX(.6); -o-transform: scaleX(.6); transform: scaleX(.6)}
.MJXp-scale7 {-webkit-transform: scaleX(.7); -moz-transform: scaleX(.7); -ms-transform: scaleX(.7); -o-transform: scaleX(.7); transform: scaleX(.7)}
.MJXp-scale8 {-webkit-transform: scaleX(.8); -moz-transform: scaleX(.8); -ms-transform: scaleX(.8); -o-transform: scaleX(.8); transform: scaleX(.8)}
.MJXp-scale9 {-webkit-transform: scaleX(.9); -moz-transform: scaleX(.9); -ms-transform: scaleX(.9); -o-transform: scaleX(.9); transform: scaleX(.9)}
.MathJax_PHTML .noError {vertical-align: ; font-size: 90%; text-align: left; color: black; padding: 1px 3px; border: 1px solid}
</style></head>
<body style="margin: 0px;"><div id="MathJax_Message" style="display: none;"></div>
<header id="cs_header">
<div class="nav-container">
<div class="cs_header_text"><a href="https://6009.cat-soop.org/fall18"><img src="./lab_5_files/logo.gif">&nbsp;6.009</a></div>
<a href="https://6009.cat-soop.org/fall18/information">Information/Policies</a>
<a href="https://6009.cat-soop.org/fall18/progress">Progress</a>
<div class="dropdown" onmouseleave="this.children[1].checked = false;">
<label class="dropbtn" for="cs_menu_5c20cd9501273c4cc9fd6d77f4acf768">Help<span class="downarrow">▼</span></label>
<input checked="false" class="dropdown-checkbox" id="cs_menu_5c20cd9501273c4cc9fd6d77f4acf768" type="checkbox">
<div class="dropdown-content">
<a href="https://piazza.com/mit/fall2018/6009">Piazza</a>
<a href="https://6009.cat-soop.org/fall18/queue/">Help Queue</a>
<a href="https://6009.cat-soop.org/fall18/python">Accessing/Installing Python</a>
<a href="https://6009.cat-soop.org/fall18/otherhelp">Other Help</a></div></div>
<a href="https://6009.cat-soop.org/fall18/labs/lab5?loginaction=login">Log In</a><a class="icon" href="javascript:void(0);" onclick="toggleResponsiveHeader()">☰</a>
</div>
</header>
<main class="cs_body" id="cs_body">
<div class="cs_left_menu"></div>
<div class="cs_content">
<center><h1>Lab 5: SAT Solver</h1></center>
<div class="response" id="catsoop_login_box">
<b><center>You are not logged in.</center></b><br>
If you are a current student, please <a href="https://6009.cat-soop.org/fall18/labs/lab5?loginaction=login">Log
In</a> for full access to the web site.<br>Note that this link will take you to
an external site (<tt>https://oidc.mit.edu</tt>) to authenticate, and then you will be redirected
back to this page.
</div>
<p></p><h2>Table of Contents</h2><ul><li><a href="https://6009.cat-soop.org/fall18/labs/lab5#catsoop_section_1">1) Preparation</a></li><li><a href="https://6009.cat-soop.org/fall18/labs/lab5#catsoop_section_2">2) Introduction</a></li><ul><li><a href="https://6009.cat-soop.org/fall18/labs/lab5#catsoop_section_2_1">2.1) Conjunctive Normal Form</a></li><ul><li><a href="https://6009.cat-soop.org/fall18/labs/lab5#catsoop_section_2_1_1">2.1.1) Python representation</a></li><li><a href="https://6009.cat-soop.org/fall18/labs/lab5#catsoop_section_2_1_2">2.1.2) Examples</a></li></ul></ul><li><a href="https://6009.cat-soop.org/fall18/labs/lab5#catsoop_section_3">3) SAT Solver</a></li><ul><li><a href="https://6009.cat-soop.org/fall18/labs/lab5#catsoop_section_3_1">3.1) The Naive Approach</a></li><li><a href="https://6009.cat-soop.org/fall18/labs/lab5#catsoop_section_3_2">3.2) A Nicer Approach</a></li><ul><li><a href="https://6009.cat-soop.org/fall18/labs/lab5#catsoop_section_3_2_1">3.2.1) Updating Expressions</a></li><li><a href="https://6009.cat-soop.org/fall18/labs/lab5#catsoop_section_3_2_2">3.2.2) Examples</a></li></ul></ul><li><a href="https://6009.cat-soop.org/fall18/labs/lab5#catsoop_section_4">4) Implementation</a></li><ul><li><a href="https://6009.cat-soop.org/fall18/labs/lab5#catsoop_section_4_1">4.1) Optimizations</a></li></ul><li><a href="https://6009.cat-soop.org/fall18/labs/lab5#catsoop_section_5">5) Scheduling by Reduction</a></li><ul><li><a href="https://6009.cat-soop.org/fall18/labs/lab5#catsoop_section_5_1">5.1) Encoding the Rules</a></li><ul><li><a href="https://6009.cat-soop.org/fall18/labs/lab5#catsoop_section_5_1_1">5.1.1) Students Only In Desired Rooms</a></li><li><a href="https://6009.cat-soop.org/fall18/labs/lab5#catsoop_section_5_1_2">5.1.2) Each Student In Exactly One Session</a></li><li><a href="https://6009.cat-soop.org/fall18/labs/lab5#catsoop_section_5_1_3">5.1.3) No Oversubscribed Sections</a></li></ul></ul><li><a href="https://6009.cat-soop.org/fall18/labs/lab5#catsoop_section_6">6) UI</a></li><li><a href="https://6009.cat-soop.org/fall18/labs/lab5#catsoop_section_7">7) Code Submission</a></li><li><a href="https://6009.cat-soop.org/fall18/labs/lab5#catsoop_section_8">8) Checkoff</a></li><ul><li><a href="https://6009.cat-soop.org/fall18/labs/lab5#catsoop_section_8_1">8.1) Grade</a></li></ul></ul><p></p>
<a class="anchor" name="catsoop_section_1"></a><h2>1) Preparation</h2>
<p>This lab assumes you have Python 3.5 or later installed on your machine.</p>
<p>The following file contains code and other resources as a starting point for
this lab: <a download="lab5.zip" href="https://6009.cat-soop.org/fall18/lab_distribution.zip?path=%5B%22fall18%22%2C+%22labs%22%2C+%22lab5%22%5D"><tt>lab5.zip</tt></a></p>
<p>Most of your changes should be made to <code>lab.py</code>, which you will submit at the
end of this lab.  Importantly, you should not add any imports to the file.</p>
<p>This lab is worth a total of 4 points.  Your score for the lab is based on:</p>
<ul>
<li>answering the questions on this page (0.5 points)</li>
<li>passing the test cases from <code>test.py</code> under the time limit (2 points), and</li>
<li>a brief "checkoff" conversation with a staff member to discuss your code (1.5 points).</li>
</ul>
<p>For this lab, you will only receive credit for a test case if it runs to
completion in under 30 seconds on the server.</p>
<p>Please also review the <a href="https://6009.cat-soop.org/fall18/information#catsoop_section_6">collaboration policy</a> before continuing.</p>
<p><strong>The questions in sections 1-3 (inclusive) are due at 10am on Monday, 15 Oct.
The other questions on this page (including your code submission) is due at
4pm on Friday, 19 Oct.</strong></p>
<a class="anchor" name="catsoop_section_2"></a><h2>2) Introduction</h2>
<p>From recreational mathematics to standardized tests, one popular problem genre
is <i>logic puzzles</i>, where some space of possible choices is described
using a list of rules.  A solution to the puzzle is a choice (often the one
unique choice) that obeys the rules.  This lab should give you the tools to
make short work of any of those puzzles, assuming you have your trusty Python
interpreter.</p>
<p>Here's an example of the kind of logic puzzle we have in mind.</p>
<p></p><div class="question">
The 6.009 staff were pleased to learn that grateful alumni had donated cupcakes for last week's staff meeting.
Unfortunately, the cupcakes were gone when the staff showed up for the meeting!
Who ate the cupcakes?
<ol>
<li>The suspects are Adam, Karl, Pete, Duane, and Tim the Beaver.</li>
<li>Whichever suspect ate any of the cupcakes must have eaten <i>all</i> of them.</li>
<li>The cupcakes included exactly two of the flavors chocolate, vanilla, and pickles.</li>
<li>Adam only eats pickles-flavored cupcakes.</li>
<li>Years ago, Pete and Duane made a pact that, whenever either of them eats cupcakes, he must share with the other one.</li>
<li>Karl feels strongly about flavor fairness and will only eat cupcakes if he can include at least 3 different flavors.</li>
</ol>
</div><p></p>
<p>Let's translate the problem into <b><a href="https://en.wikipedia.org/wiki/Boolean_algebra">Boolean logic</a></b>,
where we have a set of variables, each of which takes the value True or False.
We write the rules as conditions over these variables.  Here is each rule as a
Python expression over Boolean variables.  We include one variable for the
guilt of each suspect, plus one variable for each potential flavor of cupcake.</p>
<p>In reading these rules, note that Python <code>not</code> binds more tightly than <code>or</code>, so
that <code>not p or q</code> is the same as <code>(not p) or q</code>.  It's also fine not to follow
every last detail, as this rule set is just presented as one example of a
general idea!</p>
<p>You may also find that some of our encoding choices don't match what you would
come up with, such that our choices lead to longer or less comprehensible
rules.  We are actually intentionally forcing ourselves to adhere to a
restricted format that we will explain shortly, and that will ultimately make
the job of <em>solving</em> these kinds of problems more straightforward.</p>
<pre><code class="python hljs">rule1 = (adam <span class="hljs-keyword">or</span> karl <span class="hljs-keyword">or</span> pete <span class="hljs-keyword">or</span> duane <span class="hljs-keyword">or</span> tim)
<span class="hljs-comment"># At least one of them must have committed the crime!  Here, one of these</span>
<span class="hljs-comment"># variables being True represents that person having committed the crime.</span>


rule2 = ((<span class="hljs-keyword">not</span> adam <span class="hljs-keyword">or</span> <span class="hljs-keyword">not</span> karl)
     <span class="hljs-keyword">and</span> (<span class="hljs-keyword">not</span> adam <span class="hljs-keyword">or</span> <span class="hljs-keyword">not</span> pete)
     <span class="hljs-keyword">and</span> (<span class="hljs-keyword">not</span> adam <span class="hljs-keyword">or</span> <span class="hljs-keyword">not</span> duane)
     <span class="hljs-keyword">and</span> (<span class="hljs-keyword">not</span> adam <span class="hljs-keyword">or</span> <span class="hljs-keyword">not</span> tim)
     <span class="hljs-keyword">and</span> (<span class="hljs-keyword">not</span> karl <span class="hljs-keyword">or</span> <span class="hljs-keyword">not</span> pete)
     <span class="hljs-keyword">and</span> (<span class="hljs-keyword">not</span> karl <span class="hljs-keyword">or</span> <span class="hljs-keyword">not</span> duane)
     <span class="hljs-keyword">and</span> (<span class="hljs-keyword">not</span> karl <span class="hljs-keyword">or</span> <span class="hljs-keyword">not</span> tim)
     <span class="hljs-keyword">and</span> (<span class="hljs-keyword">not</span> pete <span class="hljs-keyword">or</span> <span class="hljs-keyword">not</span> duane)
     <span class="hljs-keyword">and</span> (<span class="hljs-keyword">not</span> pete <span class="hljs-keyword">or</span> <span class="hljs-keyword">not</span> tim)
     <span class="hljs-keyword">and</span> (<span class="hljs-keyword">not</span> duane <span class="hljs-keyword">or</span> <span class="hljs-keyword">not</span> tim))
<span class="hljs-comment"># At most one of the suspects is guilty.  In other words, for any pair of</span>
<span class="hljs-comment"># suspects, at least one must be NOT guilty (so that we cannot possibly find</span>
<span class="hljs-comment"># two or more people guilty)</span>
<span class="hljs-comment"># Together, rule2 and rule1 guarantee that exactly one suspect is guilty.</span>


rule3 = ((<span class="hljs-keyword">not</span> chocolate <span class="hljs-keyword">or</span> <span class="hljs-keyword">not</span> vanilla <span class="hljs-keyword">or</span> <span class="hljs-keyword">not</span> pickles)
     <span class="hljs-keyword">and</span> (chocolate <span class="hljs-keyword">or</span> vanilla)
     <span class="hljs-keyword">and</span> (chocolate <span class="hljs-keyword">or</span> pickles)
     <span class="hljs-keyword">and</span> (vanilla <span class="hljs-keyword">or</span> pickles))
<span class="hljs-comment"># Here is our rule that the cupcakes included exactly two of the flavors.  Put</span>
<span class="hljs-comment"># another way: it can't be that all flavors were present, and among any pair of</span>
<span class="hljs-comment"># flavors, at least one was present.</span>


rule4 = ((<span class="hljs-keyword">not</span> adam <span class="hljs-keyword">or</span> pickles)
     <span class="hljs-keyword">and</span> (<span class="hljs-keyword">not</span> adam <span class="hljs-keyword">or</span> <span class="hljs-keyword">not</span> chocolate)
     <span class="hljs-keyword">and</span> (<span class="hljs-keyword">not</span> adam <span class="hljs-keyword">or</span> <span class="hljs-keyword">not</span> vanilla))
<span class="hljs-comment"># If Adam is guilty, this will evaluate to True only if only pickles-flavored</span>
<span class="hljs-comment"># cupcakes were present.  If Adam is not guilty, this will always evaluate to</span>
<span class="hljs-comment"># True.  This is our way of encoding the fact that, if Adam is guilty, only</span>
<span class="hljs-comment"># pickles-flavored cupcakes must have been present.</span>


rule5 = (<span class="hljs-keyword">not</span> pete <span class="hljs-keyword">or</span> duane) <span class="hljs-keyword">and</span> (<span class="hljs-keyword">not</span> duane <span class="hljs-keyword">or</span> pete)
<span class="hljs-comment"># If Pete ate cupcakes without sharing with Duane, the first case will fail to</span>
<span class="hljs-comment"># hold.  Likewise for Duane eating without sharing.  Since Pete and Duane only</span>
<span class="hljs-comment"># eat cupcakes together, this rule excludes the possibility that only one of</span>
<span class="hljs-comment"># them ate cupcakes.</span>


rule6 = ((<span class="hljs-keyword">not</span> karl <span class="hljs-keyword">or</span> chocolate)
     <span class="hljs-keyword">and</span> (<span class="hljs-keyword">not</span> karl <span class="hljs-keyword">or</span> vanilla)
     <span class="hljs-keyword">and</span> (<span class="hljs-keyword">not</span> karl <span class="hljs-keyword">or</span> pickles))
<span class="hljs-comment"># If Karl is the culprit and we left out a flavor, the corresponding case here</span>
<span class="hljs-comment"># will fail to hold.  So this rule encodes the restriction that Karl can only</span>
<span class="hljs-comment"># be guilty if all three types of cupcakes are present.</span>


satisfied = rule1 <span class="hljs-keyword">and</span> rule2 <span class="hljs-keyword">and</span> rule3 <span class="hljs-keyword">and</span> rule4 <span class="hljs-keyword">and</span> rule5 <span class="hljs-keyword">and</span> rule6
</code></pre>
<p>The piece of code above is a Python program that will tell us whether a given
assignment is consistent with the rules we have laid out.  For example, if we
had set the following variables (representing the hypothesis that Adam was guilty
and that only Pickles-flavored cupcakes were present):</p>
<pre><code class="py hljs python">adam = <span class="hljs-built_in">True</span>
karl = <span class="hljs-built_in">False</span>
pete = <span class="hljs-built_in">False</span>
duane = <span class="hljs-built_in">False</span>
tim = <span class="hljs-built_in">False</span>

pickles = <span class="hljs-built_in">True</span>
vanilla = <span class="hljs-built_in">False</span>
chocolate = <span class="hljs-built_in">False</span>
</code></pre>
<p>and then run the code, the <code>satisfied</code> variable would be set to <code>False</code> (since
<code>rule3</code> would be <code>False</code>), indicating that this assignment did not satisfy the
rules we had set out.</p>
<p>While code like the above could be useful in certain situations, it doesn't
help us <em>solve</em> the problem (it only helps us check a possible solution).  In this lab,
we'll look at the problem of <a href="https://en.wikipedia.org/wiki/Boolean_satisfiability_problem">Boolean
Satisfiability</a>: our goal will be, given a description of Boolean variables
and constraints on them (like that given above), to find a set of assignments
that satisfies all of the given constraints.</p>
<p><a class="anchor" name="catsoop_section_2_1"></a></p><h3>2.1) Conjunctive Normal Form</h3><p></p>
<p>In encoding the puzzle, we followed a very regular structure in our Boolean
formulas, one important enough to have a common name: <b><a href="https://en.wikipedia.org/wiki/Conjunctive_normal_form">conjunctive normal
form (CNF)</a></b>.</p>
<p>In this form, we say that a <i>literal</i> is a variable or the <code>not</code> of a variable.
Then a <i>clause</i> is a multi-way <code>or</code> of literals, and a CNF formula is a multi-way <code>and</code> of clauses.</p>
<p>It's okay if this representation does not feel completely natural.  Some people
find this form to be "backwards" from the way they would otherwise think about
these constraints.  But forcing our constraints to be in this form can greatly
simplify our problem.  We'll try in this writeup to help you with the pieces of
the lab involving converting expressions to CNF.</p>
<p><a class="anchor" name="catsoop_section_2_1_1"></a></p><h4>2.1.1) Python representation</h4><p></p>
<p>When we commit to representing problems in CNF, we can represent:
</p><ul>
<li>a <i>variable</i> as a Python string</li>
<li>a <i>literal</i> as a pair (either a list or a tuple), containing a variable and a Boolean value (<code>False</code> if <code>not</code> appears in this literal, <code>True</code> otherwise)</li>
<li>a <i>clause</i> as a list of literals</li>
<li>a <i>formula</i> as a list of clauses</li>
</ul><p></p>
<p>For example, our puzzle from above can be encoded as follows, where again it is
OK not to read through every last detail.</p>
<pre><code class="python hljs">rule1 = [[(<span class="hljs-string">'adam'</span>, <span class="hljs-built_in">True</span>), (<span class="hljs-string">'karl'</span>, <span class="hljs-built_in">True</span>), (<span class="hljs-string">'pete'</span>, <span class="hljs-built_in">True</span>),
          (<span class="hljs-string">'duane'</span>, <span class="hljs-built_in">True</span>), (<span class="hljs-string">'tim'</span>, <span class="hljs-built_in">True</span>)]]

rule2 = [[(<span class="hljs-string">'adam'</span>, <span class="hljs-built_in">False</span>), (<span class="hljs-string">'karl'</span>, <span class="hljs-built_in">False</span>)],
         [(<span class="hljs-string">'adam'</span>, <span class="hljs-built_in">False</span>), (<span class="hljs-string">'pete'</span>, <span class="hljs-built_in">False</span>)],
         [(<span class="hljs-string">'adam'</span>, <span class="hljs-built_in">False</span>), (<span class="hljs-string">'duane'</span>, <span class="hljs-built_in">False</span>)],
         [(<span class="hljs-string">'adam'</span>, <span class="hljs-built_in">False</span>), (<span class="hljs-string">'tim'</span>, <span class="hljs-built_in">False</span>)],
         [(<span class="hljs-string">'karl'</span>, <span class="hljs-built_in">False</span>), (<span class="hljs-string">'pete'</span>, <span class="hljs-built_in">False</span>)],
         [(<span class="hljs-string">'karl'</span>, <span class="hljs-built_in">False</span>), (<span class="hljs-string">'duane'</span>, <span class="hljs-built_in">False</span>)],
         [(<span class="hljs-string">'karl'</span>, <span class="hljs-built_in">False</span>), (<span class="hljs-string">'tim'</span>, <span class="hljs-built_in">False</span>)],
         [(<span class="hljs-string">'pete'</span>, <span class="hljs-built_in">False</span>), (<span class="hljs-string">'duane'</span>, <span class="hljs-built_in">False</span>)],
         [(<span class="hljs-string">'pete'</span>, <span class="hljs-built_in">False</span>), (<span class="hljs-string">'tim'</span>, <span class="hljs-built_in">False</span>)],
         [(<span class="hljs-string">'duane'</span>, <span class="hljs-built_in">False</span>), (<span class="hljs-string">'tim'</span>, <span class="hljs-built_in">False</span>)]]


rule3 = [[(<span class="hljs-string">'chocolate'</span>, <span class="hljs-built_in">False</span>), (<span class="hljs-string">'vanilla'</span>, <span class="hljs-built_in">False</span>), (<span class="hljs-string">'pickles'</span>, <span class="hljs-built_in">False</span>)],
         [(<span class="hljs-string">'chocolate'</span>, <span class="hljs-built_in">True</span>), (<span class="hljs-string">'vanilla'</span>, <span class="hljs-built_in">True</span>)],
         [(<span class="hljs-string">'chocolate'</span>, <span class="hljs-built_in">True</span>), (<span class="hljs-string">'pickles'</span>, <span class="hljs-built_in">True</span>)],
         [(<span class="hljs-string">'vanilla'</span>, <span class="hljs-built_in">True</span>), (<span class="hljs-string">'pickles'</span>, <span class="hljs-built_in">True</span>)]]

rule4 = [[(<span class="hljs-string">'adam'</span>, <span class="hljs-built_in">False</span>), (<span class="hljs-string">'pickles'</span>, <span class="hljs-built_in">True</span>)],
         [(<span class="hljs-string">'adam'</span>, <span class="hljs-built_in">False</span>), (<span class="hljs-string">'chocolate'</span>, <span class="hljs-built_in">False</span>)],
         [(<span class="hljs-string">'adam'</span>, <span class="hljs-built_in">False</span>), (<span class="hljs-string">'vanilla'</span>, <span class="hljs-built_in">False</span>)]]

rule5 = [[(<span class="hljs-string">'pete'</span>, <span class="hljs-built_in">False</span>), (<span class="hljs-string">'duane'</span>, <span class="hljs-built_in">True</span>)],
         [(<span class="hljs-string">'duane'</span>, <span class="hljs-built_in">False</span>), (<span class="hljs-string">'pete'</span>, <span class="hljs-built_in">True</span>)]]

rule6 = [[(<span class="hljs-string">'karl'</span>, <span class="hljs-built_in">False</span>), (<span class="hljs-string">'chocolate'</span>, <span class="hljs-built_in">True</span>)],
         [(<span class="hljs-string">'karl'</span>, <span class="hljs-built_in">False</span>), (<span class="hljs-string">'vanilla'</span>, <span class="hljs-built_in">True</span>)],
         [(<span class="hljs-string">'karl'</span>, <span class="hljs-built_in">False</span>), (<span class="hljs-string">'pickles'</span>, <span class="hljs-built_in">True</span>)]]

rules = rule1 + rule2 + rule3 + rule4 + rule5 + rule6
</code></pre>
<p>When we have formulated things in this way, the list <code>rules</code> contains a formula
that encodes all of the constraints we need to satisfy.</p>
<p><a class="anchor" name="catsoop_section_2_1_2"></a></p><h4>2.1.2) Examples</h4><p></p>
<p>
<!--START question q000000 -->
</p><div class="question question-pythonliteral" id="cs_qdiv_q000000" style="position: static">
<div id="q000000_rendered_question">
Consider this Boolean formula.
<pre><code class="python hljs">c <span class="hljs-keyword">and</span> (a <span class="hljs-keyword">or</span> d) <span class="hljs-keyword">and</span> (<span class="hljs-keyword">not</span> b <span class="hljs-keyword">or</span> a) <span class="hljs-keyword">and</span> (<span class="hljs-keyword">not</span> a <span class="hljs-keyword">or</span> e <span class="hljs-keyword">or</span> <span class="hljs-keyword">not</span> d)
</code></pre>
<p>Write an equivalent CNF formula (as a Python literal), in the format used in the lab (e.g., <code>[[('a', True), ('b', False)], [('c', True)]]</code>).<br></p><input id="q000000" name="q000000" size="70" type="text" value="">
</div><div>
<span id="q000000_buttons"></span>
<span id="q000000_loading_wrapper">
<span id="q000000_loading" style="display:none;"><img src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="></span>
</span>
<span id="q000000_score_display"></span>
<div class="nsubmits_left" id="q000000_nsubmits_left"></div></div>
<div id="q000000_solution_container">
<div id="q000000_solution">
</div>
<div id="q000000_solution_explanation">
</div>
</div>
<div id="q000000_message"></div>
<span style="font-size: small; color: #888; font-weight: bold;">This question is due on Monday October 15, 2018 at 10:00:00 AM.</span></div>
<!--END question q000000 -->
<p></p>
<p>Now, consider this Boolean formula (which is <strong>not</strong> in CNF).</p>
<pre><code class="python hljs">(a <span class="hljs-keyword">and</span> b) <span class="hljs-keyword">or</span> (c <span class="hljs-keyword">and</span> <span class="hljs-keyword">not</span> d)
</code></pre>
<p>This expression looks innocuous, but translating it into CNF is actually a
non-trivial exercise!  It turns out, though, that this expression does have a
representation in CNF as:</p>
<pre><code class="python hljs">(a <span class="hljs-keyword">or</span> c) <span class="hljs-keyword">and</span> (a <span class="hljs-keyword">or</span> <span class="hljs-keyword">not</span> d) <span class="hljs-keyword">and</span> (b <span class="hljs-keyword">or</span> c) <span class="hljs-keyword">and</span> (b <span class="hljs-keyword">or</span> <span class="hljs-keyword">not</span> d)
</code></pre>
<p>or, in our representation, as:</p>
<pre><code class="python hljs">[[(<span class="hljs-string">'a'</span>, <span class="hljs-built_in">True</span>), (<span class="hljs-string">'c'</span>, <span class="hljs-built_in">True</span>)], [(<span class="hljs-string">'a'</span>, <span class="hljs-built_in">True</span>), (<span class="hljs-string">'d'</span>, <span class="hljs-built_in">False</span>)], [(<span class="hljs-string">'b'</span>, <span class="hljs-built_in">True</span>), (<span class="hljs-string">'c'</span>, <span class="hljs-built_in">True</span>)], [(<span class="hljs-string">'b'</span>, <span class="hljs-built_in">True</span>), (<span class="hljs-string">'d'</span>, <span class="hljs-built_in">False</span>)]]
</code></pre>
<p>Notice that the above expression will be true if <code>a</code> and <code>b</code> are both true, or
if <code>c</code> is true and <code>d</code> is false.</p>
<p>
<!--START question q000001 -->
</p><div class="question question-pythonliteral" id="cs_qdiv_q000001" style="position: static">
<div id="q000001_rendered_question">
Now, try your hand at it.  Consider the following Boolean Formula (not in CNF):
<pre><code class="python hljs">a <span class="hljs-keyword">and</span> (<span class="hljs-keyword">not</span> b <span class="hljs-keyword">or</span> (c <span class="hljs-keyword">and</span> d))
</code></pre>
<p>Write an equivalent CNF formula (as a Python literal), in the format used in the lab (e.g., <code>[[('a', True), ('b', False)], [('c', True)]]</code>).<br></p><input id="q000001" name="q000001" size="70" type="text" value="">
</div><div>
<span id="q000001_buttons"></span>
<span id="q000001_loading_wrapper">
<span id="q000001_loading" style="display:none;"><img src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="></span>
</span>
<span id="q000001_score_display"></span>
<div class="nsubmits_left" id="q000001_nsubmits_left"></div></div>
<div id="q000001_solution_container">
<div id="q000001_solution">
</div>
<div id="q000001_solution_explanation">
</div>
</div>
<div id="q000001_message"></div>
<span style="font-size: small; color: #888; font-weight: bold;">This question is due on Monday October 15, 2018 at 10:00:00 AM.</span></div>
<!--END question q000001 -->
<p></p>
<a class="anchor" name="catsoop_section_3"></a><h2>3) SAT Solver</h2>
<p>A classic tool that works on Boolean formulas is a <b>satisfiability solver</b>, or SAT solver.
Given a formula, either the solver finds Boolean variable values that make the formula true, or the solver indicates that no solution exists.
In this lab, you will write a SAT solver that can solve puzzles like ours, as in:</p>
<pre><code class="python hljs"><span class="hljs-meta">&gt;&gt;&gt; </span>print(satisfying_assignment(rules))
{<span class="hljs-string">'duane'</span>: <span class="hljs-built_in">False</span>, <span class="hljs-string">'pete'</span>: <span class="hljs-built_in">False</span>, <span class="hljs-string">'chocolate'</span>: <span class="hljs-built_in">False</span>, <span class="hljs-string">'karl'</span>: <span class="hljs-built_in">False</span>,
 <span class="hljs-string">'adam'</span>: <span class="hljs-built_in">False</span>, <span class="hljs-string">'pickles'</span>: <span class="hljs-built_in">True</span>, <span class="hljs-string">'tim'</span>: <span class="hljs-built_in">True</span>, <span class="hljs-string">'vanilla'</span>: <span class="hljs-built_in">True</span>}
</code></pre>
<p>The return value of <code>satisfying_assignment</code> is a dictionary mapping variables
to the Boolean values that have been inferred for them (or <code>None</code> if no valid
mapping exists).</p>
<p>So, we can see that, in our example above, Tim the Beaver is guilty and has a
taste for vanilla and pickles!</p>
<p>It turns out that there are other possible answers that have Tim enjoying other
flavors, but it also turns out that Tim is the uniquely determined culprit.
How do we know?  The SAT solver fails to find an assignment when we add an
additional rule proclaiming Tim's innocence.</p>
<pre><code class="python hljs"><span class="hljs-meta">&gt;&gt;&gt; </span>print(satisfying_assignment(rules + [[(<span class="hljs-string">'tim'</span>, <span class="hljs-built_in">False</span>)]]))
<span class="hljs-built_in">None</span>
</code></pre>
<p><a class="anchor" name="catsoop_section_3_1"></a></p><h3>3.1) The Naive Approach</h3><p></p>
<p>There's one very easy way to solve Boolean puzzles: enumerate all possible
Boolean assignments to the variables.  Evaluate the rules on each assignment,
returning the first assignment that works.  Unfortunately, this process can
take prohibitively long to run!  For a concrete illustration of why, consider
this Python code to generate all sequences of Booleans of a certain length.</p>
<p>When we have <span class=""><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>N</mi></mrow><annotation encoding="application/x-tex">N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathdefault" style="margin-right: 0.10903em;">N</span></span></span></span></span> Boolean variables in our puzzle, the possible assignments can
be represented as length-<span class=""><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>N</mi></mrow><annotation encoding="application/x-tex">N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathdefault" style="margin-right: 0.10903em;">N</span></span></span></span></span> sequences of Booleans.</p>
<pre><code class="python hljs"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">all_bools_generator</span><span class="hljs-params">(length)</span>:</span>
    <span class="hljs-keyword">if</span> length == <span class="hljs-number">0</span>:
        <span class="hljs-keyword">yield</span> []
    <span class="hljs-keyword">else</span>:
        <span class="hljs-keyword">for</span> v <span class="hljs-keyword">in</span> all_bools_generator(length<span class="hljs-number">-1</span>):
            <span class="hljs-keyword">yield</span> [<span class="hljs-built_in">True</span>] + v
            <span class="hljs-keyword">yield</span> [<span class="hljs-built_in">False</span>] + v
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">all_bools</span><span class="hljs-params">(length)</span>:</span>
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">list</span>(all_bools_generator(length))
</code></pre>
<p>Here's an example output.</p>
<pre><code class="python hljs"><span class="hljs-meta">&gt;&gt;&gt; </span>all_bools(<span class="hljs-number">3</span>)
[[<span class="hljs-built_in">True</span>, <span class="hljs-built_in">True</span>, <span class="hljs-built_in">True</span>], [<span class="hljs-built_in">False</span>, <span class="hljs-built_in">True</span>, <span class="hljs-built_in">True</span>], [<span class="hljs-built_in">True</span>, <span class="hljs-built_in">False</span>, <span class="hljs-built_in">True</span>],
 [<span class="hljs-built_in">False</span>, <span class="hljs-built_in">False</span>, <span class="hljs-built_in">True</span>], [<span class="hljs-built_in">True</span>, <span class="hljs-built_in">True</span>, <span class="hljs-built_in">False</span>], [<span class="hljs-built_in">False</span>, <span class="hljs-built_in">True</span>, <span class="hljs-built_in">False</span>],
 [<span class="hljs-built_in">True</span>, <span class="hljs-built_in">False</span>, <span class="hljs-built_in">False</span>], [<span class="hljs-built_in">False</span>, <span class="hljs-built_in">False</span>, <span class="hljs-built_in">False</span>]]
</code></pre>
<p>We could get more ambitious and try to generate longer sequences.</p>
<pre><code class="python hljs"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">len</span>(all_bools(<span class="hljs-number">3</span>))
<span class="hljs-number">8</span>
<span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">len</span>(all_bools(<span class="hljs-number">4</span>))
<span class="hljs-number">16</span>
<span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">len</span>(all_bools(<span class="hljs-number">5</span>))
<span class="hljs-number">32</span>
<span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">len</span>(all_bools(<span class="hljs-number">6</span>))
<span class="hljs-number">64</span>
<span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">len</span>(all_bools(<span class="hljs-number">20</span>))
<span class="hljs-number">1048576</span>
<span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">len</span>(all_bools(<span class="hljs-number">25</span>))
<span class="hljs-comment"># Python runs for long enough that we give up!</span>
</code></pre>
<p>It's actually quite expensive even to run through all Boolean sequences of
nontrivial lengths, let alone to test each sequence against the rules.  The
reason is that there are <span class=""><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mn>2</mn><mi>N</mi></msup></mrow><annotation encoding="application/x-tex">2^N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.841331em; vertical-align: 0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.841331em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right: 0.10903em;">N</span></span></span></span></span></span></span></span></span></span></span></span> length-<span class=""><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>N</mi></mrow><annotation encoding="application/x-tex">N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathdefault" style="margin-right: 0.10903em;">N</span></span></span></span></span> Boolean sequences, and that kind of
exponential function grows quite quickly as the length <span class=""><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>N</mi></mrow><annotation encoding="application/x-tex">N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathdefault" style="margin-right: 0.10903em;">N</span></span></span></span></span> of our mappings
grows.</p>
<p>If we hope to be world logic-puzzle champions, we'll need to be ready for
puzzles that lead to hundreds of Boolean variables.  Are we out of luck if we
want Python to do all the work?  Worry not!  In this lab, you will implement a
SAT solver that uses a much smarter algorithm than <i>brute-force</i>
enumeration of all assignments, thanks to the magic of backtracking search.</p>
<p><a class="anchor" name="catsoop_section_3_2"></a></p><h3>3.2) A Nicer Approach</h3><p></p>
<p>Instead of enumerating all assignments, we will ask you to implement a more
clever approach for Boolean satisfiability.  One such approach is outlined
below (with some of the details intentionally omitted):</p>
<p>We start by picking an arbitrary variable <span class=""><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.43056em; vertical-align: 0em;"></span><span class="mord mathdefault">x</span></span></span></span></span> from our formula <span class=""><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>F</mi></mrow><annotation encoding="application/x-tex">F</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathdefault" style="margin-right: 0.13889em;">F</span></span></span></span></span>.  We then
construct a related formula <span class=""><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>F</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">F_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.83333em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: -0.13889em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>, which does not involve <span class=""><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.43056em; vertical-align: 0em;"></span><span class="mord mathdefault">x</span></span></span></span></span> but incorporates
all the consequences of setting <span class=""><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.43056em; vertical-align: 0em;"></span><span class="mord mathdefault">x</span></span></span></span></span> to be <code>True</code>.  We then try to solve <span class=""><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>F</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">F_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.83333em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: -0.13889em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>.
If it produces a successful result, we can combine that result with information
about <span class=""><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.43056em; vertical-align: 0em;"></span><span class="mord mathdefault">x</span></span></span></span></span> being <code>True</code> to produce our answer to the original problem.</p>
<p>If we could not solve <span class=""><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>F</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">F_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.83333em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: -0.13889em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>, we should try setting <span class=""><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.43056em; vertical-align: 0em;"></span><span class="mord mathdefault">x</span></span></span></span></span> to be <code>False</code> instead.
If no solution exists in either of the above cases, then the formula <span class=""><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>F</mi></mrow><annotation encoding="application/x-tex">F</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathdefault" style="margin-right: 0.13889em;">F</span></span></span></span></span> cannot
be satisfied.</p>
<p><a class="anchor" name="catsoop_section_3_2_1"></a></p><h4>3.2.1) Updating Expressions</h4><p></p>
<p>A key operation here is updating a formula to model the effect of a variable
assignment.  As an example, consider this starting formula.</p>
<pre><code class="python hljs">(a <span class="hljs-keyword">or</span> b <span class="hljs-keyword">or</span> <span class="hljs-keyword">not</span> c) <span class="hljs-keyword">and</span> (c <span class="hljs-keyword">or</span> d)
</code></pre>
<p>If we learn <code>c = True</code>, then the formula should be updated as follows.</p>
<pre><code class="python hljs">(a <span class="hljs-keyword">or</span> b)
</code></pre>
<p>We removed <code>not c</code> from the first clause, because we now know conclusively that
that literal is <code>False</code>.  Conversely, we can remove the second clause, because
with <code>c</code> true, it is assured that the clause will be satisfied.</p>
<p>Note a key effect of this operation: <em>variable <code>d</code> has disappeared from the
formula, so we no longer need to consider values for <code>d</code></em>.</p>
<p>In general, this approach often saves us from an exponential enumeration of
variable values, because we learn that, in some branches of the search space,
some variables are actually irrelevant to the problem.</p>
<p>This pruning will show up in the assignments that your SAT solver returns: you
are allowed (but not required) to omit variables that turn out to be
irrelevant.</p>
<p>If we had instead learned that <code>c</code> was <code>False</code>, we would update the formula
instead as follows:</p>
<pre><code class="python hljs">d
</code></pre>
<p>How did we get there?  Note that, with <code>c</code> being <code>False</code>, the first clause is
already satisfied.  The second clause, though, will only be <code>True</code> if <code>d</code> is
<code>True</code>.</p>
<p><a class="anchor" name="catsoop_section_3_2_2"></a></p><h4>3.2.2) Examples</h4><p></p>
<p>Consider this CNF formula, in the form we use in this lab:</p>
<pre><code class="python hljs">[
    [(<span class="hljs-string">'a'</span>, <span class="hljs-built_in">True</span>), (<span class="hljs-string">'b'</span>, <span class="hljs-built_in">True</span>), (<span class="hljs-string">'c'</span>, <span class="hljs-built_in">True</span>)],
    [(<span class="hljs-string">'a'</span>, <span class="hljs-built_in">False</span>), (<span class="hljs-string">'f'</span>, <span class="hljs-built_in">True</span>)],
    [(<span class="hljs-string">'d'</span>, <span class="hljs-built_in">False</span>), (<span class="hljs-string">'e'</span>, <span class="hljs-built_in">True</span>), (<span class="hljs-string">'a'</span>, <span class="hljs-built_in">True</span>), (<span class="hljs-string">'g'</span>, <span class="hljs-built_in">True</span>)],
    [(<span class="hljs-string">'h'</span>, <span class="hljs-built_in">False</span>), (<span class="hljs-string">'c'</span>, <span class="hljs-built_in">True</span>), (<span class="hljs-string">'a'</span>, <span class="hljs-built_in">False</span>)],
]
</code></pre>
<p>
<!--START question q000002 -->
</p><div class="question question-pythonic" id="cs_qdiv_q000002" style="position: static">
<div id="q000002_rendered_question">
Write a CNF formula for the case where <code>a = True</code>, without using variable <code>a</code>.  Write <code>None</code> if this assignment falsifies the formula, and leave the blank empty if this assignment renders the formula true.<br><input id="q000002" name="q000002" size="70" type="text" value="">
</div><div>
<span id="q000002_buttons"></span>
<span id="q000002_loading_wrapper">
<span id="q000002_loading" style="display:none;"><img src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="></span>
</span>
<span id="q000002_score_display"></span>
<div class="nsubmits_left" id="q000002_nsubmits_left"></div></div>
<div id="q000002_solution_container">
<div id="q000002_solution">
</div>
<div id="q000002_solution_explanation">
</div>
</div>
<div id="q000002_message"></div>
<span style="font-size: small; color: #888; font-weight: bold;">This question is due on Monday October 15, 2018 at 10:00:00 AM.</span></div>
<!--END question q000002 -->
<p></p>
<p>
<!--START question q000003 -->
</p><div class="question question-pythonic" id="cs_qdiv_q000003" style="position: static">
<div id="q000003_rendered_question">
Write a CNF formula for the case where <code>a = False</code>, without using variable <code>a</code>.  Write <code>None</code> if this assignment falsifies the formula, and leave the blank empty if this assignment renders the formula true.<br><input id="q000003" name="q000003" size="70" type="text" value="">
</div><div>
<span id="q000003_buttons"></span>
<span id="q000003_loading_wrapper">
<span id="q000003_loading" style="display:none;"><img src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="></span>
</span>
<span id="q000003_score_display"></span>
<div class="nsubmits_left" id="q000003_nsubmits_left"></div></div>
<div id="q000003_solution_container">
<div id="q000003_solution">
</div>
<div id="q000003_solution_explanation">
</div>
</div>
<div id="q000003_message"></div>
<span style="font-size: small; color: #888; font-weight: bold;">This question is due on Monday October 15, 2018 at 10:00:00 AM.</span></div>
<!--END question q000003 -->
<p></p>
<a class="anchor" name="catsoop_section_4"></a><h2>4) Implementation</h2>
<p>Implement the function <code>satisfying_assignment</code> as described in <code>lab.py</code>.  Your
function should take as input a CNF formula (in the form described throughout
this writeup).  It should return a dictionary mapping variable names to Boolean
values if there exists such an assignment that satisfies the given formula.  If
no such assignment exists, it should return <code>None</code>.</p>
<p><a class="anchor" name="catsoop_section_4_1"></a></p><h3>4.1) Optimizations</h3><p></p>
<p>A couple of further optimizations are likely to be necessary in order to pass
all of the test cases quickly enough on the server:</p>
<ul>
<li>
<p>In the procedure described above, if setting the value of <span class=""><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.43056em; vertical-align: 0em;"></span><span class="mord mathdefault">x</span></span></span></span></span> immediately leads
    to a contradiction, we can immediately discard that possibility (rather than
    waiting for a later step in the recursive process to notice the contradiction).</p>
</li>
<li>
<p>At the start of any call to your procedure, check if the formula contains any
    length-one clauses ("unit" clauses).
    If such a clause <code>[(x, b)]</code> exists, then we may set <code>x</code> to Boolean value <code>b</code>,
    just as we do in the <code>True</code> and <code>False</code> cases of the outline above.
    However, we know that, if this setting leads to failure, there is no need
    to backtrack and also try <code>x = not b</code> (because the unit clause alone tells
    us exactly what the value of <code>x</code> must be)!</p>
<p>Thus, you can begin your function with a loop that repeatedly finds unit
clauses, if any, and propagates their consequences through the formula.
Propagating the effects of one unit clause may reveal further unit clauses,
whose later propagations may themselves reveal more unit clauses, and so on.</p>
</li>
</ul>
<p>Implementing function <code>satisfying_assignment</code> in this way should allow your
code to pass the first half of our test cases in time.</p>
<p>You are free to add additional optimizations beyond what we laid out above, or
even make broader changes to the algorithm, so long as you avoid "hard coding"
for rather specific SAT problems (except for base cases like empty formulas).</p>
<a class="anchor" name="catsoop_section_5"></a><h2>5) Scheduling by Reduction</h2>
<p>Now that we have a fancy new SAT solver, let's look at applying it to a new
problem!</p>
<p>In general, it's possible to write a new implementation of backtracking search
for each new problem we encounter, but another strategy is to <em>reduce</em> a new
problem to one that we already know how to solve well.  Boolean satisfiability
is a popular target for reductions, because a lot of effort has gone into
building fast SAT solvers.  In this last part of the lab, you will implement a
reduction to SAT from a scheduling problem (and note also that some of
the test cases will use your SAT solver to solve sudoku puzzles, which can
also be expressed in this form).</p>
<p>In particular, we are interested in the real-life problem of assigning 6.009
students to different sessions for taking a quiz.
Each student is available for only some of the sessions, but each session has
limited capacity.  We want to find a schedule (assignment of students to
sessions) that respects all the constraints.</p>
<p>Please implement the function <code>boolify_scheduling_problem(student_preferences,
session_capacities)</code>, as described both below and in <code>lab.py</code>:</p>
<ul>
<li>
<p>The argument <code>student_preferences</code> is a dictionary mapping a student name
    (string) to a set of session names (strings) when that student is available.</p>
</li>
<li>
<p>Argument <code>session_capacities</code> is a dictionary mapping each session name to a
    positive integer for how many students can fit in that session.</p>
</li>
<li>
<p>The function returns a CNF formula encoding the schedule problem, as we
    explain next.</p>
</li>
</ul>
<p>Here's an example call:</p>
<pre><code class="python hljs">boolify_scheduling_problem({<span class="hljs-string">'Alice'</span>: {<span class="hljs-string">'basement'</span>, <span class="hljs-string">'penthouse'</span>},
                            <span class="hljs-string">'Bob'</span>: {<span class="hljs-string">'kitchen'</span>},
                            <span class="hljs-string">'Charles'</span>: {<span class="hljs-string">'basement'</span>, <span class="hljs-string">'kitchen'</span>},
                            <span class="hljs-string">'Dana'</span>: {<span class="hljs-string">'kitchen'</span>, <span class="hljs-string">'penthouse'</span>, <span class="hljs-string">'basement'</span>}},
                           {<span class="hljs-string">'basement'</span>: <span class="hljs-number">1</span>,
                            <span class="hljs-string">'kitchen'</span>: <span class="hljs-number">2</span>,
                            <span class="hljs-string">'penthouse'</span>: <span class="hljs-number">4</span>})
</code></pre>
<p>In English, Alice is available for the sessions in the basement and penthouse,
Bob is available only for the session in the kitchen, etc.
The basement can fit 1 student, the kitchen 2 students, and the penthouse 4
students.
In this case, one legal schedule would be Alice in the basement, Bob in the
kitchen, Charles in the kitchen, and Dana in the penthouse.</p>
<p>Your job is to translate such inputs into CNF formulas, such that your SAT
solver can then find a legal schedule (or confirm that none exists).</p>
<p>The CNF formula you output should mention only Boolean variables named like
<code>student_session</code>, where <code>student</code> is the name of a student, and where
<code>session</code> is the name of a session.
The variable <code>student_session</code> should be <code>True</code> if and only if that student is
assigned to that session (for example, the variable <code>Bob_kitchen</code> should be
<code>True</code> if Bob is in the kitchen, and False otherwise.</p>
<p>The CNF clauses you include should enforce exactly the following rules (which
are discussed in more detail below):</p>
<ol>
<li>Students are only assigned to sessions included in their preferences.</li>
<li>Each student is assigned to exactly one session.</li>
<li>No session has more assigned students than it can fit.</li>
</ol>
<p>Our requirement for this part of the lab is that your code <em>should not</em> solve
the optimization problem.  Rather, you should implement a translation to CNF
formulas (which <code>satisfying_assignment</code> can then solve).</p>
<p>During the checkoff, our staff will try to make sure you've followed this rule
and not merely, say, implemented a backtracking search directly for the
scheduling problem, to output trivial CNF problems that directly encode
answers.</p>
<p><a class="anchor" name="catsoop_section_5_1"></a></p><h3>5.1) Encoding the Rules</h3><p></p>
<p>Turning these rules into CNF formulas is a tricky task.  We'll try to provide
some guidance for thinking about each of these rules in the following sections
(though if you get stuck, please don't hesitate to ask, either in person or via
Piazza).</p>
<p>Note that each of these rules can be expressed as its own CNF formula, and the
AND of these three rules represents the overall formula we need to solve.  As
such, you may wish to write a helper function to generate the formula for each
of these rules, and to use those helper functions in <code>boolify_scheduling_problem</code>.
<strong>The examples below also make nice test cases (simpler than many we will test
your code on)!</strong></p>
<p><a class="anchor" name="catsoop_section_5_1_1"></a></p><h4>5.1.1) Students Only In Desired Rooms</h4><p></p>
<p>For each student, we need to guarantee that they are given a room that they
selected as one of their preferences.  In the example above, for example, we
know that Charles must be in the basement or the kitchen, and that Alice must
be in the basement or in the penthouse.</p>
<p>
<!--START question q000004 -->
</p><div class="question question-pythonic" id="cs_qdiv_q000004" style="position: static">
<div id="q000004_rendered_question">
In the box below, enter a CNF formula expressing this constraint
(students are only assigned to rooms in their preferences) for the example data
above (with Alice, Bob, Charles, and Dana).  Use variable names of the form
described above (e.g., <code>'Bob_kitchen'</code> represents Bob being in the
kitchen).<br><input id="q000004" name="q000004" size="50" type="text" value="">
</div><div>
<span id="q000004_buttons"></span>
<span id="q000004_loading_wrapper">
<span id="q000004_loading" style="display:none;"><img src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="></span>
</span>
<span id="q000004_score_display"></span>
<div class="nsubmits_left" id="q000004_nsubmits_left"></div></div>
<div id="q000004_solution_container">
<div id="q000004_solution">
</div>
<div id="q000004_solution_explanation">
</div>
</div>
<div id="q000004_message"></div>
<span style="font-size: small; color: #888; font-weight: bold;">This question is due on Friday October 19, 2018 at 04:00:00 PM.</span></div>
<!--END question q000004 -->
<p></p>
<p></p><div class="question"><b>Check Yourself:</b><p>
How could you generate this formula from the arguments given to
<code>boolify_scheduling_problem</code>?
</p><p><span id="queue_checkyourself_1"></span></p></div><p></p>
<p><a class="anchor" name="catsoop_section_5_1_2"></a></p><h4>5.1.2) Each Student In Exactly One Session</h4><p></p>
<p>This rule is a little bit trickier, but it may help to separate it into two pieces:</p>
<ul>
<li>each student must be in at least one session, <strong>and</strong></li>
<li>each student must be in at most one session.</li>
</ul>
<p>We can generate formulae for each of these conditions, and combine them to
construct the overall formula corresponding to this rule.</p>
<p>In fact, the first condition (that each student be assigned to at least one
session) is redundant with our first condition (that each student be assigned
to a session in their preferences).</p>
<p>So let's turn our attention to making sure that each student is assigned to <em>at
most one session</em>.  This one is a bit trickier, particularly since we need to
put things in CNF.  One flip of perspective that can be helpful is that, if we
need each student to be in at most one session, that means that for any pair of
sessions, any given student can be in only one session.</p>
<p>For example, one clause in this expression will say that Bob cannot be in both
the kitchen and the basement.  That is, we cannot have both <code>Bob_kitchen</code> and
<code>Bob_basement</code> be <code>True</code> (or, to phrase it a different way, at least one of
them must be <code>False</code>).</p>
<p>Note that there is a corresponding clause for every other pair of rooms; and
each of these clauses has a corresponding clause for Alice (and the other
students).  For purposes of this question, include <em>all</em> rooms for each
student, regardless of their preferences.</p>
<p>
<!--START question q000005 -->
</p><div class="question question-pythonic" id="cs_qdiv_q000005" style="position: static">
<div id="q000005_rendered_question">
In the box below, enter a CNF formula expressing this
constraint (students are in at most one session) for the example data above
(with Alice, Bob, Charles, and Dana).  Use variable names of the form described
above (e.g., <code>'Bob_kitchen'</code> represents Bob being in the kitchen).<br><input id="q000005" name="q000005" size="70" type="text" value="">
</div><div>
<span id="q000005_buttons"></span>
<span id="q000005_loading_wrapper">
<span id="q000005_loading" style="display:none;"><img src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="></span>
</span>
<span id="q000005_score_display"></span>
<div class="nsubmits_left" id="q000005_nsubmits_left"></div></div>
<div id="q000005_solution_container">
<div id="q000005_solution">
</div>
<div id="q000005_solution_explanation">
</div>
</div>
<div id="q000005_message"></div>
<span style="font-size: small; color: #888; font-weight: bold;">This question is due on Friday October 19, 2018 at 04:00:00 PM.</span></div>
<!--END question q000005 -->
<p></p>
<p></p><div class="question"><b>Check Yourself:</b><p>
How could you generate this formula from the arguments given to
<code>boolify_scheduling_problem</code>?
</p><p><span id="queue_checkyourself_2"></span></p></div><p></p>
<p><a class="anchor" name="catsoop_section_5_1_3"></a></p><h4>5.1.3) No Oversubscribed Sections</h4><p></p>
<p>This last rule is also fairly tricky, and it maybe requires a bit of a shift of
perspective to express this constraint in CNF.  However, it is similar to the
previous rule in some ways.</p>
<p>We can think about this as: if a given room can contain <span class=""><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>N</mi></mrow><annotation encoding="application/x-tex">N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathdefault" style="margin-right: 0.10903em;">N</span></span></span></span></span> students, then in
every possible group of <span class=""><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>N</mi><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">N+1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.76666em; vertical-align: -0.08333em;"></span><span class="mord mathdefault" style="margin-right: 0.10903em;">N</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.64444em; vertical-align: 0em;"></span><span class="mord">1</span></span></span></span></span> students, there must be at least one student who
is <em>not</em> in the given room.</p>
<p>For example, since the kitchen holds 2 people, we would need to consider all
possible groups of 3 students and make sure that at least one of them is <em>not</em>
in that room.  For purposes of this question, include <em>all</em> groups of students,
regardless of their preferences.</p>
<p>What about the penthouse?  It has enough room for everyone, so there is no need
even to include it in the constraints (it doesn't constrain our decision in any
way)!</p>
<p>
<!--START question q000006 -->
</p><div class="question question-pythonic" id="cs_qdiv_q000006" style="position: static">
<div id="q000006_rendered_question">
In the box below, enter a CNF formula expressing this constraint
(no oversubscribed sections) for the example data above (with Alice, Bobe,
Charles, and Dana).  Use variable names of the form described above (e.g.,
<code>'Bob_kitchen'</code> represents Bob being in the kitchen).<br><input id="q000006" name="q000006" size="70" type="text" value="">
</div><div>
<span id="q000006_buttons"></span>
<span id="q000006_loading_wrapper">
<span id="q000006_loading" style="display:none;"><img src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="></span>
</span>
<span id="q000006_score_display"></span>
<div class="nsubmits_left" id="q000006_nsubmits_left"></div></div>
<div id="q000006_solution_container">
<div id="q000006_solution">
</div>
<div id="q000006_solution_explanation">
</div>
</div>
<div id="q000006_message"></div>
<span style="font-size: small; color: #888; font-weight: bold;">This question is due on Friday October 19, 2018 at 04:00:00 PM.</span></div>
<!--END question q000006 -->
<p></p>
<p></p><div class="question"><b>Check Yourself:</b><p>
How could you generate this formula from the arguments given to
<code>boolify_scheduling_problem</code>?
</p><p><span id="queue_checkyourself_3"></span></p></div><p></p>
<a class="anchor" name="catsoop_section_6"></a><h2>6) UI</h2>
<p>As usual, we have provided a browser UI for this lab.  When you have
implemented both main functions of the lab, run <code>python3 server.py</code> for an
interface to load scheduling test cases and see the results of scheduling.  As
usual, visit <code>http://localhost:8000/</code> to load the UI.  Running a test case
involves generating a CNF formula and searching for a satisfying assignment for
it, each done by calling one of your functions.</p>
<a class="anchor" name="catsoop_section_7"></a><h2>7) Code Submission</h2>
<p>Once you have debugged your code locally and are satisfied, upload your
<code>lab.py</code> below:</p>
<p>
<!--START question code -->
</p><div class="question question-lab009" id="cs_qdiv_code" style="position: static">
<div id="code_rendered_question">
<input id="code" name="code" style="display: none" type="file"><button class="btn btn-catsoop" id="code_select_button">Select File</button>&nbsp;<tt><span id="code_selected_file">No file selected</span></tt>
<script type="text/javascript">
document.getElementById('code').value = '';
document.getElementById('code_select_button').addEventListener('click', function (){
    document.getElementById("code").click();
});
document.getElementById('code').addEventListener('change', function (){
    document.getElementById('code_selected_file').innerText = document.getElementById('code').value;
});
</script>
</div><div>
<span id="code_buttons"></span>
<span id="code_loading_wrapper">
<span id="code_loading" style="display:none;"><img src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="></span>
</span>
<span id="code_score_display"></span>
<div class="nsubmits_left" id="code_nsubmits_left"></div></div>
<div id="code_solution_container">
<div id="code_solution">
</div>
<div id="code_solution_explanation">
</div>
</div>
<div id="code_message"></div>
<span style="font-size: small; color: #888; font-weight: bold;">This question is due on Friday October 19, 2018 at 04:00:00 PM.</span></div>
<!--END question code -->
<p></p>
<style>
.impsolution{display:none;}
</style>
<a class="anchor" name="catsoop_section_8"></a><h2>8) Checkoff</h2>
<p>Once you are finished with the code, please come to a tutorial, lab session, or
office hour and add yourself to the queue asking for a checkoff.  <strong>You must be
ready to discuss your code and test cases in detail before asking for a checkoff.</strong></p>
<p>You should be prepared to demonstrate your code (which should be
well-commented, should avoid repetition, and should make good use of helper
functions).  In particular, be prepared to discuss:</p>
<ul>
<li>In English, the general recipe for finding assignments that satisfy a given CNF formula.</li>
<li>In English, your strategy for updating a formula based on setting an variable to be <code>True</code> or <code>False</code>.</li>
<li>Your implementation of <code>satisfying_assignment</code>, including any helper functions.</li>
<li>In English, the general recipe you came up with for translating scheduling problems into CNF formulas (including all three rules).</li>
<li>Your code for <code>boolify_scheduling_problem</code> to implement that recipe.</li>
</ul>
<p><a class="anchor" name="catsoop_section_8_1"></a></p><h3>8.1) Grade</h3>
<div class="response"><i>You have not yet received this checkoff.  When you have completed this checkoff, you will see a grade here.</i></div><p></p>
<script src="./lab_5_files/cs_ajax.js.Без названия" type="text/javascript"></script>
<script type="text/javascript">
catsoop.all_questions = ['q000000', 'q000001', 'q000002', 'q000003', 'q000004', 'q000005', 'q000006', 'code'];
catsoop.username = null;
catsoop.api_token = null;
catsoop.this_path = 'https://6009.cat-soop.org/fall18/labs/lab5';
catsoop.path_info = ['fall18', 'labs', 'lab5'];
catsoop.course = 'fall18';
catsoop.url_root = 'https://6009.cat-soop.org';
catsoop.imp = '';
catsoop.skip_alert = [];
catsoop.viewans_confirm = "Are you sure?  Viewing the answer will prevent any further submissions to this question.  Press 'OK' to view the answer, or press 'Cancel' if you have changed your mind.";
</script>
</div>
<div class="cs_right_menu"></div>
</main>
<footer>
<pre class="catsooplogo" style="font-size:50%;">\            
/    /\__/\  
\__=(  o_O )=
(__________) 
 |_ |_ |_ |_ </pre>
      Powered by <a href="https://catsoop.mit.edu/" target="_blank">CAT-SOOP</a> (development version, v13.0.0+).<br>
      CAT-SOOP is <a href="http://www.fsf.org/about/what-is-free-software" target="_blank">free/libre software</a>, available under the terms<br>of the <a href="https://6009.cat-soop.org/_util/license" target="_blank">GNU Affero General Public License, version 3</a>.<br>
<a download="" href="https://6009.cat-soop.org/_util/source.zip?course=fall18" target="_blank">Download Source Code</a><br>
<a href="https://6009.cat-soop.org/_util/jslicense.html" rel="jslicense" target="_blank">Javascript License Information</a>
</footer>



</body></html>