<!DOCTYPE html>
<!-- saved from url=(0042)https://6009.cat-soop.org/fall18/labs/lab7 -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<!-- This page was generated by CAT-SOOP (development version, v13.0.0+).  miau. -->

<title>6.009 Fall 2018</title>
<link href="./lab_7_files/logo.gif" rel="icon" type="image/gif">
<!-- include catsoop base css -->
<link href="./lab_7_files/base.css" rel="stylesheet" type="text/css">
<!-- librejs compatibility -->
<script>
    /*
    @licstart  The following is the entire license notice for the JavaScript
    code in this page.

    The Javascript on this page is part of CAT-SOOP
    Copyright (C) 2011-2018 Adam Hartz <hz@mit.edu>

    The Javascript code on this page is free software: you can redistribute it
    and/or modify it under the terms of the GNU Affero General Public License
    as published by the Free Software Foundation, either version 3 of the
    License, or (at your option) any later version.  This code is distributed
    WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY
    or FITNESS FOR A PARTICULAR PURPOSE.  See the full text of the license for
    more details (https://www.gnu.org/licenses/agpl-3.0.en.html).

    As additional permission under GNU AGPL version 3 section 7, you may
    distribute non-source (e.g., minimized or compacted) forms of that code
    without the copy of the GNU AGPL normally required by section 4, provided
    you include this license notice and a URL through which recipients can
    access the Corresponding Source.

    @licend  The above is the entire license notice for the JavaScript code in
    this page.
    */
    </script>
<!-- set up JS namespace for catsoop -->
<script type="text/javascript">
    var catsoop = {plugins: {}};

    function toggleResponsiveHeader(){
        document.getElementsByTagName('header')[0].classList.toggle('responsive');
    }

    document.addEventListener('DOMContentLoaded', function(){
        var menu_boxes = document.getElementsByClassName('dropdown-checkbox');
        for(var i=0; i<menu_boxes.length; i++){
            menu_boxes[i].checked = false;
        }
    });
    </script>
<!-- load in katex and mathjax, and CAT-SOOP-specific math rendering  -->
<script src="./lab_7_files/katex.min.js.Без названия" type="text/javascript"></script>
<link href="./lab_7_files/katex.min.css" rel="stylesheet" type="text/css">
<script src="./lab_7_files/MathJax.js.Без названия" type="text/javascript"></script>
<script src="./lab_7_files/cs_math.js.Без названия" type="text/javascript"></script>
<!-- Syntax Highlighting -->
<script src="./lab_7_files/cs_highlight.pack.min.js.Без названия" type="text/javascript"></script>
<script type="text/javascript">
      hljs.initHighlightingOnLoad();
    </script>
<style>
      :root {
        --cs-base-bg-color: #039bba;
        --cs-light-bg-color: #33cded;
        --cs-base-font-color: #fff;
        --cs-light-font-color: #000;
    }
    </style>
<!--JS for questions-->
<script src="./lab_7_files/ace.js.Без названия" type="text/javascript"></script><style id="ace_editor.css">.ace_editor {position: relative;overflow: hidden;font: 12px/normal 'Monaco', 'Menlo', 'Ubuntu Mono', 'Consolas', 'source-code-pro', monospace;direction: ltr;text-align: left;}.ace_scroller {position: absolute;overflow: hidden;top: 0;bottom: 0;background-color: inherit;-ms-user-select: none;-moz-user-select: none;-webkit-user-select: none;user-select: none;cursor: text;}.ace_content {position: absolute;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;min-width: 100%;}.ace_dragging .ace_scroller:before{position: absolute;top: 0;left: 0;right: 0;bottom: 0;content: '';background: rgba(250, 250, 250, 0.01);z-index: 1000;}.ace_dragging.ace_dark .ace_scroller:before{background: rgba(0, 0, 0, 0.01);}.ace_selecting, .ace_selecting * {cursor: text !important;}.ace_gutter {position: absolute;overflow : hidden;width: auto;top: 0;bottom: 0;left: 0;cursor: default;z-index: 4;-ms-user-select: none;-moz-user-select: none;-webkit-user-select: none;user-select: none;}.ace_gutter-active-line {position: absolute;left: 0;right: 0;}.ace_scroller.ace_scroll-left {box-shadow: 17px 0 16px -16px rgba(0, 0, 0, 0.4) inset;}.ace_gutter-cell {padding-left: 19px;padding-right: 6px;background-repeat: no-repeat;}.ace_gutter-cell.ace_error {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAABOFBMVEX/////////QRswFAb/Ui4wFAYwFAYwFAaWGAfDRymzOSH/PxswFAb/SiUwFAYwFAbUPRvjQiDllog5HhHdRybsTi3/Tyv9Tir+Syj/UC3////XurebMBIwFAb/RSHbPx/gUzfdwL3kzMivKBAwFAbbvbnhPx66NhowFAYwFAaZJg8wFAaxKBDZurf/RB6mMxb/SCMwFAYwFAbxQB3+RB4wFAb/Qhy4Oh+4QifbNRcwFAYwFAYwFAb/QRzdNhgwFAYwFAbav7v/Uy7oaE68MBK5LxLewr/r2NXewLswFAaxJw4wFAbkPRy2PyYwFAaxKhLm1tMwFAazPiQwFAaUGAb/QBrfOx3bvrv/VC/maE4wFAbRPBq6MRO8Qynew8Dp2tjfwb0wFAbx6eju5+by6uns4uH9/f36+vr/GkHjAAAAYnRSTlMAGt+64rnWu/bo8eAA4InH3+DwoN7j4eLi4xP99Nfg4+b+/u9B/eDs1MD1mO7+4PHg2MXa347g7vDizMLN4eG+Pv7i5evs/v79yu7S3/DV7/498Yv24eH+4ufQ3Ozu/v7+y13sRqwAAADLSURBVHjaZc/XDsFgGIBhtDrshlitmk2IrbHFqL2pvXf/+78DPokj7+Fz9qpU/9UXJIlhmPaTaQ6QPaz0mm+5gwkgovcV6GZzd5JtCQwgsxoHOvJO15kleRLAnMgHFIESUEPmawB9ngmelTtipwwfASilxOLyiV5UVUyVAfbG0cCPHig+GBkzAENHS0AstVF6bacZIOzgLmxsHbt2OecNgJC83JERmePUYq8ARGkJx6XtFsdddBQgZE2nPR6CICZhawjA4Fb/chv+399kfR+MMMDGOQAAAABJRU5ErkJggg==");background-repeat: no-repeat;background-position: 2px center;}.ace_gutter-cell.ace_warning {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAmVBMVEX///8AAAD///8AAAAAAABPSzb/5sAAAAB/blH/73z/ulkAAAAAAAD85pkAAAAAAAACAgP/vGz/rkDerGbGrV7/pkQICAf////e0IsAAAD/oED/qTvhrnUAAAD/yHD/njcAAADuv2r/nz//oTj/p064oGf/zHAAAAA9Nir/tFIAAAD/tlTiuWf/tkIAAACynXEAAAAAAAAtIRW7zBpBAAAAM3RSTlMAABR1m7RXO8Ln31Z36zT+neXe5OzooRDfn+TZ4p3h2hTf4t3k3ucyrN1K5+Xaks52Sfs9CXgrAAAAjklEQVR42o3PbQ+CIBQFYEwboPhSYgoYunIqqLn6/z8uYdH8Vmdnu9vz4WwXgN/xTPRD2+sgOcZjsge/whXZgUaYYvT8QnuJaUrjrHUQreGczuEafQCO/SJTufTbroWsPgsllVhq3wJEk2jUSzX3CUEDJC84707djRc5MTAQxoLgupWRwW6UB5fS++NV8AbOZgnsC7BpEAAAAABJRU5ErkJggg==");background-position: 2px center;}.ace_gutter-cell.ace_info {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAAAAAA6mKC9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAJ0Uk5TAAB2k804AAAAPklEQVQY02NgIB68QuO3tiLznjAwpKTgNyDbMegwisCHZUETUZV0ZqOquBpXj2rtnpSJT1AEnnRmL2OgGgAAIKkRQap2htgAAAAASUVORK5CYII=");background-position: 2px center;}.ace_dark .ace_gutter-cell.ace_info {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAJFBMVEUAAAChoaGAgIAqKiq+vr6tra1ZWVmUlJSbm5s8PDxubm56enrdgzg3AAAAAXRSTlMAQObYZgAAAClJREFUeNpjYMAPdsMYHegyJZFQBlsUlMFVCWUYKkAZMxZAGdxlDMQBAG+TBP4B6RyJAAAAAElFTkSuQmCC");}.ace_scrollbar {position: absolute;right: 0;bottom: 0;z-index: 6;}.ace_scrollbar-inner {position: absolute;cursor: text;left: 0;top: 0;}.ace_scrollbar-v{overflow-x: hidden;overflow-y: scroll;top: 0;}.ace_scrollbar-h {overflow-x: scroll;overflow-y: hidden;left: 0;}.ace_print-margin {position: absolute;height: 100%;}.ace_text-input {position: absolute;z-index: 0;width: 0.5em;height: 1em;opacity: 0;background: transparent;-moz-appearance: none;appearance: none;border: none;resize: none;outline: none;overflow: hidden;font: inherit;padding: 0 1px;margin: 0 -1px;text-indent: -1em;-ms-user-select: text;-moz-user-select: text;-webkit-user-select: text;user-select: text;white-space: pre!important;}.ace_text-input.ace_composition {background: inherit;color: inherit;z-index: 1000;opacity: 1;text-indent: 0;}.ace_layer {z-index: 1;position: absolute;overflow: hidden;word-wrap: normal;white-space: pre;height: 100%;width: 100%;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;pointer-events: none;}.ace_gutter-layer {position: relative;width: auto;text-align: right;pointer-events: auto;}.ace_text-layer {font: inherit !important;}.ace_cjk {display: inline-block;text-align: center;}.ace_cursor-layer {z-index: 4;}.ace_cursor {z-index: 4;position: absolute;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;border-left: 2px solid;transform: translatez(0);}.ace_slim-cursors .ace_cursor {border-left-width: 1px;}.ace_overwrite-cursors .ace_cursor {border-left-width: 0;border-bottom: 1px solid;}.ace_hidden-cursors .ace_cursor {opacity: 0.2;}.ace_smooth-blinking .ace_cursor {-webkit-transition: opacity 0.18s;transition: opacity 0.18s;}.ace_editor.ace_multiselect .ace_cursor {border-left-width: 1px;}.ace_marker-layer .ace_step, .ace_marker-layer .ace_stack {position: absolute;z-index: 3;}.ace_marker-layer .ace_selection {position: absolute;z-index: 5;}.ace_marker-layer .ace_bracket {position: absolute;z-index: 6;}.ace_marker-layer .ace_active-line {position: absolute;z-index: 2;}.ace_marker-layer .ace_selected-word {position: absolute;z-index: 4;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;}.ace_line .ace_fold {-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;display: inline-block;height: 11px;margin-top: -2px;vertical-align: middle;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACJJREFUeNpi+P//fxgTAwPDBxDxD078RSX+YeEyDFMCIMAAI3INmXiwf2YAAAAASUVORK5CYII=");background-repeat: no-repeat, repeat-x;background-position: center center, top left;color: transparent;border: 1px solid black;border-radius: 2px;cursor: pointer;pointer-events: auto;}.ace_dark .ace_fold {}.ace_fold:hover{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACBJREFUeNpi+P//fz4TAwPDZxDxD5X4i5fLMEwJgAADAEPVDbjNw87ZAAAAAElFTkSuQmCC");}.ace_tooltip {background-color: #FFF;background-image: -webkit-linear-gradient(top, transparent, rgba(0, 0, 0, 0.1));background-image: linear-gradient(to bottom, transparent, rgba(0, 0, 0, 0.1));border: 1px solid gray;border-radius: 1px;box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);color: black;max-width: 100%;padding: 3px 4px;position: fixed;z-index: 999999;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;cursor: default;white-space: pre;word-wrap: break-word;line-height: normal;font-style: normal;font-weight: normal;letter-spacing: normal;pointer-events: none;}.ace_folding-enabled > .ace_gutter-cell {padding-right: 13px;}.ace_fold-widget {-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;margin: 0 -12px 0 1px;display: none;width: 11px;vertical-align: top;background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42mWKsQ0AMAzC8ixLlrzQjzmBiEjp0A6WwBCSPgKAXoLkqSot7nN3yMwR7pZ32NzpKkVoDBUxKAAAAABJRU5ErkJggg==");background-repeat: no-repeat;background-position: center;border-radius: 3px;border: 1px solid transparent;cursor: pointer;}.ace_folding-enabled .ace_fold-widget {display: inline-block;   }.ace_fold-widget.ace_end {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42m3HwQkAMAhD0YzsRchFKI7sAikeWkrxwScEB0nh5e7KTPWimZki4tYfVbX+MNl4pyZXejUO1QAAAABJRU5ErkJggg==");}.ace_fold-widget.ace_closed {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAGCAYAAAAG5SQMAAAAOUlEQVR42jXKwQkAMAgDwKwqKD4EwQ26sSOkVWjgIIHAzPiCgaqiqnJHZnKICBERHN194O5b9vbLuAVRL+l0YWnZAAAAAElFTkSuQmCCXA==");}.ace_fold-widget:hover {border: 1px solid rgba(0, 0, 0, 0.3);background-color: rgba(255, 255, 255, 0.2);box-shadow: 0 1px 1px rgba(255, 255, 255, 0.7);}.ace_fold-widget:active {border: 1px solid rgba(0, 0, 0, 0.4);background-color: rgba(0, 0, 0, 0.05);box-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);}.ace_dark .ace_fold-widget {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHklEQVQIW2P4//8/AzoGEQ7oGCaLLAhWiSwB146BAQCSTPYocqT0AAAAAElFTkSuQmCC");}.ace_dark .ace_fold-widget.ace_end {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAH0lEQVQIW2P4//8/AxQ7wNjIAjDMgC4AxjCVKBirIAAF0kz2rlhxpAAAAABJRU5ErkJggg==");}.ace_dark .ace_fold-widget.ace_closed {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAFCAYAAACAcVaiAAAAHElEQVQIW2P4//+/AxAzgDADlOOAznHAKgPWAwARji8UIDTfQQAAAABJRU5ErkJggg==");}.ace_dark .ace_fold-widget:hover {box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);background-color: rgba(255, 255, 255, 0.1);}.ace_dark .ace_fold-widget:active {box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);}.ace_fold-widget.ace_invalid {background-color: #FFB4B4;border-color: #DE5555;}.ace_fade-fold-widgets .ace_fold-widget {-webkit-transition: opacity 0.4s ease 0.05s;transition: opacity 0.4s ease 0.05s;opacity: 0;}.ace_fade-fold-widgets:hover .ace_fold-widget {-webkit-transition: opacity 0.05s ease 0.05s;transition: opacity 0.05s ease 0.05s;opacity:1;}.ace_underline {text-decoration: underline;}.ace_bold {font-weight: bold;}.ace_nobold .ace_bold {font-weight: normal;}.ace_italic {font-style: italic;}.ace_error-marker {background-color: rgba(255, 0, 0,0.2);position: absolute;z-index: 9;}.ace_highlight-marker {background-color: rgba(255, 255, 0,0.2);position: absolute;z-index: 8;}.ace_br1 {border-top-left-radius    : 3px;}.ace_br2 {border-top-right-radius   : 3px;}.ace_br3 {border-top-left-radius    : 3px; border-top-right-radius:    3px;}.ace_br4 {border-bottom-right-radius: 3px;}.ace_br5 {border-top-left-radius    : 3px; border-bottom-right-radius: 3px;}.ace_br6 {border-top-right-radius   : 3px; border-bottom-right-radius: 3px;}.ace_br7 {border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px;}.ace_br8 {border-bottom-left-radius : 3px;}.ace_br9 {border-top-left-radius    : 3px; border-bottom-left-radius:  3px;}.ace_br10{border-top-right-radius   : 3px; border-bottom-left-radius:  3px;}.ace_br11{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-left-radius:  3px;}.ace_br12{border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}.ace_br13{border-top-left-radius    : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}.ace_br14{border-top-right-radius   : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}.ace_br15{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px;}
/*# sourceURL=ace/css/ace_editor.css */</style><style id="ace-tm">.ace-tm .ace_gutter {background: #f0f0f0;color: #333;}.ace-tm .ace_print-margin {width: 1px;background: #e8e8e8;}.ace-tm .ace_fold {background-color: #6B72E6;}.ace-tm {background-color: #FFFFFF;color: black;}.ace-tm .ace_cursor {color: black;}.ace-tm .ace_invisible {color: rgb(191, 191, 191);}.ace-tm .ace_storage,.ace-tm .ace_keyword {color: blue;}.ace-tm .ace_constant {color: rgb(197, 6, 11);}.ace-tm .ace_constant.ace_buildin {color: rgb(88, 72, 246);}.ace-tm .ace_constant.ace_language {color: rgb(88, 92, 246);}.ace-tm .ace_constant.ace_library {color: rgb(6, 150, 14);}.ace-tm .ace_invalid {background-color: rgba(255, 0, 0, 0.1);color: red;}.ace-tm .ace_support.ace_function {color: rgb(60, 76, 114);}.ace-tm .ace_support.ace_constant {color: rgb(6, 150, 14);}.ace-tm .ace_support.ace_type,.ace-tm .ace_support.ace_class {color: rgb(109, 121, 222);}.ace-tm .ace_keyword.ace_operator {color: rgb(104, 118, 135);}.ace-tm .ace_string {color: rgb(3, 106, 7);}.ace-tm .ace_comment {color: rgb(76, 136, 107);}.ace-tm .ace_comment.ace_doc {color: rgb(0, 102, 255);}.ace-tm .ace_comment.ace_doc.ace_tag {color: rgb(128, 159, 191);}.ace-tm .ace_constant.ace_numeric {color: rgb(0, 0, 205);}.ace-tm .ace_variable {color: rgb(49, 132, 149);}.ace-tm .ace_xml-pe {color: rgb(104, 104, 91);}.ace-tm .ace_entity.ace_name.ace_function {color: #0000A2;}.ace-tm .ace_heading {color: rgb(12, 7, 255);}.ace-tm .ace_list {color:rgb(185, 6, 144);}.ace-tm .ace_meta.ace_tag {color:rgb(0, 22, 142);}.ace-tm .ace_string.ace_regex {color: rgb(255, 0, 0)}.ace-tm .ace_marker-layer .ace_selection {background: rgb(181, 213, 255);}.ace-tm.ace_multiselect .ace_selection.ace_start {box-shadow: 0 0 3px 0px white;}.ace-tm .ace_marker-layer .ace_step {background: rgb(252, 255, 0);}.ace-tm .ace_marker-layer .ace_stack {background: rgb(164, 229, 101);}.ace-tm .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid rgb(192, 192, 192);}.ace-tm .ace_marker-layer .ace_active-line {background: rgba(0, 0, 0, 0.07);}.ace-tm .ace_gutter-active-line {background-color : #dcdcdc;}.ace-tm .ace_marker-layer .ace_selected-word {background: rgb(250, 250, 255);border: 1px solid rgb(200, 200, 250);}.ace-tm .ace_indent-guide {background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;}
/*# sourceURL=ace/css/ace-tm */</style><style>    .error_widget_wrapper {        background: inherit;        color: inherit;        border:none    }    .error_widget {        border-top: solid 2px;        border-bottom: solid 2px;        margin: 5px 0;        padding: 10px 40px;        white-space: pre-wrap;    }    .error_widget.ace_error, .error_widget_arrow.ace_error{        border-color: #ff5a5a    }    .error_widget.ace_warning, .error_widget_arrow.ace_warning{        border-color: #F1D817    }    .error_widget.ace_info, .error_widget_arrow.ace_info{        border-color: #5a5a5a    }    .error_widget.ace_ok, .error_widget_arrow.ace_ok{        border-color: #5aaa5a    }    .error_widget_arrow {        position: absolute;        border: solid 5px;        border-top-color: transparent!important;        border-right-color: transparent!important;        border-left-color: transparent!important;        top: -5px;    }</style>
<meta content="width=device-width, initial-scale=1" name="viewport">
<style type="text/css">.MathJax_Hover_Frame {border-radius: .25em; -webkit-border-radius: .25em; -moz-border-radius: .25em; -khtml-border-radius: .25em; box-shadow: 0px 0px 15px #83A; -webkit-box-shadow: 0px 0px 15px #83A; -moz-box-shadow: 0px 0px 15px #83A; -khtml-box-shadow: 0px 0px 15px #83A; border: 1px solid #A6D ! important; display: inline-block; position: absolute}
.MathJax_Menu_Button .MathJax_Hover_Arrow {position: absolute; cursor: pointer; display: inline-block; border: 2px solid #AAA; border-radius: 4px; -webkit-border-radius: 4px; -moz-border-radius: 4px; -khtml-border-radius: 4px; font-family: 'Courier New',Courier; font-size: 9px; color: #F0F0F0}
.MathJax_Menu_Button .MathJax_Hover_Arrow span {display: block; background-color: #AAA; border: 1px solid; border-radius: 3px; line-height: 0; padding: 4px}
.MathJax_Hover_Arrow:hover {color: white!important; border: 2px solid #CCC!important}
.MathJax_Hover_Arrow:hover span {background-color: #CCC!important}
</style><style type="text/css">#MathJax_About {position: fixed; left: 50%; width: auto; text-align: center; border: 3px outset; padding: 1em 2em; background-color: #DDDDDD; color: black; cursor: default; font-family: message-box; font-size: 120%; font-style: normal; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; border-radius: 15px; -webkit-border-radius: 15px; -moz-border-radius: 15px; -khtml-border-radius: 15px; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_About.MathJax_MousePost {outline: none}
.MathJax_Menu {position: absolute; background-color: white; color: black; width: auto; padding: 2px; border: 1px solid #CCCCCC; margin: 0; cursor: default; font: menu; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
.MathJax_MenuItem {padding: 2px 2em; background: transparent}
.MathJax_MenuArrow {position: absolute; right: .5em; padding-top: .25em; color: #666666; font-size: .75em}
.MathJax_MenuActive .MathJax_MenuArrow {color: white}
.MathJax_MenuArrow.RTL {left: .5em; right: auto}
.MathJax_MenuCheck {position: absolute; left: .7em}
.MathJax_MenuCheck.RTL {right: .7em; left: auto}
.MathJax_MenuRadioCheck {position: absolute; left: 1em}
.MathJax_MenuRadioCheck.RTL {right: 1em; left: auto}
.MathJax_MenuLabel {padding: 2px 2em 4px 1.33em; font-style: italic}
.MathJax_MenuRule {border-top: 1px solid #CCCCCC; margin: 4px 1px 0px}
.MathJax_MenuDisabled {color: GrayText}
.MathJax_MenuActive {background-color: Highlight; color: HighlightText}
.MathJax_MenuDisabled:focus, .MathJax_MenuLabel:focus {background-color: #E8E8E8}
.MathJax_ContextMenu:focus {outline: none}
.MathJax_ContextMenu .MathJax_MenuItem:focus {outline: none}
#MathJax_AboutClose {top: .2em; right: .2em}
.MathJax_Menu .MathJax_MenuClose {top: -10px; left: -10px}
.MathJax_MenuClose {position: absolute; cursor: pointer; display: inline-block; border: 2px solid #AAA; border-radius: 18px; -webkit-border-radius: 18px; -moz-border-radius: 18px; -khtml-border-radius: 18px; font-family: 'Courier New',Courier; font-size: 24px; color: #F0F0F0}
.MathJax_MenuClose span {display: block; background-color: #AAA; border: 1.5px solid; border-radius: 18px; -webkit-border-radius: 18px; -moz-border-radius: 18px; -khtml-border-radius: 18px; line-height: 0; padding: 8px 0 6px}
.MathJax_MenuClose:hover {color: white!important; border: 2px solid #CCC!important}
.MathJax_MenuClose:hover span {background-color: #CCC!important}
.MathJax_MenuClose:hover:focus {outline: none}
</style><style type="text/css">.MathJax_Preview .MJXf-math {color: inherit!important}
</style><style type="text/css">.MJX_Assistive_MathML {position: absolute!important; top: 0; left: 0; clip: rect(1px, 1px, 1px, 1px); padding: 1px 0 0 0!important; border: 0!important; height: 1px!important; width: 1px!important; overflow: hidden!important; display: block!important; -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none}
.MJX_Assistive_MathML.MJX_Assistive_MathML_Block {width: 100%!important}
</style><style type="text/css">#MathJax_Zoom {position: absolute; background-color: #F0F0F0; overflow: auto; display: block; z-index: 301; padding: .5em; border: 1px solid black; margin: 0; font-weight: normal; font-style: normal; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; -webkit-box-sizing: content-box; -moz-box-sizing: content-box; box-sizing: content-box; box-shadow: 5px 5px 15px #AAAAAA; -webkit-box-shadow: 5px 5px 15px #AAAAAA; -moz-box-shadow: 5px 5px 15px #AAAAAA; -khtml-box-shadow: 5px 5px 15px #AAAAAA; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_ZoomOverlay {position: absolute; left: 0; top: 0; z-index: 300; display: inline-block; width: 100%; height: 100%; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
#MathJax_ZoomFrame {position: relative; display: inline-block; height: 0; width: 0}
#MathJax_ZoomEventTrap {position: absolute; left: 0; top: 0; z-index: 302; display: inline-block; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
</style><style type="text/css">.MathJax_Preview {color: #888}
#MathJax_Message {position: fixed; left: 1em; bottom: 1.5em; background-color: #E6E6E6; border: 1px solid #959595; margin: 0px; padding: 2px 8px; z-index: 102; color: black; font-size: 80%; width: auto; white-space: nowrap}
#MathJax_MSIE_Frame {position: absolute; top: 0; left: 0; width: 0px; z-index: 101; border: 0px; margin: 0px; padding: 0px}
.MathJax_Error {color: #CC0000; font-style: italic}
</style><style type="text/css">.MJXp-script {font-size: .8em}
.MJXp-right {-webkit-transform-origin: right; -moz-transform-origin: right; -ms-transform-origin: right; -o-transform-origin: right; transform-origin: right}
.MJXp-bold {font-weight: bold}
.MJXp-italic {font-style: italic}
.MJXp-scr {font-family: MathJax_Script,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-frak {font-family: MathJax_Fraktur,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-sf {font-family: MathJax_SansSerif,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-cal {font-family: MathJax_Caligraphic,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-mono {font-family: MathJax_Typewriter,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-largeop {font-size: 150%}
.MJXp-largeop.MJXp-int {vertical-align: -.2em}
.MJXp-math {display: inline-block; line-height: 1.2; text-indent: 0; font-family: 'Times New Roman',Times,STIXGeneral,serif; white-space: nowrap; border-collapse: collapse}
.MJXp-display {display: block; text-align: center; margin: 1em 0}
.MJXp-math span {display: inline-block}
.MJXp-box {display: block!important; text-align: center}
.MJXp-box:after {content: " "}
.MJXp-rule {display: block!important; margin-top: .1em}
.MJXp-char {display: block!important}
.MJXp-mo {margin: 0 .15em}
.MJXp-mfrac {margin: 0 .125em; vertical-align: .25em}
.MJXp-denom {display: inline-table!important; width: 100%}
.MJXp-denom > * {display: table-row!important}
.MJXp-surd {vertical-align: top}
.MJXp-surd > * {display: block!important}
.MJXp-script-box > *  {display: table!important; height: 50%}
.MJXp-script-box > * > * {display: table-cell!important; vertical-align: top}
.MJXp-script-box > *:last-child > * {vertical-align: bottom}
.MJXp-script-box > * > * > * {display: block!important}
.MJXp-mphantom {visibility: hidden}
.MJXp-munderover, .MJXp-munder {display: inline-table!important}
.MJXp-over {display: inline-block!important; text-align: center}
.MJXp-over > * {display: block!important}
.MJXp-munderover > *, .MJXp-munder > * {display: table-row!important}
.MJXp-mtable {vertical-align: .25em; margin: 0 .125em}
.MJXp-mtable > * {display: inline-table!important; vertical-align: middle}
.MJXp-mtr {display: table-row!important}
.MJXp-mtd {display: table-cell!important; text-align: center; padding: .5em 0 0 .5em}
.MJXp-mtr > .MJXp-mtd:first-child {padding-left: 0}
.MJXp-mtr:first-child > .MJXp-mtd {padding-top: 0}
.MJXp-mlabeledtr {display: table-row!important}
.MJXp-mlabeledtr > .MJXp-mtd:first-child {padding-left: 0}
.MJXp-mlabeledtr:first-child > .MJXp-mtd {padding-top: 0}
.MJXp-merror {background-color: #FFFF88; color: #CC0000; border: 1px solid #CC0000; padding: 1px 3px; font-style: normal; font-size: 90%}
.MJXp-scale0 {-webkit-transform: scaleX(.0); -moz-transform: scaleX(.0); -ms-transform: scaleX(.0); -o-transform: scaleX(.0); transform: scaleX(.0)}
.MJXp-scale1 {-webkit-transform: scaleX(.1); -moz-transform: scaleX(.1); -ms-transform: scaleX(.1); -o-transform: scaleX(.1); transform: scaleX(.1)}
.MJXp-scale2 {-webkit-transform: scaleX(.2); -moz-transform: scaleX(.2); -ms-transform: scaleX(.2); -o-transform: scaleX(.2); transform: scaleX(.2)}
.MJXp-scale3 {-webkit-transform: scaleX(.3); -moz-transform: scaleX(.3); -ms-transform: scaleX(.3); -o-transform: scaleX(.3); transform: scaleX(.3)}
.MJXp-scale4 {-webkit-transform: scaleX(.4); -moz-transform: scaleX(.4); -ms-transform: scaleX(.4); -o-transform: scaleX(.4); transform: scaleX(.4)}
.MJXp-scale5 {-webkit-transform: scaleX(.5); -moz-transform: scaleX(.5); -ms-transform: scaleX(.5); -o-transform: scaleX(.5); transform: scaleX(.5)}
.MJXp-scale6 {-webkit-transform: scaleX(.6); -moz-transform: scaleX(.6); -ms-transform: scaleX(.6); -o-transform: scaleX(.6); transform: scaleX(.6)}
.MJXp-scale7 {-webkit-transform: scaleX(.7); -moz-transform: scaleX(.7); -ms-transform: scaleX(.7); -o-transform: scaleX(.7); transform: scaleX(.7)}
.MJXp-scale8 {-webkit-transform: scaleX(.8); -moz-transform: scaleX(.8); -ms-transform: scaleX(.8); -o-transform: scaleX(.8); transform: scaleX(.8)}
.MJXp-scale9 {-webkit-transform: scaleX(.9); -moz-transform: scaleX(.9); -ms-transform: scaleX(.9); -o-transform: scaleX(.9); transform: scaleX(.9)}
.MathJax_PHTML .noError {vertical-align: ; font-size: 90%; text-align: left; color: black; padding: 1px 3px; border: 1px solid}
</style></head>
<body style="margin: 0px;"><div id="MathJax_Message" style="display: none;"></div>
<header id="cs_header">
<div class="nav-container">
<div class="cs_header_text"><a href="https://6009.cat-soop.org/fall18"><img src="./lab_7_files/logo.gif">&nbsp;6.009</a></div>
<a href="https://6009.cat-soop.org/fall18/information">Information/Policies</a>
<a href="https://6009.cat-soop.org/fall18/progress">Progress</a>
<div class="dropdown" onmouseleave="this.children[1].checked = false;">
<label class="dropbtn" for="cs_menu_5c20cd9501273c4cc9fd6d77f4acf768">Help<span class="downarrow">▼</span></label>
<input checked="false" class="dropdown-checkbox" id="cs_menu_5c20cd9501273c4cc9fd6d77f4acf768" type="checkbox">
<div class="dropdown-content">
<a href="https://piazza.com/mit/fall2018/6009">Piazza</a>
<a href="https://6009.cat-soop.org/fall18/queue/">Help Queue</a>
<a href="https://6009.cat-soop.org/fall18/python">Accessing/Installing Python</a>
<a href="https://6009.cat-soop.org/fall18/otherhelp">Other Help</a></div></div>
<a href="https://6009.cat-soop.org/fall18/labs/lab7?loginaction=login">Log In</a><a class="icon" href="javascript:void(0);" onclick="toggleResponsiveHeader()">☰</a>
</div>
</header>
<main class="cs_body" id="cs_body">
<div class="cs_left_menu"></div>
<div class="cs_content">
<center><h1>Lab 7: Symbolic Algebra</h1></center>
<div class="response" id="catsoop_login_box">
<b><center>You are not logged in.</center></b><br>
If you are a current student, please <a href="https://6009.cat-soop.org/fall18/labs/lab7?loginaction=login">Log
In</a> for full access to the web site.<br>Note that this link will take you to
an external site (<tt>https://oidc.mit.edu</tt>) to authenticate, and then you will be redirected
back to this page.
</div>
<p></p><h2>Table of Contents</h2><ul><li><a href="https://6009.cat-soop.org/fall18/labs/lab7#catsoop_section_1">1) Preparation</a></li><li><a href="https://6009.cat-soop.org/fall18/labs/lab7#catsoop_section_2">2) Introduction</a></li><li><a href="https://6009.cat-soop.org/fall18/labs/lab7#catsoop_section_3">3) Basic Symbols</a></li><li><a href="https://6009.cat-soop.org/fall18/labs/lab7#catsoop_section_4">4) Binary Operations</a></li><li><a href="https://6009.cat-soop.org/fall18/labs/lab7#catsoop_section_5">5) Display</a></li><li><a href="https://6009.cat-soop.org/fall18/labs/lab7#catsoop_section_6">6) Python Integration</a></li><li><a href="https://6009.cat-soop.org/fall18/labs/lab7#catsoop_section_7">7) Parenthesization</a></li><li><a href="https://6009.cat-soop.org/fall18/labs/lab7#catsoop_section_8">8) Derivatives</a></li><li><a href="https://6009.cat-soop.org/fall18/labs/lab7#catsoop_section_9">9) Simplification</a></li><li><a href="https://6009.cat-soop.org/fall18/labs/lab7#catsoop_section_10">10) Evaluation</a></li><li><a href="https://6009.cat-soop.org/fall18/labs/lab7#catsoop_section_11">11) Parsing Symbolic Expressions</a></li><ul><li><a href="https://6009.cat-soop.org/fall18/labs/lab7#catsoop_section_11_1">11.1) Tokenizing</a></li><li><a href="https://6009.cat-soop.org/fall18/labs/lab7#catsoop_section_11_2">11.2) Parsing</a></li></ul><li><a href="https://6009.cat-soop.org/fall18/labs/lab7#catsoop_section_12">12) Code Submission</a></li><li><a href="https://6009.cat-soop.org/fall18/labs/lab7#catsoop_section_13">13) Checkoff</a></li><ul><li><a href="https://6009.cat-soop.org/fall18/labs/lab7#catsoop_section_13_1">13.1) Grade</a></li></ul></ul>
<p></p>
<a class="anchor" name="catsoop_section_1"></a><h2>1) Preparation</h2>
<div class="question">
<p>You may wish to read the whole lab before implementing
any code, so that you can make a more complete plan before diving in.  Try
making a plan for your code, including the following:</p>
<ul>
<li>Which classes are you going to implement?  Which classes are subclasses of which classes?
</li><li>What attributes are stored in each class?
</li><li>What methods does each class have?
</li></ul>
<p>As you work through, be on the lookout for opportunities to take advantage
of inheritance to avoid repetitious code!</p>
<p>Throughout the lab, you should not use Python's <code>eval</code>,
<code>exec</code>, <code>isinstance</code>, or <code>type</code> built-ins,
except where we have indicated that it is okay to do so.</p>
</div>
<p>This lab assumes you have Python 3.5 or later installed on your machine.</p>
<p>The following file contains code and other resources as a starting point for
this lab: <a download="lab7.zip" href="https://6009.cat-soop.org/fall18/lab_distribution.zip?path=%5B%22fall18%22%2C+%22labs%22%2C+%22lab7%22%5D"><tt>lab7.zip</tt></a></p>
<p>Most of your changes should be made to <code>lab.py</code>, which you will submit
at the end of this lab.  Importantly, you should not add any imports
to the file.  You may submit portions of the lab late (see the
<a href="https://6009.cat-soop.org/_static/fall18/grading">grading page</a> for more details), but the last day to
submit this lab will be the Friday after the due date.</p>
<p>This lab is worth a total of 4 points.  Your score for the lab is based on:</p>
<ul>
<li>passing the test cases from <code>test.py</code> under the time limit (1.5 points), and</li>
<li>a brief "checkoff" conversation with a staff member to discuss your code (2.5 points).</li>
</ul>
<p>For this lab, you will only receive credit for a test case if it runs to
completion under the time limit on the server.</p>
<p><strong>This lab does not have any questions that are due before lecture, but you are
strongly encouraged to read the specification, and perhaps to get started with
trying to implement some of the code, before lecture on 29 Oct.  The questions
below are all due on Friday, 2 Nov.</strong></p>
<a class="anchor" name="catsoop_section_2"></a><h2>2) Introduction</h2>
<p>In this lab, we will develop a Python framework for symbolic algebra.  In such
a system, algebraic expressions including variables and numbers are not
immediately evaluated, but rather are stored in symbolic form.</p>
<p>We'll start by implementing support for basic arithmetic (<code>+</code>, <code>-</code>, <code>*</code>, and
<code>/</code>) on variables and integers, and then we'll add support for simplification
and differentiation of these symbolic expressions.  Ultimately, this system
will be able to support interactions such as the following:</p>
<pre><code class="py hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span>x = Var(<span class="hljs-string">'x'</span>)
<span class="hljs-meta">&gt;&gt;&gt; </span>y = Var(<span class="hljs-string">'y'</span>)
<span class="hljs-meta">&gt;&gt;&gt; </span>print(x + y)
x + y
<span class="hljs-meta">&gt;&gt;&gt; </span>z = x + <span class="hljs-number">2</span>*x*y + x
<span class="hljs-meta">&gt;&gt;&gt; </span>print(z)
x + <span class="hljs-number">2</span> * x * y + x
<span class="hljs-meta">&gt;&gt;&gt; </span>print(z.deriv(<span class="hljs-string">'x'</span>))
<span class="hljs-number">1</span> + <span class="hljs-number">2</span> * x * <span class="hljs-number">0</span> + y * (<span class="hljs-number">2</span> * <span class="hljs-number">1</span> + x * <span class="hljs-number">0</span>) + <span class="hljs-number">1</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>print(z.deriv(<span class="hljs-string">'x'</span>).simplify())
<span class="hljs-number">1</span> + y * <span class="hljs-number">2</span> + <span class="hljs-number">1</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>print(z.deriv(<span class="hljs-string">'x'</span>))
<span class="hljs-number">1</span> + <span class="hljs-number">2</span> * x * <span class="hljs-number">0</span> + y * (<span class="hljs-number">2</span> * <span class="hljs-number">1</span> + x * <span class="hljs-number">0</span>) + <span class="hljs-number">1</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>print(z.deriv(<span class="hljs-string">'y'</span>))
<span class="hljs-number">0</span> + <span class="hljs-number">2</span> * x * <span class="hljs-number">1</span> + y * (<span class="hljs-number">2</span> * <span class="hljs-number">0</span> + x * <span class="hljs-number">0</span>) + <span class="hljs-number">0</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>print(z.deriv(<span class="hljs-string">'y'</span>).simplify())
<span class="hljs-number">2</span> * x
<span class="hljs-meta">&gt;&gt;&gt; </span>z.<span class="hljs-built_in">eval</span>({<span class="hljs-string">'x'</span>: <span class="hljs-number">3</span>, <span class="hljs-string">'y'</span>: <span class="hljs-number">7</span>})
<span class="hljs-number">48</span>
</code></pre>
<a class="anchor" name="catsoop_section_3"></a><h2>3) Basic Symbols</h2>
<p>In this week's code distribution, we have provided a very minimal skeleton,
containing a small definition for three classes:</p>
<ul>
<li><code>Symbol</code> will be our base class; all other classes we create will inherit from this class, and any behavior that is common between all expressions (that is, all behavior that is not unique to a particular <em>kind</em> of symbolic expression) should be implemented here.</li>
<li>Instances of <code>Var</code> represent variables (such as <span class=""><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.43056em; vertical-align: 0em;"></span><span class="mord mathdefault">x</span></span></span></span></span> or <span class=""><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>y</mi></mrow><annotation encoding="application/x-tex">y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.625em; vertical-align: -0.19444em;"></span><span class="mord mathdefault" style="margin-right: 0.03588em;">y</span></span></span></span></span>).</li>
<li>Instances of <code>Num</code> represent numbers within symbolic expressions).</li>
</ul>
<p>Take a look at the <code>Var</code> and <code>Num</code> classes.  Note that each has <code>__init__</code>,
<code>__repr__</code>, and <code>__str__</code> defined for you already.</p>
<a class="anchor" name="catsoop_section_4"></a><h2>4) Binary Operations</h2>
<p>So far, our system is somewhat uninteresting.  It lets us represent variables
and numbers, but in order to be able to represent meaningful expressions, we
also need ways of combining these primitive symbols together.  In particular,
we will represent these kinds of combinations as <em>binary operations</em>.  You
should implement a class called <code>BinOp</code> to represent a binary operation.
Because it is a type of symbolic expression, <code>BinOp</code> should be a subclass of
<code>Symbol</code>.</p>
<p>We will implement four subclasses of <code>BinOp</code>:</p>
<ul>
<li><code>Add</code>, to represent an addition</li>
<li><code>Sub</code>, to represent a subtraction</li>
<li><code>Mul</code>, to represent a multiplication</li>
<li><code>Div</code>, to represent a division</li>
</ul>
<p>By virtue of being binary operations, each instance of any of these classes
should have two instance variables:</p>
<ul>
<li><code>left</code>: a <code>Symbol</code> instance representing the left-hand operand</li>
<li><code>right</code>: a <code>Symbol</code> instance representing the right-hand operand</li>
</ul>
<p>For example, <code>Add(Add(Var('x'), Num(3)), Num(2))</code> represents the symbolic
expression <span class=""><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>x</mi><mo>+</mo><mn>3</mn><mo>+</mo><mn>2</mn></mrow><annotation encoding="application/x-tex">x + 3 + 2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.66666em; vertical-align: -0.08333em;"></span><span class="mord mathdefault">x</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.72777em; vertical-align: -0.08333em;"></span><span class="mord">3</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.64444em; vertical-align: 0em;"></span><span class="mord">2</span></span></span></span></span>.  The <code>left</code> attribute of this instance should be the
<code>Add</code> instance variable <code>Add(Var('x'), Num(3))</code>, and the <code>right</code> attribute
should be the <code>Num</code> instance <code>Num(2)</code>.</p>
<p></p><div class="question"><b>Check Yourself:</b><p>
The structure of each of these classes' <code>__init__</code> methods is likely to be
almost the same (if not exactly the same).  What does that suggest about
how/where you should implement <code>__init__</code>?
</p><p><span id="queue_checkyourself_1"></span></p></div><p></p>
<p>These constructors should also accept integers or strings as their arguments.
<code>Add(2, 'x')</code>, for example, should create an instance <code>Add(Num(2), Var('x'))</code>.
<strong>It is okay to use <code>isinstance</code> or <code>type</code> in this context, to check if the
arguments passed to the constructor are strings or integers.</strong></p>
<a class="anchor" name="catsoop_section_5"></a><h2>5) Display</h2>
<p>As of right now, attempting to print an instance of <code>BinOp</code> (or a subclass
thereof) will not really tell us much useful information.  In this section,
we'll improve on Python's ability to display these objects.</p>
<p>Python has two different ways to get a representation of an object as
a string. First, <code>repr(obj)</code> (which calls <code>obj.__repr__()</code> under the hood) should
produce a string containing a representation that, when passed back into
Python, would evaluate to an equivalent object. Second, <code>str(obj)</code> (which calls
<code>obj.__str__()</code> under the hood) should produce a human-readable string
representation.</p>
<p></p><div class="question"><b>Check Yourself:</b><p>
Take a look at the <code>__repr__</code> and <code>__str__</code> methods in <code>Var</code> and <code>Num</code>.  What
is the difference between them?
</p><p><span id="queue_checkyourself_2"></span></p></div><p></p>
<p>Implement <code>__repr__</code> and <code>__str__</code> in appropriate places (avoiding repeating
code where possible), such that, for any symbolic expression <code>sym</code>, <code>repr(sym)</code>
will produce an string containing a Python expression that, when evaluated,
will result in a symbolic expression equivalent to <code>sym</code>.  Similarly, <code>str(sym)</code>
should produce a human-readable representation, given by <code>left_string + ' ' +
operand + ' ' + right_string</code>, where <code>left_string</code> and <code>right_string</code> are the
string representations of the <code>left</code> and <code>right</code> attributes, respectively, and
<code>operand</code> is a string representation of the operand associated with the
specific class in question.  For example:</p>
<pre><code class="py hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span>z = Add(Var(<span class="hljs-string">'x'</span>), Sub(Var(<span class="hljs-string">'y'</span>), Num(<span class="hljs-number">2</span>)))
<span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">repr</span>(z)  <span class="hljs-comment"># notice that this result, if fed back into Python, produces an equivalent object.</span>
<span class="hljs-string">"Add(Var('x'), Sub(Var('y'), Num(2)))"</span>
<span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">str</span>(z)  <span class="hljs-comment"># this result cannot necessarily be fed back into Python, but it looks nicer.</span>
<span class="hljs-string">'x + y - 2'</span>
</code></pre>
<p>As always, try to avoid repetitious code when implementing!  You may wish to
store additional class and/or instance variables in the subclasses of <code>BinOp</code>
in order to accomplish this.  For example, we need a way to look up a string
representing the associated operator for each of the supported operations.</p>
<a class="anchor" name="catsoop_section_6"></a><h2>6) Python Integration</h2>
<p>Entering expressions of the form <code>Add(Var('x'), Add(Num(3), Num(2)))</code> can get a
little bit tedious.  It would be much nicer, for example, to be able to enter
that expression as <code>Var('x') + Num(3) + Num(2)</code>.</p>
<p>Add methods to a appropriate class(es) in your file such that, for any
arbitrary symbolic expressions <code>E1</code> and <code>E2</code>:</p>
<ul>
<li><code>E1 + E2</code> results in an instance <code>Add(E1, E2)</code><br>(note: you can override the behavior of <code>+</code> with the <code>__add__</code> and <code>__radd__</code> "dunder" methods)</li>
<li><code>E1 - E2</code> results in an instance <code>Sub(E1, E2)</code><br>(note: you can override the behavior of <code>-</code> with the <code>__sub__</code> and <code>__rsub__</code> "dunder" methods)</li>
<li><code>E1 * E2</code> results in an instance <code>Mul(E1, E2)</code><br>(note: you can override the behavior of <code>*</code> with the <code>__mul__</code> and <code>__rmul__</code> "dunder" methods)</li>
<li><code>E1 / E2</code> results in an instance <code>Div(E1, E2)</code><br>(note: you can override the behavior of <code>/</code> with the <code>__truediv__</code> and <code>__rtruediv__</code> "dunder" methods)</li>
</ul>
<p></p><div class="question"><b>Check Yourself:</b><p>
Try to avoid duplicating code when implementing these behaviors!  In what
class(es) should you implement <code>__add__</code>?
</p><p><span id="queue_checkyourself_3"></span></p></div><p></p>
<p>These behaviors should work so long as <em>at least one</em> of <code>E1</code> and <code>E2</code> is a
symbolic expression, and the other is either a symbolic expression, an integer,
or a string.</p>
<p>For example:</p>
<pre><code class="py hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span>Var(<span class="hljs-string">'a'</span>) * Var(<span class="hljs-string">'b'</span>)
Mul(Var(<span class="hljs-string">'a'</span>), Var(<span class="hljs-string">'b'</span>))
<span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-number">2</span> + Var(<span class="hljs-string">'x'</span>)
Add(Num(<span class="hljs-number">2</span>), Var(<span class="hljs-string">'x'</span>))
<span class="hljs-meta">&gt;&gt;&gt; </span>Num(<span class="hljs-number">3</span>) / <span class="hljs-number">2</span>
Div(Num(<span class="hljs-number">3</span>), Num(<span class="hljs-number">2</span>))
<span class="hljs-meta">&gt;&gt;&gt; </span>Num(<span class="hljs-number">3</span>) + <span class="hljs-string">'x'</span>
Add(Num(<span class="hljs-number">3</span>), Var(<span class="hljs-string">'x'</span>))
</code></pre>
<a class="anchor" name="catsoop_section_7"></a><h2>7) Parenthesization</h2>
<p>Note that, while a <code>__repr__</code> implementation that follows the rules described
above works well for complicated expressions (as seen in the expressions
in the last example above), a <code>__str__</code> implementation that
follows those rules results in some possible ambiguities or erroneous
interpretations.  In particular, consider the expression
<code>Mul(Var('x'), Add(Var('y'), Var('z')))</code>.  According to the rules above for
<code>__str__</code>, that
expression's string representation would be <code>"x * y + z"</code>, but the internal
structure of the expression suggests something different!  It would be nice for
the string representation instead to be <code>"x * (y + z)"</code>, to better align with the
actual structure represented by the expression.</p>
<p>To address this, we add rules for parenthesization as follows, where <code>B</code> is the <code>BinOp</code>
instance whose string representation we are finding<a class="anchor" name="catsoop_footnote_ref_1"></a><a href="https://6009.cat-soop.org/fall18/labs/lab7#catsoop_footnote_1"><sup>1</sup></a>:</p>
<ul>
<li>If <code>B.left</code> and/or <code>B.right</code>
  themselves represent expressions with lower precedence than <code>B</code>, wrap their string
  representations in parentheses (here, precedence is defined using the
  standard
  "<a href="https://en.wikipedia.org/wiki/Order_of_operations#Mnemonics)" target="_blank">PEMDAS</a>"
  ordering).</li>
<li>As a special case, if <code>B</code> represents a subtraction or a division and <code>B.right</code>
  represents an expression with <em>the same precedence</em> as <code>B</code>, wrap <code>B.right</code>'s string
  representation in parentheses.</li>
</ul>
<p>Individual numbers or variables should never be wrapped in parentheses.</p>
<p></p><div class="question"><b>Check Yourself:</b><p>
Think about the rules for parenthesization described above in terms of algebraic expressions, and
work through parenthesizing some example expressions by hand to get a feel for
how these rules work.  Do these rules seem to work in a general sense -- will they
always work across
different operations, and across different levels of expression complexity?  Why do
they work?  Why are subtraction and division treated differently from addition
and multiplication?
</p><p><span id="queue_checkyourself_4"></span></p></div><p></p>
<p>Note that information about concrete syntax (including parenthesization) should
not be explicitly stored in any of your instances; grouping should be reflected
in the structure of your objects and the connections between them.</p>
<a class="anchor" name="catsoop_section_8"></a><h2>8) Derivatives</h2>
<p>Next, we'll make the computer do our 18.01 homework for us.  Well, not quite.
But we'll implement support for symbolic differentiation.  In particular, we
would like to implement the following rules for partial derivatives (where <span class=""><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.43056em; vertical-align: 0em;"></span><span class="mord mathdefault">x</span></span></span></span></span>
is an arbitrary variable, <span class=""><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>c</mi></mrow><annotation encoding="application/x-tex">c</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.43056em; vertical-align: 0em;"></span><span class="mord mathdefault">c</span></span></span></span></span> is a constant or a variable other than <span class=""><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.43056em; vertical-align: 0em;"></span><span class="mord mathdefault">x</span></span></span></span></span>, and
<span class=""><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>u</mi></mrow><annotation encoding="application/x-tex">u</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.43056em; vertical-align: 0em;"></span><span class="mord mathdefault">u</span></span></span></span></span> and <span class=""><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>v</mi></mrow><annotation encoding="application/x-tex">v</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.43056em; vertical-align: 0em;"></span><span class="mord mathdefault" style="margin-right: 0.03588em;">v</span></span></span></span></span> are arbitrary expressions):</p>
<p></p><div class="cs_displaymath" style="text-align:center;padding-bottom:10px;"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mfrac><mi mathvariant="normal">∂</mi><mrow><mi mathvariant="normal">∂</mi><mi>x</mi></mrow></mfrac><mi>c</mi><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">\frac{\partial}{\partial x}c = 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 2.05744em; vertical-align: -0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.37144em;"><span class="" style="top: -2.314em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord" style="margin-right: 0.05556em;">∂</span><span class="mord mathdefault">x</span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.677em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord" style="margin-right: 0.05556em;">∂</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.686em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mord mathdefault">c</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.64444em; vertical-align: 0em;"></span><span class="mord">0</span></span></span></span></span></div><p></p>
<p></p><div class="cs_displaymath" style="text-align:center;padding-bottom:10px;"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mfrac><mi mathvariant="normal">∂</mi><mrow><mi mathvariant="normal">∂</mi><mi>x</mi></mrow></mfrac><mi>x</mi><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">\frac{\partial}{\partial x}x = 1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 2.05744em; vertical-align: -0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.37144em;"><span class="" style="top: -2.314em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord" style="margin-right: 0.05556em;">∂</span><span class="mord mathdefault">x</span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.677em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord" style="margin-right: 0.05556em;">∂</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.686em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mord mathdefault">x</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.64444em; vertical-align: 0em;"></span><span class="mord">1</span></span></span></span></span></div><p></p>
<p></p><div class="cs_displaymath" style="text-align:center;padding-bottom:10px;"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mfrac><mi mathvariant="normal">∂</mi><mrow><mi mathvariant="normal">∂</mi><mi>x</mi></mrow></mfrac><mrow><mo fence="true">(</mo><mi>u</mi><mo>+</mo><mi>v</mi><mo fence="true">)</mo></mrow><mo>=</mo><mfrac><mi mathvariant="normal">∂</mi><mrow><mi mathvariant="normal">∂</mi><mi>x</mi></mrow></mfrac><mi>u</mi><mo>+</mo><mfrac><mi mathvariant="normal">∂</mi><mrow><mi mathvariant="normal">∂</mi><mi>x</mi></mrow></mfrac><mi>v</mi></mrow><annotation encoding="application/x-tex">\frac{\partial}{\partial x}\left(u + v\right) = \frac{\partial}{\partial x}u + \frac{\partial}{\partial x}v</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 2.05744em; vertical-align: -0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.37144em;"><span class="" style="top: -2.314em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord" style="margin-right: 0.05556em;">∂</span><span class="mord mathdefault">x</span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.677em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord" style="margin-right: 0.05556em;">∂</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.686em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="minner"><span class="mopen delimcenter" style="top: 0em;">(</span><span class="mord mathdefault">u</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mord mathdefault" style="margin-right: 0.03588em;">v</span><span class="mclose delimcenter" style="top: 0em;">)</span></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 2.05744em; vertical-align: -0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.37144em;"><span class="" style="top: -2.314em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord" style="margin-right: 0.05556em;">∂</span><span class="mord mathdefault">x</span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.677em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord" style="margin-right: 0.05556em;">∂</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.686em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mord mathdefault">u</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 2.05744em; vertical-align: -0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.37144em;"><span class="" style="top: -2.314em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord" style="margin-right: 0.05556em;">∂</span><span class="mord mathdefault">x</span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.677em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord" style="margin-right: 0.05556em;">∂</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.686em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mord mathdefault" style="margin-right: 0.03588em;">v</span></span></span></span></span></div><p></p>
<p></p><div class="cs_displaymath" style="text-align:center;padding-bottom:10px;"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mfrac><mi mathvariant="normal">∂</mi><mrow><mi mathvariant="normal">∂</mi><mi>x</mi></mrow></mfrac><mrow><mo fence="true">(</mo><mi>u</mi><mo>⋅</mo><mi>v</mi><mo fence="true">)</mo></mrow><mo>=</mo><mi>u</mi><mrow><mo fence="true">(</mo><mfrac><mi mathvariant="normal">∂</mi><mrow><mi mathvariant="normal">∂</mi><mi>x</mi></mrow></mfrac><mi>v</mi><mo fence="true">)</mo></mrow><mo>+</mo><mi>v</mi><mrow><mo fence="true">(</mo><mfrac><mi mathvariant="normal">∂</mi><mrow><mi mathvariant="normal">∂</mi><mi>x</mi></mrow></mfrac><mi>u</mi><mo fence="true">)</mo></mrow></mrow><annotation encoding="application/x-tex">\frac{\partial}{\partial x}\left(u\cdot v\right) = u\left(\frac{\partial}{\partial x}v\right) + v\left(\frac{\partial}{\partial x}u\right)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 2.05744em; vertical-align: -0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.37144em;"><span class="" style="top: -2.314em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord" style="margin-right: 0.05556em;">∂</span><span class="mord mathdefault">x</span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.677em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord" style="margin-right: 0.05556em;">∂</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.686em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="minner"><span class="mopen delimcenter" style="top: 0em;">(</span><span class="mord mathdefault">u</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mord mathdefault" style="margin-right: 0.03588em;">v</span><span class="mclose delimcenter" style="top: 0em;">)</span></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 2.40003em; vertical-align: -0.95003em;"></span><span class="mord mathdefault">u</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="minner"><span class="mopen delimcenter" style="top: 0em;"><span class="delimsizing size3">(</span></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.37144em;"><span class="" style="top: -2.314em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord" style="margin-right: 0.05556em;">∂</span><span class="mord mathdefault">x</span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.677em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord" style="margin-right: 0.05556em;">∂</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.686em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mord mathdefault" style="margin-right: 0.03588em;">v</span><span class="mclose delimcenter" style="top: 0em;"><span class="delimsizing size3">)</span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 2.40003em; vertical-align: -0.95003em;"></span><span class="mord mathdefault" style="margin-right: 0.03588em;">v</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="minner"><span class="mopen delimcenter" style="top: 0em;"><span class="delimsizing size3">(</span></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.37144em;"><span class="" style="top: -2.314em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord" style="margin-right: 0.05556em;">∂</span><span class="mord mathdefault">x</span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.677em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord" style="margin-right: 0.05556em;">∂</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.686em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mord mathdefault">u</span><span class="mclose delimcenter" style="top: 0em;"><span class="delimsizing size3">)</span></span></span></span></span></span></span></div><p></p>
<p></p><div class="cs_displaymath" style="text-align:center;padding-bottom:10px;"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mfrac><mi mathvariant="normal">∂</mi><mrow><mi mathvariant="normal">∂</mi><mi>x</mi></mrow></mfrac><mrow><mo fence="true">(</mo><mfrac><mi>u</mi><mi>v</mi></mfrac><mo fence="true">)</mo></mrow><mo>=</mo><mfrac><mrow><mi>v</mi><mrow><mo fence="true">(</mo><mfrac><mi mathvariant="normal">∂</mi><mrow><mi mathvariant="normal">∂</mi><mi>x</mi></mrow></mfrac><mi>u</mi><mo fence="true">)</mo></mrow><mo>−</mo><mi>u</mi><mrow><mo fence="true">(</mo><mfrac><mi mathvariant="normal">∂</mi><mrow><mi mathvariant="normal">∂</mi><mi>x</mi></mrow></mfrac><mi>v</mi><mo fence="true">)</mo></mrow></mrow><msup><mi>v</mi><mn>2</mn></msup></mfrac></mrow><annotation encoding="application/x-tex">\frac{\partial}{\partial x}\left(\frac{u}{v}\right) = \frac{v\left(\frac{\partial}{\partial x}u\right) - u\left(\frac{\partial}{\partial x}v\right)}{v^2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 2.05744em; vertical-align: -0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.37144em;"><span class="" style="top: -2.314em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord" style="margin-right: 0.05556em;">∂</span><span class="mord mathdefault">x</span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.677em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord" style="margin-right: 0.05556em;">∂</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.686em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="minner"><span class="mopen delimcenter" style="top: 0em;"><span class="delimsizing size2">(</span></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.10756em;"><span class="" style="top: -2.314em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.03588em;">v</span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.677em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord mathdefault">u</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.686em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose delimcenter" style="top: 0em;"><span class="delimsizing size2">)</span></span></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 2.30612em; vertical-align: -0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.62012em;"><span class="" style="top: -2.314em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right: 0.03588em;">v</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.740108em;"><span class="" style="top: -2.989em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.74001em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.03588em;">v</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="minner"><span class="mopen delimcenter" style="top: 0em;"><span class="delimsizing size1">(</span></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.880108em;"><span class="" style="top: -2.655em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight" style="margin-right: 0.05556em;">∂</span><span class="mord mathdefault mtight">x</span></span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.394em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight" style="margin-right: 0.05556em;">∂</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.345em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mord mathdefault">u</span><span class="mclose delimcenter" style="top: 0em;"><span class="delimsizing size1">)</span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mord mathdefault">u</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="minner"><span class="mopen delimcenter" style="top: 0em;"><span class="delimsizing size1">(</span></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.880108em;"><span class="" style="top: -2.655em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight" style="margin-right: 0.05556em;">∂</span><span class="mord mathdefault mtight">x</span></span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.394em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight" style="margin-right: 0.05556em;">∂</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.345em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mord mathdefault" style="margin-right: 0.03588em;">v</span><span class="mclose delimcenter" style="top: 0em;"><span class="delimsizing size1">)</span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.686em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></div><p></p>
<p>Even though it may not be obvious from looking at first glance, these
mathematical definitions are recursive! That is to say, partial derivatives of
compound expressions are defined in terms of partial derivatives of component
parts.</p>
<p>Implement differentiation by adding a method called <code>deriv</code> to your classes.
This method should take a single argument (a string containing the name of the
variable with respect to which we are differentiating), and it should return a
symbolic expression representing the result of the differentiation.  For example:</p>
<pre><code class="py hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span>x = Var(<span class="hljs-string">'x'</span>)
<span class="hljs-meta">&gt;&gt;&gt; </span>y = Var(<span class="hljs-string">'y'</span>)
<span class="hljs-meta">&gt;&gt;&gt; </span>z = <span class="hljs-number">2</span>*x - x*y + <span class="hljs-number">3</span>*y
<span class="hljs-meta">&gt;&gt;&gt; </span>print(z.deriv(<span class="hljs-string">'x'</span>))  <span class="hljs-comment"># unsimplified, but the following gives us (2 - y)</span>
<span class="hljs-number">2</span> * <span class="hljs-number">1</span> + x * <span class="hljs-number">0</span> - (x * <span class="hljs-number">0</span> + y * <span class="hljs-number">1</span>) + <span class="hljs-number">3</span> * <span class="hljs-number">0</span> + y * <span class="hljs-number">0</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>print(z.deriv(<span class="hljs-string">'y'</span>))  <span class="hljs-comment"># unsimplified, but the following gives us (-x + 3)</span>
<span class="hljs-number">2</span> * <span class="hljs-number">0</span> + x * <span class="hljs-number">0</span> - (x * <span class="hljs-number">1</span> + y * <span class="hljs-number">0</span>) + <span class="hljs-number">3</span> * <span class="hljs-number">1</span> + y * <span class="hljs-number">0</span>
</code></pre>
<a class="anchor" name="catsoop_section_9"></a><h2>9) Simplification</h2>
<p>The above code works, but it leads to output that is not very readable (it is
very difficult to see, for example, that the above examples correspond to <span class=""><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>2</mn><mo>−</mo><mi>y</mi></mrow><annotation encoding="application/x-tex">2-y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.72777em; vertical-align: -0.08333em;"></span><span class="mord">2</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.625em; vertical-align: -0.19444em;"></span><span class="mord mathdefault" style="margin-right: 0.03588em;">y</span></span></span></span></span>
and <span class=""><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>−</mo><mi>x</mi><mo>+</mo><mn>3</mn></mrow><annotation encoding="application/x-tex">-x+3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.66666em; vertical-align: -0.08333em;"></span><span class="mord">−</span><span class="mord mathdefault">x</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.64444em; vertical-align: 0em;"></span><span class="mord">3</span></span></span></span></span>, respectively).  To help with this, implement a method called
<code>simplify</code> to your class(es).  <code>simplify</code> should take no arguments, and it
should return a simplified form of the expression, according to the following
rules:</p>
<ul>
<li>Any binary operation on two numbers should simplify to a single number containing the result.</li>
<li>Adding <span class=""><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>0</mn></mrow><annotation encoding="application/x-tex">0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.64444em; vertical-align: 0em;"></span><span class="mord">0</span></span></span></span></span> to (or subtracting <span class=""><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>0</mn></mrow><annotation encoding="application/x-tex">0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.64444em; vertical-align: 0em;"></span><span class="mord">0</span></span></span></span></span> from) any expression <span class=""><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>E</mi></mrow><annotation encoding="application/x-tex">E</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathdefault" style="margin-right: 0.05764em;">E</span></span></span></span></span> should simplify to <span class=""><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>E</mi></mrow><annotation encoding="application/x-tex">E</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathdefault" style="margin-right: 0.05764em;">E</span></span></span></span></span>.</li>
<li>Multiplying or dividing any expression <span class=""><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>E</mi></mrow><annotation encoding="application/x-tex">E</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathdefault" style="margin-right: 0.05764em;">E</span></span></span></span></span> by <span class=""><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.64444em; vertical-align: 0em;"></span><span class="mord">1</span></span></span></span></span> should simplify to <span class=""><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>E</mi></mrow><annotation encoding="application/x-tex">E</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathdefault" style="margin-right: 0.05764em;">E</span></span></span></span></span>.</li>
<li>Multiplying any expression <span class=""><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>E</mi></mrow><annotation encoding="application/x-tex">E</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathdefault" style="margin-right: 0.05764em;">E</span></span></span></span></span> by <span class=""><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>0</mn></mrow><annotation encoding="application/x-tex">0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.64444em; vertical-align: 0em;"></span><span class="mord">0</span></span></span></span></span> should simplify to <span class=""><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>0</mn></mrow><annotation encoding="application/x-tex">0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.64444em; vertical-align: 0em;"></span><span class="mord">0</span></span></span></span></span>.</li>
<li>Dividing <span class=""><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>0</mn></mrow><annotation encoding="application/x-tex">0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.64444em; vertical-align: 0em;"></span><span class="mord">0</span></span></span></span></span> by any expression <span class=""><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>E</mi></mrow><annotation encoding="application/x-tex">E</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathdefault" style="margin-right: 0.05764em;">E</span></span></span></span></span> should simplify to <span class=""><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>0</mn></mrow><annotation encoding="application/x-tex">0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.64444em; vertical-align: 0em;"></span><span class="mord">0</span></span></span></span></span>.</li>
<li>A single number or variable always simplifies to itself.</li>
</ul>
<p></p><div class="question"><b>Check Yourself:</b><p>
Think about the simplification rules described above in terms of algebraic expressions, and
work through simplifying some example expressions by hand to get a feel for how
these rules work.  Do these rules seem to work in a general sense -- will they always
work across our different operations, and across different levels of expression complexity,
producing sensible simplifications?
Why?
</p><p><span id="queue_checkyourself_5"></span></p></div><p></p>
<p>Within <code>simplify</code>, you are welcome to use <code>isinstance</code> or <code>type</code> to check the
type of subexpressions.</p>
<p>Your simplification method does not need to handle cases like <span class=""><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>3</mn><mo>+</mo><mo>(</mo><mi>x</mi><mo>+</mo><mn>2</mn><mo>)</mo></mrow><annotation encoding="application/x-tex">3 + (x + 2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.72777em; vertical-align: -0.08333em;"></span><span class="mord">3</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord">2</span><span class="mclose">)</span></span></span></span></span>,
where the terms that could be combined are separated from each other in the
tree.</p>
<p>For example, continuing from above:</p>
<pre><code class="py hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span>z = <span class="hljs-number">2</span>*x - x*y + <span class="hljs-number">3</span>*y
<span class="hljs-meta">&gt;&gt;&gt; </span>print(z.simplify())
<span class="hljs-number">2</span> * x - x * y + <span class="hljs-number">3</span> * y
<span class="hljs-meta">&gt;&gt;&gt; </span>print(z.deriv(<span class="hljs-string">'x'</span>))
<span class="hljs-number">2</span> * <span class="hljs-number">1</span> + x * <span class="hljs-number">0</span> - (x * <span class="hljs-number">0</span> + y * <span class="hljs-number">1</span>) + <span class="hljs-number">3</span> * <span class="hljs-number">0</span> + y * <span class="hljs-number">0</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>print(z.deriv(<span class="hljs-string">'x'</span>).simplify())
<span class="hljs-number">2</span> - y
<span class="hljs-meta">&gt;&gt;&gt; </span>print(z.deriv(<span class="hljs-string">'y'</span>))
<span class="hljs-number">2</span> * <span class="hljs-number">0</span> + x * <span class="hljs-number">0</span> - (x * <span class="hljs-number">1</span> + y * <span class="hljs-number">0</span>) + <span class="hljs-number">3</span> * <span class="hljs-number">1</span> + y * <span class="hljs-number">0</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>print(z.deriv(<span class="hljs-string">'y'</span>).simplify())
<span class="hljs-number">0</span> - x + <span class="hljs-number">3</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>Add(Add(Num(<span class="hljs-number">2</span>), Num(<span class="hljs-number">-2</span>)), Add(Var(<span class="hljs-string">'x'</span>), Num(<span class="hljs-number">0</span>))).simplify()
Var(<span class="hljs-string">'x'</span>)
</code></pre>
<a class="anchor" name="catsoop_section_10"></a><h2>10) Evaluation</h2>
<p>Next, we'll add support for evaluating expressions for particular values of
variables.  Add method(s) to your class(es) such that, for any symbolic
expression <code>sym</code>, <code>sym.eval(mapping)</code> will find a numerical value for the given
expression.  <code>mapping</code> should be a dictionary mapping variable names to values.
For example:</p>
<pre><code class="py hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span>z = Add(Var(<span class="hljs-string">'x'</span>), Sub(Var(<span class="hljs-string">'y'</span>), Mul(Var(<span class="hljs-string">'z'</span>), Num(<span class="hljs-number">2</span>))))
<span class="hljs-meta">&gt;&gt;&gt; </span>z.<span class="hljs-built_in">eval</span>({<span class="hljs-string">'x'</span>: <span class="hljs-number">7</span>, <span class="hljs-string">'y'</span>: <span class="hljs-number">3</span>, <span class="hljs-string">'z'</span>: <span class="hljs-number">9</span>})
<span class="hljs-number">-8</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>z.<span class="hljs-built_in">eval</span>({<span class="hljs-string">'x'</span>: <span class="hljs-number">3</span>, <span class="hljs-string">'y'</span>: <span class="hljs-number">10</span>, <span class="hljs-string">'z'</span>: <span class="hljs-number">2</span>})
<span class="hljs-number">9</span>
</code></pre>
<p>In the test cases we'll run, the given dictionary will always contain all of
the bindings needed to fully evaluate the expression.  What should your code do
in the case where the expression contains a variable not present in the given
<code>mapping</code> dictionary?</p>
<a class="anchor" name="catsoop_section_11"></a><h2>11) Parsing Symbolic Expressions</h2>
<p>Finally, we would like to support parsing strings into symbolic expressions (to
provide yet another means of input).  For example, we would like to do
something like:</p>
<pre><code class="py hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span>sym(<span class="hljs-string">'(x * (2 + 3))'</span>)
Mul(Var(<span class="hljs-string">'x'</span>), Add(Num(<span class="hljs-number">2</span>), Num(<span class="hljs-number">3</span>)))
</code></pre>
<p>Define a stand-alone function called <code>sym</code>, which takes a single string as input.  This string should contain either:</p>
<ul>
<li>a single variable name,</li>
<li>a single number, or</li>
<li>a fully-parenthesized expression of the form <code>(E1 op E2)</code>, representing a binary operation (where <code>E1</code> and <code>E2</code> are themselves strings representing expressions, and <code>op</code> is one of <code>+</code>, <code>-</code>, <code>*</code>, or <code>/</code>).</li>
</ul>
<p>You may assume that the string is always well-formed and fully parenthesized
(you do not need to handle erroneous input), but it should work for arbitrarily
deep nesting of expressions.</p>
<p>This process is often broken down into two pieces: <em>tokenizing</em> (to break the input string into meaningful units) and <em>parsing</em> (to build our internal representation from those units).</p>
<p><a class="anchor" name="catsoop_section_11_1"></a></p><h3>11.1) Tokenizing</h3><p></p>
<p>A good helper function to write is <code>tokenize</code>, which should take a string as
described above as input and should output a list of meaningful <em>tokens</em>
(parentheses, variable names, numbers, or operands).</p>
<p>For our purposes, you may assume that variables are always single-character
alphabetic characters, that all numbers are integers, and you may also assume
that there are spaces separating operands and operators.</p>
<p>As an example:</p>
<pre><code class="py hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span>tokenize(<span class="hljs-string">"(x * (2 + 3))"</span>)
[<span class="hljs-string">'('</span>, <span class="hljs-string">'x'</span>, <span class="hljs-string">'*'</span>, <span class="hljs-string">'('</span>, <span class="hljs-string">'2'</span>, <span class="hljs-string">'+'</span>, <span class="hljs-string">'3'</span>, <span class="hljs-string">')'</span>, <span class="hljs-string">')'</span>]
</code></pre>
<p>Note that your code should also be able to handle numbers with more than one
digit, and negative numbers!  A number like -200, for example, should be
represented by a single token <code>'-200'</code>.</p>
<p><a class="anchor" name="catsoop_section_11_2"></a></p><h3>11.2) Parsing</h3><p></p>
<p>Another helper function, <code>parse</code>, could take the output of <code>tokenize</code> and
convert it into an appropriate instance of <code>Symbol</code> (or some subclass thereof).
For example:</p>
<pre><code class="py hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span>tokens = tokenize(<span class="hljs-string">"(x * (2 + 3))"</span>)
<span class="hljs-meta">&gt;&gt;&gt; </span>parse(tokens)
Mul(Var(<span class="hljs-string">'x'</span>), Add(Num(<span class="hljs-number">2</span>), Num(<span class="hljs-number">3</span>)))
</code></pre>
<p>Our "little language" for representing symbolic expressions can be parsed using
a <em>recursive descent</em> parser.  One way to structure <code>parse</code> is as follows:</p>
<pre><code class="py hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">parse</span><span class="hljs-params">(tokens)</span>:</span>
   <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">parse_expression</span><span class="hljs-params">(index)</span>:</span>
       <span class="hljs-keyword">pass</span>  <span class="hljs-comment"># your code here</span>
   parsed_expression, next_index = parse_expression(<span class="hljs-number">0</span>)
   <span class="hljs-keyword">return</span> parsed_expression
</code></pre>
<p>The function <code>parse_expression</code> is a recursive function that takes as argument an integer into the <code>tokens</code> list and returns a pair of values:</p>
<ul>
<li>the expression found starting at the location given by <code>index</code> (an instance of one of the <code>Symbol</code> subclasses), and</li>
<li>the index beyond where this expression ends (i.e., if the expression ends at the token with index <code>6</code> in the <code>tokens</code> list, then the returned value should be <code>7</code>.</li>
</ul>
<p>In the definition of this procedure, we make sure that we call it with the value <code>index</code> corresponding to the start of an expression.  So, we need to handle three cases.  Let <code>token</code> be the token at location <code>index</code>; the cases are:</p>
<ul>
<li>
<p><strong>Number</strong>: If <code>token</code> represents an integer, then make a corresponding <code>Num</code> instance and return that, paired with <code>index + 1</code> (since a number is represented by a single token).</p>
</li>
<li>
<p><strong>Variable</strong>: If <code>token</code> represents a variable name (a single alphabetic character), then make a corresponding <code>Var</code> instance and return that, paired with <code>index + 1</code> (since a variable is represented by a single token).</p>
</li>
<li>
<p><strong>Operation</strong>: Otherwise, the sequence of tokens starting at <code>index</code> must be of the form: <code>(E1 op E2)</code>.  Therefore, <code>token</code> must be <code>(</code>.  In this case, we need to recursively parse the two subexpressions, combine them into an appropriate instance of a subclass of <code>BinOp</code> (determined by <code>op</code>), and return that instance, along with the index of the token beyond the final right parenthesis.</p>
</li>
</ul>
<p>Implement the <code>sym</code> function in your code (possibly using the helper functions
described above).  <strong>Your implementation of the function <code>sym</code> should not use
Python's built-in <code>eval</code>, <code>exec</code>, <code>type</code>, or <code>isinstance</code> functions.</strong></p>
<a class="anchor" name="catsoop_section_12"></a><h2>12) Code Submission</h2>
<p>
<!--START question code -->
</p><div class="question question-lab009" id="cs_qdiv_code" style="position: static">
<div id="code_rendered_question">
<input id="code" name="code" style="display: none" type="file"><button class="btn btn-catsoop" id="code_select_button">Select File</button>&nbsp;<tt><span id="code_selected_file">No file selected</span></tt>
<script type="text/javascript">
document.getElementById('code').value = '';
document.getElementById('code_select_button').addEventListener('click', function (){
    document.getElementById("code").click();
});
document.getElementById('code').addEventListener('change', function (){
    document.getElementById('code_selected_file').innerText = document.getElementById('code').value;
});
</script>
</div><div>
<span id="code_buttons"></span>
<span id="code_loading_wrapper">
<span id="code_loading" style="display:none;"><img src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="></span>
</span>
<span id="code_score_display"></span>
<div class="nsubmits_left" id="code_nsubmits_left"></div></div>
<div id="code_solution_container">
<div id="code_solution">
</div>
<div id="code_solution_explanation">
</div>
</div>
<div id="code_message"></div>
<span style="font-size: small; color: #888; font-weight: bold;">This question is due on Friday November 02, 2018 at 04:00:00 PM.</span></div>
<!--END question code -->
<p></p>
<style>
.impsolution{display:none;}
</style>
<a class="anchor" name="catsoop_section_13"></a><h2>13) Checkoff</h2>
<p>Once you are finished with the code, please come to a tutorial, lab session, or
office hour and add yourself to the queue asking for a checkoff.  <strong>You must be
ready to discuss your code and test cases in detail before asking for a checkoff.</strong></p>
<p>You should be prepared to demonstrate your code (which should be
well-commented, should avoid repetition, and should make good use of helper
functions).  In particular, be prepared to discuss:</p>
<ul>
<li>Your implementation of parenthesization, including using inheritance to avoid repetitious code.</li>
<li>Your implementation of <code>deriv</code>, including using inheritance to avoid repetitious code.</li>
<li>Your implementation of <code>simplify</code>, including using inheritance to avoid repetitious code.</li>
<li>Your implementation of <code>eval</code>, including using inheritance to avoid repetitious code.</li>
<li>Your implementation of <code>sym</code>.</li>
<li>A demonstration of using your code to simulate some symbolic algebra problems of your own choosing.</li>
<li>A brief explanation of the rules for parenthesization and simplification, and why those rules work.</li>
</ul>
<p><a class="anchor" name="catsoop_section_13_1"></a></p><h3>13.1) Grade</h3>
<div class="response"><i>You have not yet received this checkoff.  When you have completed this checkoff, you will see a grade here.</i></div><p></p>
<script src="./lab_7_files/cs_ajax.js.Без названия" type="text/javascript"></script>
<script type="text/javascript">
catsoop.all_questions = ['code'];
catsoop.username = null;
catsoop.api_token = null;
catsoop.this_path = 'https://6009.cat-soop.org/fall18/labs/lab7';
catsoop.path_info = ['fall18', 'labs', 'lab7'];
catsoop.course = 'fall18';
catsoop.url_root = 'https://6009.cat-soop.org';
catsoop.imp = '';
catsoop.skip_alert = [];
catsoop.viewans_confirm = "Are you sure?  Viewing the answer will prevent any further submissions to this question.  Press 'OK' to view the answer, or press 'Cancel' if you have changed your mind.";
</script>
<br>&nbsp;<hr><b name="cs_footnotes">Footnotes</b><p><a class="anchor" name="catsoop_footnote_1"></a><sup style="padding-right:0.25em;color:var(--cs-base-bg-color);">1</sup>Note that these
rules should be sufficient for the four operations we have implemented.  If we
wanted to add additional operations, we may need to reconsider these
rules <a href="https://6009.cat-soop.org/fall18/labs/lab7#catsoop_footnote_ref_1"><span class="noprint">(click to return to text)</span></a></p>
</div>
<div class="cs_right_menu"></div>
</main>
<footer>
<pre class="catsooplogo" style="font-size:50%;">\            
/    /\__/\  
\__=(  o_O )=
(__________) 
 |_ |_ |_ |_ </pre>
      Powered by <a href="https://catsoop.mit.edu/" target="_blank">CAT-SOOP</a> (development version, v13.0.0+).<br>
      CAT-SOOP is <a href="http://www.fsf.org/about/what-is-free-software" target="_blank">free/libre software</a>, available under the terms<br>of the <a href="https://6009.cat-soop.org/_util/license" target="_blank">GNU Affero General Public License, version 3</a>.<br>
<a download="" href="https://6009.cat-soop.org/_util/source.zip?course=fall18" target="_blank">Download Source Code</a><br>
<a href="https://6009.cat-soop.org/_util/jslicense.html" rel="jslicense" target="_blank">Javascript License Information</a>
</footer>



</body></html>