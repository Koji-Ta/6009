<!DOCTYPE html>
<!-- saved from url=(0042)https://6009.cat-soop.org/fall18/labs/lab9 -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<!-- This page was generated by CAT-SOOP (development version, v13.0.0+).  miau. -->

<title>6.009 Fall 2018</title>
<link href="./lab_9_files/logo.gif" rel="icon" type="image/gif">
<!-- include catsoop base css -->
<link href="./lab_9_files/base.css" rel="stylesheet" type="text/css">
<!-- librejs compatibility -->
<script>
    /*
    @licstart  The following is the entire license notice for the JavaScript
    code in this page.

    The Javascript on this page is part of CAT-SOOP
    Copyright (C) 2011-2018 Adam Hartz <hz@mit.edu>

    The Javascript code on this page is free software: you can redistribute it
    and/or modify it under the terms of the GNU Affero General Public License
    as published by the Free Software Foundation, either version 3 of the
    License, or (at your option) any later version.  This code is distributed
    WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY
    or FITNESS FOR A PARTICULAR PURPOSE.  See the full text of the license for
    more details (https://www.gnu.org/licenses/agpl-3.0.en.html).

    As additional permission under GNU AGPL version 3 section 7, you may
    distribute non-source (e.g., minimized or compacted) forms of that code
    without the copy of the GNU AGPL normally required by section 4, provided
    you include this license notice and a URL through which recipients can
    access the Corresponding Source.

    @licend  The above is the entire license notice for the JavaScript code in
    this page.
    */
    </script>
<!-- set up JS namespace for catsoop -->
<script type="text/javascript">
    var catsoop = {plugins: {}};

    function toggleResponsiveHeader(){
        document.getElementsByTagName('header')[0].classList.toggle('responsive');
    }

    document.addEventListener('DOMContentLoaded', function(){
        var menu_boxes = document.getElementsByClassName('dropdown-checkbox');
        for(var i=0; i<menu_boxes.length; i++){
            menu_boxes[i].checked = false;
        }
    });
    </script>
<!-- load in katex and mathjax, and CAT-SOOP-specific math rendering  -->
<script src="./lab_9_files/katex.min.js.Без названия" type="text/javascript"></script>
<link href="./lab_9_files/katex.min.css" rel="stylesheet" type="text/css">
<script src="./lab_9_files/MathJax.js.Без названия" type="text/javascript"></script>
<script src="./lab_9_files/cs_math.js.Без названия" type="text/javascript"></script>
<!-- Syntax Highlighting -->
<script src="./lab_9_files/cs_highlight.pack.min.js.Без названия" type="text/javascript"></script>
<script type="text/javascript">
      hljs.initHighlightingOnLoad();
    </script>
<style>
      :root {
        --cs-base-bg-color: #039bba;
        --cs-light-bg-color: #33cded;
        --cs-base-font-color: #fff;
        --cs-light-font-color: #000;
    }
    </style>
<!--JS for questions-->
<script src="./lab_9_files/ace.js.Без названия" type="text/javascript"></script><style id="ace_editor.css">.ace_editor {position: relative;overflow: hidden;font: 12px/normal 'Monaco', 'Menlo', 'Ubuntu Mono', 'Consolas', 'source-code-pro', monospace;direction: ltr;text-align: left;}.ace_scroller {position: absolute;overflow: hidden;top: 0;bottom: 0;background-color: inherit;-ms-user-select: none;-moz-user-select: none;-webkit-user-select: none;user-select: none;cursor: text;}.ace_content {position: absolute;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;min-width: 100%;}.ace_dragging .ace_scroller:before{position: absolute;top: 0;left: 0;right: 0;bottom: 0;content: '';background: rgba(250, 250, 250, 0.01);z-index: 1000;}.ace_dragging.ace_dark .ace_scroller:before{background: rgba(0, 0, 0, 0.01);}.ace_selecting, .ace_selecting * {cursor: text !important;}.ace_gutter {position: absolute;overflow : hidden;width: auto;top: 0;bottom: 0;left: 0;cursor: default;z-index: 4;-ms-user-select: none;-moz-user-select: none;-webkit-user-select: none;user-select: none;}.ace_gutter-active-line {position: absolute;left: 0;right: 0;}.ace_scroller.ace_scroll-left {box-shadow: 17px 0 16px -16px rgba(0, 0, 0, 0.4) inset;}.ace_gutter-cell {padding-left: 19px;padding-right: 6px;background-repeat: no-repeat;}.ace_gutter-cell.ace_error {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAABOFBMVEX/////////QRswFAb/Ui4wFAYwFAYwFAaWGAfDRymzOSH/PxswFAb/SiUwFAYwFAbUPRvjQiDllog5HhHdRybsTi3/Tyv9Tir+Syj/UC3////XurebMBIwFAb/RSHbPx/gUzfdwL3kzMivKBAwFAbbvbnhPx66NhowFAYwFAaZJg8wFAaxKBDZurf/RB6mMxb/SCMwFAYwFAbxQB3+RB4wFAb/Qhy4Oh+4QifbNRcwFAYwFAYwFAb/QRzdNhgwFAYwFAbav7v/Uy7oaE68MBK5LxLewr/r2NXewLswFAaxJw4wFAbkPRy2PyYwFAaxKhLm1tMwFAazPiQwFAaUGAb/QBrfOx3bvrv/VC/maE4wFAbRPBq6MRO8Qynew8Dp2tjfwb0wFAbx6eju5+by6uns4uH9/f36+vr/GkHjAAAAYnRSTlMAGt+64rnWu/bo8eAA4InH3+DwoN7j4eLi4xP99Nfg4+b+/u9B/eDs1MD1mO7+4PHg2MXa347g7vDizMLN4eG+Pv7i5evs/v79yu7S3/DV7/498Yv24eH+4ufQ3Ozu/v7+y13sRqwAAADLSURBVHjaZc/XDsFgGIBhtDrshlitmk2IrbHFqL2pvXf/+78DPokj7+Fz9qpU/9UXJIlhmPaTaQ6QPaz0mm+5gwkgovcV6GZzd5JtCQwgsxoHOvJO15kleRLAnMgHFIESUEPmawB9ngmelTtipwwfASilxOLyiV5UVUyVAfbG0cCPHig+GBkzAENHS0AstVF6bacZIOzgLmxsHbt2OecNgJC83JERmePUYq8ARGkJx6XtFsdddBQgZE2nPR6CICZhawjA4Fb/chv+399kfR+MMMDGOQAAAABJRU5ErkJggg==");background-repeat: no-repeat;background-position: 2px center;}.ace_gutter-cell.ace_warning {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAmVBMVEX///8AAAD///8AAAAAAABPSzb/5sAAAAB/blH/73z/ulkAAAAAAAD85pkAAAAAAAACAgP/vGz/rkDerGbGrV7/pkQICAf////e0IsAAAD/oED/qTvhrnUAAAD/yHD/njcAAADuv2r/nz//oTj/p064oGf/zHAAAAA9Nir/tFIAAAD/tlTiuWf/tkIAAACynXEAAAAAAAAtIRW7zBpBAAAAM3RSTlMAABR1m7RXO8Ln31Z36zT+neXe5OzooRDfn+TZ4p3h2hTf4t3k3ucyrN1K5+Xaks52Sfs9CXgrAAAAjklEQVR42o3PbQ+CIBQFYEwboPhSYgoYunIqqLn6/z8uYdH8Vmdnu9vz4WwXgN/xTPRD2+sgOcZjsge/whXZgUaYYvT8QnuJaUrjrHUQreGczuEafQCO/SJTufTbroWsPgsllVhq3wJEk2jUSzX3CUEDJC84707djRc5MTAQxoLgupWRwW6UB5fS++NV8AbOZgnsC7BpEAAAAABJRU5ErkJggg==");background-position: 2px center;}.ace_gutter-cell.ace_info {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAAAAAA6mKC9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAJ0Uk5TAAB2k804AAAAPklEQVQY02NgIB68QuO3tiLznjAwpKTgNyDbMegwisCHZUETUZV0ZqOquBpXj2rtnpSJT1AEnnRmL2OgGgAAIKkRQap2htgAAAAASUVORK5CYII=");background-position: 2px center;}.ace_dark .ace_gutter-cell.ace_info {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAJFBMVEUAAAChoaGAgIAqKiq+vr6tra1ZWVmUlJSbm5s8PDxubm56enrdgzg3AAAAAXRSTlMAQObYZgAAAClJREFUeNpjYMAPdsMYHegyJZFQBlsUlMFVCWUYKkAZMxZAGdxlDMQBAG+TBP4B6RyJAAAAAElFTkSuQmCC");}.ace_scrollbar {position: absolute;right: 0;bottom: 0;z-index: 6;}.ace_scrollbar-inner {position: absolute;cursor: text;left: 0;top: 0;}.ace_scrollbar-v{overflow-x: hidden;overflow-y: scroll;top: 0;}.ace_scrollbar-h {overflow-x: scroll;overflow-y: hidden;left: 0;}.ace_print-margin {position: absolute;height: 100%;}.ace_text-input {position: absolute;z-index: 0;width: 0.5em;height: 1em;opacity: 0;background: transparent;-moz-appearance: none;appearance: none;border: none;resize: none;outline: none;overflow: hidden;font: inherit;padding: 0 1px;margin: 0 -1px;text-indent: -1em;-ms-user-select: text;-moz-user-select: text;-webkit-user-select: text;user-select: text;white-space: pre!important;}.ace_text-input.ace_composition {background: inherit;color: inherit;z-index: 1000;opacity: 1;text-indent: 0;}.ace_layer {z-index: 1;position: absolute;overflow: hidden;word-wrap: normal;white-space: pre;height: 100%;width: 100%;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;pointer-events: none;}.ace_gutter-layer {position: relative;width: auto;text-align: right;pointer-events: auto;}.ace_text-layer {font: inherit !important;}.ace_cjk {display: inline-block;text-align: center;}.ace_cursor-layer {z-index: 4;}.ace_cursor {z-index: 4;position: absolute;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;border-left: 2px solid;transform: translatez(0);}.ace_slim-cursors .ace_cursor {border-left-width: 1px;}.ace_overwrite-cursors .ace_cursor {border-left-width: 0;border-bottom: 1px solid;}.ace_hidden-cursors .ace_cursor {opacity: 0.2;}.ace_smooth-blinking .ace_cursor {-webkit-transition: opacity 0.18s;transition: opacity 0.18s;}.ace_editor.ace_multiselect .ace_cursor {border-left-width: 1px;}.ace_marker-layer .ace_step, .ace_marker-layer .ace_stack {position: absolute;z-index: 3;}.ace_marker-layer .ace_selection {position: absolute;z-index: 5;}.ace_marker-layer .ace_bracket {position: absolute;z-index: 6;}.ace_marker-layer .ace_active-line {position: absolute;z-index: 2;}.ace_marker-layer .ace_selected-word {position: absolute;z-index: 4;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;}.ace_line .ace_fold {-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;display: inline-block;height: 11px;margin-top: -2px;vertical-align: middle;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACJJREFUeNpi+P//fxgTAwPDBxDxD078RSX+YeEyDFMCIMAAI3INmXiwf2YAAAAASUVORK5CYII=");background-repeat: no-repeat, repeat-x;background-position: center center, top left;color: transparent;border: 1px solid black;border-radius: 2px;cursor: pointer;pointer-events: auto;}.ace_dark .ace_fold {}.ace_fold:hover{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACBJREFUeNpi+P//fz4TAwPDZxDxD5X4i5fLMEwJgAADAEPVDbjNw87ZAAAAAElFTkSuQmCC");}.ace_tooltip {background-color: #FFF;background-image: -webkit-linear-gradient(top, transparent, rgba(0, 0, 0, 0.1));background-image: linear-gradient(to bottom, transparent, rgba(0, 0, 0, 0.1));border: 1px solid gray;border-radius: 1px;box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);color: black;max-width: 100%;padding: 3px 4px;position: fixed;z-index: 999999;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;cursor: default;white-space: pre;word-wrap: break-word;line-height: normal;font-style: normal;font-weight: normal;letter-spacing: normal;pointer-events: none;}.ace_folding-enabled > .ace_gutter-cell {padding-right: 13px;}.ace_fold-widget {-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;margin: 0 -12px 0 1px;display: none;width: 11px;vertical-align: top;background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42mWKsQ0AMAzC8ixLlrzQjzmBiEjp0A6WwBCSPgKAXoLkqSot7nN3yMwR7pZ32NzpKkVoDBUxKAAAAABJRU5ErkJggg==");background-repeat: no-repeat;background-position: center;border-radius: 3px;border: 1px solid transparent;cursor: pointer;}.ace_folding-enabled .ace_fold-widget {display: inline-block;   }.ace_fold-widget.ace_end {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42m3HwQkAMAhD0YzsRchFKI7sAikeWkrxwScEB0nh5e7KTPWimZki4tYfVbX+MNl4pyZXejUO1QAAAABJRU5ErkJggg==");}.ace_fold-widget.ace_closed {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAGCAYAAAAG5SQMAAAAOUlEQVR42jXKwQkAMAgDwKwqKD4EwQ26sSOkVWjgIIHAzPiCgaqiqnJHZnKICBERHN194O5b9vbLuAVRL+l0YWnZAAAAAElFTkSuQmCCXA==");}.ace_fold-widget:hover {border: 1px solid rgba(0, 0, 0, 0.3);background-color: rgba(255, 255, 255, 0.2);box-shadow: 0 1px 1px rgba(255, 255, 255, 0.7);}.ace_fold-widget:active {border: 1px solid rgba(0, 0, 0, 0.4);background-color: rgba(0, 0, 0, 0.05);box-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);}.ace_dark .ace_fold-widget {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHklEQVQIW2P4//8/AzoGEQ7oGCaLLAhWiSwB146BAQCSTPYocqT0AAAAAElFTkSuQmCC");}.ace_dark .ace_fold-widget.ace_end {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAH0lEQVQIW2P4//8/AxQ7wNjIAjDMgC4AxjCVKBirIAAF0kz2rlhxpAAAAABJRU5ErkJggg==");}.ace_dark .ace_fold-widget.ace_closed {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAFCAYAAACAcVaiAAAAHElEQVQIW2P4//+/AxAzgDADlOOAznHAKgPWAwARji8UIDTfQQAAAABJRU5ErkJggg==");}.ace_dark .ace_fold-widget:hover {box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);background-color: rgba(255, 255, 255, 0.1);}.ace_dark .ace_fold-widget:active {box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);}.ace_fold-widget.ace_invalid {background-color: #FFB4B4;border-color: #DE5555;}.ace_fade-fold-widgets .ace_fold-widget {-webkit-transition: opacity 0.4s ease 0.05s;transition: opacity 0.4s ease 0.05s;opacity: 0;}.ace_fade-fold-widgets:hover .ace_fold-widget {-webkit-transition: opacity 0.05s ease 0.05s;transition: opacity 0.05s ease 0.05s;opacity:1;}.ace_underline {text-decoration: underline;}.ace_bold {font-weight: bold;}.ace_nobold .ace_bold {font-weight: normal;}.ace_italic {font-style: italic;}.ace_error-marker {background-color: rgba(255, 0, 0,0.2);position: absolute;z-index: 9;}.ace_highlight-marker {background-color: rgba(255, 255, 0,0.2);position: absolute;z-index: 8;}.ace_br1 {border-top-left-radius    : 3px;}.ace_br2 {border-top-right-radius   : 3px;}.ace_br3 {border-top-left-radius    : 3px; border-top-right-radius:    3px;}.ace_br4 {border-bottom-right-radius: 3px;}.ace_br5 {border-top-left-radius    : 3px; border-bottom-right-radius: 3px;}.ace_br6 {border-top-right-radius   : 3px; border-bottom-right-radius: 3px;}.ace_br7 {border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px;}.ace_br8 {border-bottom-left-radius : 3px;}.ace_br9 {border-top-left-radius    : 3px; border-bottom-left-radius:  3px;}.ace_br10{border-top-right-radius   : 3px; border-bottom-left-radius:  3px;}.ace_br11{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-left-radius:  3px;}.ace_br12{border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}.ace_br13{border-top-left-radius    : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}.ace_br14{border-top-right-radius   : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}.ace_br15{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px;}
/*# sourceURL=ace/css/ace_editor.css */</style><style id="ace-tm">.ace-tm .ace_gutter {background: #f0f0f0;color: #333;}.ace-tm .ace_print-margin {width: 1px;background: #e8e8e8;}.ace-tm .ace_fold {background-color: #6B72E6;}.ace-tm {background-color: #FFFFFF;color: black;}.ace-tm .ace_cursor {color: black;}.ace-tm .ace_invisible {color: rgb(191, 191, 191);}.ace-tm .ace_storage,.ace-tm .ace_keyword {color: blue;}.ace-tm .ace_constant {color: rgb(197, 6, 11);}.ace-tm .ace_constant.ace_buildin {color: rgb(88, 72, 246);}.ace-tm .ace_constant.ace_language {color: rgb(88, 92, 246);}.ace-tm .ace_constant.ace_library {color: rgb(6, 150, 14);}.ace-tm .ace_invalid {background-color: rgba(255, 0, 0, 0.1);color: red;}.ace-tm .ace_support.ace_function {color: rgb(60, 76, 114);}.ace-tm .ace_support.ace_constant {color: rgb(6, 150, 14);}.ace-tm .ace_support.ace_type,.ace-tm .ace_support.ace_class {color: rgb(109, 121, 222);}.ace-tm .ace_keyword.ace_operator {color: rgb(104, 118, 135);}.ace-tm .ace_string {color: rgb(3, 106, 7);}.ace-tm .ace_comment {color: rgb(76, 136, 107);}.ace-tm .ace_comment.ace_doc {color: rgb(0, 102, 255);}.ace-tm .ace_comment.ace_doc.ace_tag {color: rgb(128, 159, 191);}.ace-tm .ace_constant.ace_numeric {color: rgb(0, 0, 205);}.ace-tm .ace_variable {color: rgb(49, 132, 149);}.ace-tm .ace_xml-pe {color: rgb(104, 104, 91);}.ace-tm .ace_entity.ace_name.ace_function {color: #0000A2;}.ace-tm .ace_heading {color: rgb(12, 7, 255);}.ace-tm .ace_list {color:rgb(185, 6, 144);}.ace-tm .ace_meta.ace_tag {color:rgb(0, 22, 142);}.ace-tm .ace_string.ace_regex {color: rgb(255, 0, 0)}.ace-tm .ace_marker-layer .ace_selection {background: rgb(181, 213, 255);}.ace-tm.ace_multiselect .ace_selection.ace_start {box-shadow: 0 0 3px 0px white;}.ace-tm .ace_marker-layer .ace_step {background: rgb(252, 255, 0);}.ace-tm .ace_marker-layer .ace_stack {background: rgb(164, 229, 101);}.ace-tm .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid rgb(192, 192, 192);}.ace-tm .ace_marker-layer .ace_active-line {background: rgba(0, 0, 0, 0.07);}.ace-tm .ace_gutter-active-line {background-color : #dcdcdc;}.ace-tm .ace_marker-layer .ace_selected-word {background: rgb(250, 250, 255);border: 1px solid rgb(200, 200, 250);}.ace-tm .ace_indent-guide {background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;}
/*# sourceURL=ace/css/ace-tm */</style><style>    .error_widget_wrapper {        background: inherit;        color: inherit;        border:none    }    .error_widget {        border-top: solid 2px;        border-bottom: solid 2px;        margin: 5px 0;        padding: 10px 40px;        white-space: pre-wrap;    }    .error_widget.ace_error, .error_widget_arrow.ace_error{        border-color: #ff5a5a    }    .error_widget.ace_warning, .error_widget_arrow.ace_warning{        border-color: #F1D817    }    .error_widget.ace_info, .error_widget_arrow.ace_info{        border-color: #5a5a5a    }    .error_widget.ace_ok, .error_widget_arrow.ace_ok{        border-color: #5aaa5a    }    .error_widget_arrow {        position: absolute;        border: solid 5px;        border-top-color: transparent!important;        border-right-color: transparent!important;        border-left-color: transparent!important;        top: -5px;    }</style>
<meta content="width=device-width, initial-scale=1" name="viewport">
<style type="text/css">.MathJax_Hover_Frame {border-radius: .25em; -webkit-border-radius: .25em; -moz-border-radius: .25em; -khtml-border-radius: .25em; box-shadow: 0px 0px 15px #83A; -webkit-box-shadow: 0px 0px 15px #83A; -moz-box-shadow: 0px 0px 15px #83A; -khtml-box-shadow: 0px 0px 15px #83A; border: 1px solid #A6D ! important; display: inline-block; position: absolute}
.MathJax_Menu_Button .MathJax_Hover_Arrow {position: absolute; cursor: pointer; display: inline-block; border: 2px solid #AAA; border-radius: 4px; -webkit-border-radius: 4px; -moz-border-radius: 4px; -khtml-border-radius: 4px; font-family: 'Courier New',Courier; font-size: 9px; color: #F0F0F0}
.MathJax_Menu_Button .MathJax_Hover_Arrow span {display: block; background-color: #AAA; border: 1px solid; border-radius: 3px; line-height: 0; padding: 4px}
.MathJax_Hover_Arrow:hover {color: white!important; border: 2px solid #CCC!important}
.MathJax_Hover_Arrow:hover span {background-color: #CCC!important}
</style><style type="text/css">#MathJax_About {position: fixed; left: 50%; width: auto; text-align: center; border: 3px outset; padding: 1em 2em; background-color: #DDDDDD; color: black; cursor: default; font-family: message-box; font-size: 120%; font-style: normal; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; border-radius: 15px; -webkit-border-radius: 15px; -moz-border-radius: 15px; -khtml-border-radius: 15px; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_About.MathJax_MousePost {outline: none}
.MathJax_Menu {position: absolute; background-color: white; color: black; width: auto; padding: 2px; border: 1px solid #CCCCCC; margin: 0; cursor: default; font: menu; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
.MathJax_MenuItem {padding: 2px 2em; background: transparent}
.MathJax_MenuArrow {position: absolute; right: .5em; padding-top: .25em; color: #666666; font-size: .75em}
.MathJax_MenuActive .MathJax_MenuArrow {color: white}
.MathJax_MenuArrow.RTL {left: .5em; right: auto}
.MathJax_MenuCheck {position: absolute; left: .7em}
.MathJax_MenuCheck.RTL {right: .7em; left: auto}
.MathJax_MenuRadioCheck {position: absolute; left: 1em}
.MathJax_MenuRadioCheck.RTL {right: 1em; left: auto}
.MathJax_MenuLabel {padding: 2px 2em 4px 1.33em; font-style: italic}
.MathJax_MenuRule {border-top: 1px solid #CCCCCC; margin: 4px 1px 0px}
.MathJax_MenuDisabled {color: GrayText}
.MathJax_MenuActive {background-color: Highlight; color: HighlightText}
.MathJax_MenuDisabled:focus, .MathJax_MenuLabel:focus {background-color: #E8E8E8}
.MathJax_ContextMenu:focus {outline: none}
.MathJax_ContextMenu .MathJax_MenuItem:focus {outline: none}
#MathJax_AboutClose {top: .2em; right: .2em}
.MathJax_Menu .MathJax_MenuClose {top: -10px; left: -10px}
.MathJax_MenuClose {position: absolute; cursor: pointer; display: inline-block; border: 2px solid #AAA; border-radius: 18px; -webkit-border-radius: 18px; -moz-border-radius: 18px; -khtml-border-radius: 18px; font-family: 'Courier New',Courier; font-size: 24px; color: #F0F0F0}
.MathJax_MenuClose span {display: block; background-color: #AAA; border: 1.5px solid; border-radius: 18px; -webkit-border-radius: 18px; -moz-border-radius: 18px; -khtml-border-radius: 18px; line-height: 0; padding: 8px 0 6px}
.MathJax_MenuClose:hover {color: white!important; border: 2px solid #CCC!important}
.MathJax_MenuClose:hover span {background-color: #CCC!important}
.MathJax_MenuClose:hover:focus {outline: none}
</style><style type="text/css">.MathJax_Preview .MJXf-math {color: inherit!important}
</style><style type="text/css">.MJX_Assistive_MathML {position: absolute!important; top: 0; left: 0; clip: rect(1px, 1px, 1px, 1px); padding: 1px 0 0 0!important; border: 0!important; height: 1px!important; width: 1px!important; overflow: hidden!important; display: block!important; -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none}
.MJX_Assistive_MathML.MJX_Assistive_MathML_Block {width: 100%!important}
</style><style type="text/css">#MathJax_Zoom {position: absolute; background-color: #F0F0F0; overflow: auto; display: block; z-index: 301; padding: .5em; border: 1px solid black; margin: 0; font-weight: normal; font-style: normal; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; -webkit-box-sizing: content-box; -moz-box-sizing: content-box; box-sizing: content-box; box-shadow: 5px 5px 15px #AAAAAA; -webkit-box-shadow: 5px 5px 15px #AAAAAA; -moz-box-shadow: 5px 5px 15px #AAAAAA; -khtml-box-shadow: 5px 5px 15px #AAAAAA; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_ZoomOverlay {position: absolute; left: 0; top: 0; z-index: 300; display: inline-block; width: 100%; height: 100%; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
#MathJax_ZoomFrame {position: relative; display: inline-block; height: 0; width: 0}
#MathJax_ZoomEventTrap {position: absolute; left: 0; top: 0; z-index: 302; display: inline-block; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
</style><style type="text/css">.MathJax_Preview {color: #888}
#MathJax_Message {position: fixed; left: 1em; bottom: 1.5em; background-color: #E6E6E6; border: 1px solid #959595; margin: 0px; padding: 2px 8px; z-index: 102; color: black; font-size: 80%; width: auto; white-space: nowrap}
#MathJax_MSIE_Frame {position: absolute; top: 0; left: 0; width: 0px; z-index: 101; border: 0px; margin: 0px; padding: 0px}
.MathJax_Error {color: #CC0000; font-style: italic}
</style><style type="text/css">.MJXp-script {font-size: .8em}
.MJXp-right {-webkit-transform-origin: right; -moz-transform-origin: right; -ms-transform-origin: right; -o-transform-origin: right; transform-origin: right}
.MJXp-bold {font-weight: bold}
.MJXp-italic {font-style: italic}
.MJXp-scr {font-family: MathJax_Script,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-frak {font-family: MathJax_Fraktur,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-sf {font-family: MathJax_SansSerif,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-cal {font-family: MathJax_Caligraphic,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-mono {font-family: MathJax_Typewriter,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-largeop {font-size: 150%}
.MJXp-largeop.MJXp-int {vertical-align: -.2em}
.MJXp-math {display: inline-block; line-height: 1.2; text-indent: 0; font-family: 'Times New Roman',Times,STIXGeneral,serif; white-space: nowrap; border-collapse: collapse}
.MJXp-display {display: block; text-align: center; margin: 1em 0}
.MJXp-math span {display: inline-block}
.MJXp-box {display: block!important; text-align: center}
.MJXp-box:after {content: " "}
.MJXp-rule {display: block!important; margin-top: .1em}
.MJXp-char {display: block!important}
.MJXp-mo {margin: 0 .15em}
.MJXp-mfrac {margin: 0 .125em; vertical-align: .25em}
.MJXp-denom {display: inline-table!important; width: 100%}
.MJXp-denom > * {display: table-row!important}
.MJXp-surd {vertical-align: top}
.MJXp-surd > * {display: block!important}
.MJXp-script-box > *  {display: table!important; height: 50%}
.MJXp-script-box > * > * {display: table-cell!important; vertical-align: top}
.MJXp-script-box > *:last-child > * {vertical-align: bottom}
.MJXp-script-box > * > * > * {display: block!important}
.MJXp-mphantom {visibility: hidden}
.MJXp-munderover, .MJXp-munder {display: inline-table!important}
.MJXp-over {display: inline-block!important; text-align: center}
.MJXp-over > * {display: block!important}
.MJXp-munderover > *, .MJXp-munder > * {display: table-row!important}
.MJXp-mtable {vertical-align: .25em; margin: 0 .125em}
.MJXp-mtable > * {display: inline-table!important; vertical-align: middle}
.MJXp-mtr {display: table-row!important}
.MJXp-mtd {display: table-cell!important; text-align: center; padding: .5em 0 0 .5em}
.MJXp-mtr > .MJXp-mtd:first-child {padding-left: 0}
.MJXp-mtr:first-child > .MJXp-mtd {padding-top: 0}
.MJXp-mlabeledtr {display: table-row!important}
.MJXp-mlabeledtr > .MJXp-mtd:first-child {padding-left: 0}
.MJXp-mlabeledtr:first-child > .MJXp-mtd {padding-top: 0}
.MJXp-merror {background-color: #FFFF88; color: #CC0000; border: 1px solid #CC0000; padding: 1px 3px; font-style: normal; font-size: 90%}
.MJXp-scale0 {-webkit-transform: scaleX(.0); -moz-transform: scaleX(.0); -ms-transform: scaleX(.0); -o-transform: scaleX(.0); transform: scaleX(.0)}
.MJXp-scale1 {-webkit-transform: scaleX(.1); -moz-transform: scaleX(.1); -ms-transform: scaleX(.1); -o-transform: scaleX(.1); transform: scaleX(.1)}
.MJXp-scale2 {-webkit-transform: scaleX(.2); -moz-transform: scaleX(.2); -ms-transform: scaleX(.2); -o-transform: scaleX(.2); transform: scaleX(.2)}
.MJXp-scale3 {-webkit-transform: scaleX(.3); -moz-transform: scaleX(.3); -ms-transform: scaleX(.3); -o-transform: scaleX(.3); transform: scaleX(.3)}
.MJXp-scale4 {-webkit-transform: scaleX(.4); -moz-transform: scaleX(.4); -ms-transform: scaleX(.4); -o-transform: scaleX(.4); transform: scaleX(.4)}
.MJXp-scale5 {-webkit-transform: scaleX(.5); -moz-transform: scaleX(.5); -ms-transform: scaleX(.5); -o-transform: scaleX(.5); transform: scaleX(.5)}
.MJXp-scale6 {-webkit-transform: scaleX(.6); -moz-transform: scaleX(.6); -ms-transform: scaleX(.6); -o-transform: scaleX(.6); transform: scaleX(.6)}
.MJXp-scale7 {-webkit-transform: scaleX(.7); -moz-transform: scaleX(.7); -ms-transform: scaleX(.7); -o-transform: scaleX(.7); transform: scaleX(.7)}
.MJXp-scale8 {-webkit-transform: scaleX(.8); -moz-transform: scaleX(.8); -ms-transform: scaleX(.8); -o-transform: scaleX(.8); transform: scaleX(.8)}
.MJXp-scale9 {-webkit-transform: scaleX(.9); -moz-transform: scaleX(.9); -ms-transform: scaleX(.9); -o-transform: scaleX(.9); transform: scaleX(.9)}
.MathJax_PHTML .noError {vertical-align: ; font-size: 90%; text-align: left; color: black; padding: 1px 3px; border: 1px solid}
</style></head>
<body style="margin: 0px;"><div id="MathJax_Message" style="display: none;"></div>
<header id="cs_header">
<div class="nav-container">
<div class="cs_header_text"><a href="https://6009.cat-soop.org/fall18"><img src="./lab_9_files/logo.gif">&nbsp;6.009</a></div>
<a href="https://6009.cat-soop.org/fall18/information">Information/Policies</a>
<a href="https://6009.cat-soop.org/fall18/progress">Progress</a>
<div class="dropdown" onmouseleave="this.children[1].checked = false;">
<label class="dropbtn" for="cs_menu_5c20cd9501273c4cc9fd6d77f4acf768">Help<span class="downarrow">▼</span></label>
<input checked="false" class="dropdown-checkbox" id="cs_menu_5c20cd9501273c4cc9fd6d77f4acf768" type="checkbox">
<div class="dropdown-content">
<a href="https://piazza.com/mit/fall2018/6009">Piazza</a>
<a href="https://6009.cat-soop.org/fall18/queue/">Help Queue</a>
<a href="https://6009.cat-soop.org/fall18/python">Accessing/Installing Python</a>
<a href="https://6009.cat-soop.org/fall18/otherhelp">Other Help</a></div></div>
<a href="https://6009.cat-soop.org/fall18/labs/lab9?loginaction=login">Log In</a><a class="icon" href="javascript:void(0);" onclick="toggleResponsiveHeader()">☰</a>
</div>
</header>
<main class="cs_body" id="cs_body">
<div class="cs_left_menu"></div>
<div class="cs_content">
<center><h1>Lab 9: Multi-Part File Downloader</h1></center>
<div class="response" id="catsoop_login_box">
<b><center>You are not logged in.</center></b><br>
If you are a current student, please <a href="https://6009.cat-soop.org/fall18/labs/lab9?loginaction=login">Log
In</a> for full access to the web site.<br>Note that this link will take you to
an external site (<tt>https://oidc.mit.edu</tt>) to authenticate, and then you will be redirected
back to this page.
</div>
<p></p>
<p></p><h2>Table of Contents</h2><ul><li><a href="https://6009.cat-soop.org/fall18/labs/lab9#catsoop_section_1">1) Preparation</a></li><li><a href="https://6009.cat-soop.org/fall18/labs/lab9#catsoop_section_2">2) Introduction</a></li><ul><li><a href="https://6009.cat-soop.org/fall18/labs/lab9#catsoop_section_2_1">2.1) Downloads</a></li><li><a href="https://6009.cat-soop.org/fall18/labs/lab9#catsoop_section_2_2">2.2) File Manifests</a></li><ul><li><a href="https://6009.cat-soop.org/fall18/labs/lab9#catsoop_section_2_2_1">2.2.1) Caching</a></li></ul><li><a href="https://6009.cat-soop.org/fall18/labs/lab9#catsoop_section_2_3">2.3) File Sequences</a></li></ul><li><a href="https://6009.cat-soop.org/fall18/labs/lab9#catsoop_section_3">3) Implementation</a></li><ul><li><a href="https://6009.cat-soop.org/fall18/labs/lab9#catsoop_section_3_1">3.1) Basic Downloads</a></li><li><a href="https://6009.cat-soop.org/fall18/labs/lab9#catsoop_section_3_2">3.2) Handling Manifests</a></li><ul><li><a href="https://6009.cat-soop.org/fall18/labs/lab9#catsoop_section_3_2_1">3.2.1) Caching</a></li></ul><li><a href="https://6009.cat-soop.org/fall18/labs/lab9#catsoop_section_3_3">3.3) Handling File Sequences</a></li></ul><li><a href="https://6009.cat-soop.org/fall18/labs/lab9#catsoop_section_4">4) Interfaces</a></li><li><a href="https://6009.cat-soop.org/fall18/labs/lab9#catsoop_section_5">5) Implementation Advice</a></li><li><a href="https://6009.cat-soop.org/fall18/labs/lab9#catsoop_section_6">6) Test Files</a></li><li><a href="https://6009.cat-soop.org/fall18/labs/lab9#catsoop_section_7">7) Other Errors</a></li><li><a href="https://6009.cat-soop.org/fall18/labs/lab9#catsoop_section_8">8) Code Submission</a></li><li><a href="https://6009.cat-soop.org/fall18/labs/lab9#catsoop_section_9">9) Checkoff</a></li><ul><li><a href="https://6009.cat-soop.org/fall18/labs/lab9#catsoop_section_9_1">9.1) Grade</a></li></ul><li><a href="https://6009.cat-soop.org/fall18/labs/lab9#catsoop_section_10">10) (Optional) Additional Extensions</a></li><ul><li><a href="https://6009.cat-soop.org/fall18/labs/lab9#catsoop_section_10_1">10.1) Files of Your Own</a></li><li><a href="https://6009.cat-soop.org/fall18/labs/lab9#catsoop_section_10_2">10.2) Parallel Downloads</a></li><li><a href="https://6009.cat-soop.org/fall18/labs/lab9#catsoop_section_10_3">10.3) Avoiding the Recursion Limit</a></li></ul><li><a href="https://6009.cat-soop.org/fall18/labs/lab9#catsoop_section_11" label="bytes">11) Appendix: Working with Raw Binary Data in Python</a></li><ul><li><a href="https://6009.cat-soop.org/fall18/labs/lab9#catsoop_section_11_1">11.1) Byte Strings</a></li><li><a href="https://6009.cat-soop.org/fall18/labs/lab9#catsoop_section_11_2">11.2) Converting Between Character Strings and Bytestrings</a></li><li><a href="https://6009.cat-soop.org/fall18/labs/lab9#catsoop_section_11_3">11.3) Reading and Writing Binary Data From Files</a></li><li><a href="https://6009.cat-soop.org/fall18/labs/lab9#catsoop_section_11_4" label="int_as_bytes">11.4) Representing Integers with Bytestrings</a></li><li><a href="https://6009.cat-soop.org/fall18/labs/lab9#catsoop_section_11_5">11.5) Byte Arrays</a></li></ul></ul><p></p>
<a class="anchor" name="catsoop_section_1"></a><h2>1) Preparation</h2>
<p>This lab assumes you have Python 3.5 or later installed on your machine.  Like
lab 1, this lab also requires the <code>pillow</code> module to be installed.</p>
<p>The following file contains code and other resources as a starting point for
this lab: <a download="lab9.zip" href="https://6009.cat-soop.org/fall18/lab_distribution.zip?path=%5B%22fall18%22%2C+%22labs%22%2C+%22lab9%22%5D"><tt>lab9.zip</tt></a></p>
<p>Most of your changes should be made to <code>lab.py</code>, which you will submit
at the end of this lab.  Importantly, you should not add any imports
to the file.</p>
<p>This lab is worth a total of 4 points.  Your score for the lab is based on:</p>
<ul>
<li>passing the test cases from <code>test.py</code> under the time limit (2 points), and</li>
<li>a brief "checkoff" conversation with a staff member to discuss your code (2 points).</li>
</ul>
<p>For this lab, you will only receive credit for a test case if it runs to
completion under the time limit on the server.</p>
<p>As always, your grade for the lab is ultimately based not only on producing
working code, but also on the clarity and efficiency of your solution.  Please
comment your code throughly, and try to avoid repetitious code where possible.</p>
<p><strong>This lab does not have any questions that are due before lecture, but you are
strongly encouraged to get started early.  Both the code submission and the
checkoff for this lab come due at the last possible time for submissions to the
course, <font color="red">Wednesday, 12 December, at 3pm</font>.  Because of
Institute rules, this is the last time at which assignments come due.  As such,
automatic extensions cannot be used on lab 9.</strong></p>
<a class="anchor" name="catsoop_section_2"></a><h2>2) Introduction</h2>
<p>One way to handle the problem of reliably storing large files is to break them
into pieces that are placed on multiple disks, or on multiple machines.  This
way, if something goes wrong with a particular file (and/or with a particular
machine as a whole), the file is still available.</p>
<p>In this lab, you will build a <em>multi-part</em> downloader that assembles a data
stream from multiple parts streaming individually from multiple machines. It
allows the same part to be stored redundantly in multiple locations so it can
be resilient to failures.  Since the multipart streams you will be downloading
may be unbounded and never end, your program will assemble the stream
incrementally from its parts as they are downloaded, displaying the file or
streamed sequence of files (an animated sequence of images, for example) as the
download progresses.</p>
<p>This page describes the specification for the lab, but it also aims to provide
some review on a few aspects of Python that were discussed in lecture but that
have not been used explicitly in a lab yet.</p>
<p><strong>We suggest reading the entire lab before writing any code</strong>, to get a sense
of the program you are being asked to write.</p>
<p><a class="anchor" name="catsoop_section_2_1"></a></p><h3>2.1) Downloads</h3><p></p>
<p>Throughout this lab, we will be interested in downloading files from various
web servers.  We have provided a function called <code>http_response</code>, which is
defined in <code>http009.py</code>, to help you with this task.  <code>http_response</code> is a thin
wrapper around functionality from Python's built-in <a href="https://docs.python.org/3/library/http.client.html"><code>http.client</code> module</a>.</p>
<p>That function takes a single argument (a string representing the
<a href="https://en.wikipedia.org/wiki/URL">URL</a> of a resource we wish to look up), and
it returns an <a href="https://docs.python.org/3/library/http.client.html#httpresponse-objects"><code>HTTPResponse</code>
object</a>.</p>
<p>In particular, we are interested in three or four attributes/methods of these
objects.  If <code>r</code> is the result of calling <code>http_response</code>, then:</p>
<ul>
<li><code>r.status</code> gives the <a href="https://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html">HTTP status code</a> that the server returned.  For this lab, we will need to know that <code>301</code>, <code>302</code>, and <code>307</code> represent redirects; that <code>404</code> means that the specified file was not found, and that <code>500</code> means that an error occurred on the server.</li>
<li><code>r.getheader(name)</code> returns the HTTP response header associated with the given name.  In the case of a redirect, <code>r.getheader('location')</code> will provide the location to which we were redirected.  In the case of a successful request, <code>r.getheader('content-type')</code> will tell you the <a href="https://en.wikipedia.org/wiki/Media_type">media type</a> of the response.</li>
<li><code>r.read(num_bytes)</code> returns a bytestring containing at most <code>num_bytes</code> number of bytes read from the body of the response.  If no more bytes can be read, returns an empty bytestring <code>b''</code>.  If <code>num_bytes</code> is not given, return the entire page contents.  <b>See <a href="https://6009.cat-soop.org/fall18/labs/lab9#catsoop_section_11">section 11</a> if you are unfamiliar with Python bytestrings.</b></li>
<li><code>r.readline()</code> returns a bytestring containing the next line of the body of the response.  It returns an empty bytestring <code>b''</code> if no more bytes can be read.</li>
</ul>
<p></p><div class="question"><b>Check Yourself:</b><p>
</p><p>Try calling <code>http_response</code> from the Python REPL for a few different URLs, to get a sense of how it behaves (you can get to a Python REPL with that function defined by running <code>python3 -i http009.py</code>).</p>
<p>Inspect the objects returned from this function, and try to extract the status code, headers, and response body for the following:</p>
<ul>
<li><code>'https://py.mit.edu'</code> should be a redirect</li>
<li><code>'https://6009.cat-soop.org/fall18/labs/lab11'</code> is a nonexistent file</li>
<li><code>'https://6009.cat-soop.org/fall18/python'</code> exists, and it should have a body that is 6986 bytes long.</li>
<li><code>'http://nonexistent.mit.edu/some_file.jpg'</code> is trying to access a file on a <em>computer</em> that doesn't exist.</li>
<li><code>'http://sicp-s1.mit.edu/hello.txt'</code> is a file that exists, but on a machine that only has network access around 50% of the time.  Try multiple requests to this endpoint.  What happens when the machine's network is down?</li>
</ul>
<p></p><p><span id="queue_checkyourself_1"></span></p></div><p></p>
<p></p><div class="question">
<p><b>NOTE FOR MAC USERS</b></p>
<p>There is a known issue with the default installer for Python 3.6 on Mac OSX.
If you are having trouble accessing files at HTTPS addresses, it is likely
because there is still some action required on your part.  In particular, you
may need to run the following command to enable support for SSL communication:
</p><pre>/Applications/Python\ 3.6/Install\ Certificates.command
</pre>
<p></p>
</div><p></p>
<p><a class="anchor" name="catsoop_section_2_2"></a></p><h3>2.2) File Manifests</h3><p></p>
<p>In addition to being able to download regular files, we include a definition of
a <em>file manifest</em>, which is a way of specifying how a particular file is broken
down into parts.  Your program can assume that a given URL represents a file
manifest if it ends with <code>.parts</code>, or if the <code>Content-Type</code> header associated
with the request is <code>text/parts-manifest'</code>.</p>
<p>The manifest contains several parts, each of which is separated by a line
containing only two hyphens <code>--</code>.  For example, a file <code>picture.jpg</code> might be
broken down into three parts, which could be specified with:</p>
<pre><code class="nohighlight">http://mymachine.mit.edu/picture.jpg-part1
--
http://mymachine.mit.edu/picture.jpg-part2
--
http://mymachine.mit.edu/picture.jpg-part3
</code></pre>
<p>To download the contents of a file specified by a manifest, you would need to
download each of the individual parts, and then to concatenate them together to
determine the contents of the entire file.</p>
<p>In addition, the manifest can provide <em>alternatives</em> for each section (so that
a part may be redundantly stored in multiple locations):</p>
<pre><code class="nohighlight">http://mymachine.mit.edu/picture.jpg-part1
http://yourmachine.mit.edu/picture.jpg-part1
--
http://mymachine.mit.edu/picture.jpg-part2
http://yourmachine.mit.edu/picture.jpg-part2
--
http://mymachine.mit.edu/picture.jpg-part3
http://yourmachine.mit.edu/picture.jpg-part3
</code></pre>
<p>In this example, each of the three parts is stored both on <code>mymachine.mit.edu</code>
and on <code>yourmachine.mit.edu</code>.  For each part, if the first option is not
successfully downloaded, we should try the second option (and so on until we
find one that works).  In general, a manifest is not limited to 2 options;
there may be arbitrarily many options for each part, and each part might have a
different number of options.</p>
<p>Manifest streams can be recursive, which means that a part might itself be
specified by a URL ending in <code>.parts</code> (which represents a manifest stream).  In
the case where a part refers to a manifest stream, the entire contents of the
file referred to by that manifest stream should be used.</p>
<p>For example, if <code>http://mymachine.mit.edu/endless.txt.parts</code> contains the
following lines:</p>
<pre><code class="nohighlight">http://mymachine.mit.edu/verse.txt
http://yourmachine.mit.edu/verse.txt
http://hermachine.mit.edu/verse.txt
--
http://yourmachine.mit.edu/chorus.txt
--
http://mymachine.mit.edu/endless.txt.parts
</code></pre>
<p>Then someone downloading the file should receive an endless file alternating
between the contents of <code>verse.txt</code> and <code>chorus.txt</code>.</p>
<p><a class="anchor" name="catsoop_section_2_2_1"></a></p><h4>2.2.1) Caching</h4><p></p>
<p>Manifest files may have parts that are replicated multiple times in the same
file. This may be obvious from the previous manifest file, which is an endless
stream of two replicated text parts.  Thus, we will also add the capability to
cache parts of files within a single download (though we will explicitly <strong>not</strong>
cache these results across multiple downloads).</p>
<p>Note that caching is not a good idea if a file changes frequently (that is,
frequently enough that a part would be changed within a single download). To
handle this, we allow caching for a part only if <code>(*)</code> is listed as a possible
URL for that part in the manifest file. This indicates that the manifest file
deems a particular part to be largely fixed content, so it can be safely cached
within a single download.</p>
<p>When downloading, if we reach a part that is marked as cacheable, we should
first check to see if any of the URLs has been cached.  If so, we should simply
use that result (without making any HTTP requests).  If not, we should follow
the normal procedure, but we should also store the result in the cache before
continuing.  Importantly, caching should not interrupt the streaming (i.e., we
should still be able to stream from files as we download them, rather than
having to wait for the whole file to be downloaded first).</p>
<p>Parts in the manifest that are not marked with an <code>(*)</code> <strong>should never be
cached</strong>.  This requires that the content for these links should not be read
from the cache, or stored to the cache. Thus, a sample Manifest file that
supports caching could look like the following:</p>
<pre><code class="nohighlight">(*)
http://mymachine.mit.edu/verse.txt
http://yourmachine.mit.edu/verse.txt
http://hermachine.mit.edu/verse.txt
--
http://yourmachine.mit.edu/chorus.txt
(*)
--
http://mymachine.mit.edu/endless.txt.parts
</code></pre>
<p>For simplicitly, it is not necessary to support caching manifest files
themselves, and <strong>it is not necessary to support caching infinite files</strong>
(i.e., you can assume that any file you are being asked to cache is finite in
length).</p>
<p><a class="anchor" name="catsoop_section_2_3"></a></p><h3>2.3) File Sequences</h3><p></p>
<p>In addition to manifests, we would also like to handle <em>file sequences</em>.  In
general, a file sequence is a single stream of bits that represents a sequence
of multiple files.  We'll use a format of our own invention, but it's not too
different from, for example, a movie file (which can be thought of as a
sequence of frames, each of which is an image).</p>
<p>If a URL contains the string <code>-seq</code>, the resulting stream represents a sequence
of files.  Each sub-file in a sequence is represented as:</p>
<ul>
<li>4 bytes containing the length of the file (in bytes, represented as a single
big-endian unsigned integer (see <a href="https://6009.cat-soop.org/fall18/labs/lab9#catsoop_section_11_4">subsection 11.4</a>)), followed
by</li>
<li>the raw bytes contained in the file (there should be as many bytes as were
specified in the length field).</li>
</ul>
<p>As an example, consider a file consisting of the following 5 bytes (shown in
<a href="https://en.wikipedia.org/wiki/Hexadecimal">hexadecimal</a>):</p>
<pre><code class="nohighlight">36 2E 30 30 35
</code></pre>
<p>and another file consisting of the following 6 bytes:</p>
<pre><code class="nohighlight">72 75 6C 65 73 21
</code></pre>
<p>We could encode a <em>file sequence</em> consisting of these two files with the following
stream of 19 bytes (4-byte length + 5-byte file + 4-byte length + 6-byte file):</p>
<pre><code class="nohighlight">00 00 00 05 36 2E 30 30 35 00 00 00 06 72 75 6C 65 73 21
</code></pre>
<p>If a URL contains <code>-seq</code> and is also a manifest (the URL ends with <code>.parts</code> or
the content type is <code>text/parts-manifest</code>), then it represents a manifest file
that, when all parts are concatenated, represents a file sequence.</p>
<a class="anchor" name="catsoop_section_3"></a><h2>3) Implementation</h2>
<p>We have provided a very small skeleton in <code>lab.py</code>, indicating the functions
that must be defined for this lab.  Beyond those, you are welcome to define
whatever helper functions / classes you deem necessary.</p>
<p><a class="anchor" name="catsoop_section_3_1"></a></p><h3>3.1) Basic Downloads</h3><p></p>
<p>We'll start by discussing basic downloads.  You should fill in the body of the
<code>download_file</code> function to implement a basic "streaming"
downloader<a class="anchor" name="catsoop_footnote_ref_1"></a><a href="https://6009.cat-soop.org/fall18/labs/lab9#catsoop_footnote_1"><sup>1</sup></a>.</p>
<p><code>download_file</code> should be a generator that yields the result of the response as
bytestrings of at most <code>CHUNK_SIZE</code> length (it should yield bytestrings of this
size until it is no longer able to do so, at which point it should yield one
bytestring of smaller size if the file contains additional content).</p>
<p>Note that, thoughout this lab, we will assume that any URL refers to a
potentially infinite stream (for example, a stream from a webcam).  As such,
your <code>download_file</code> function <strong>should not download the entire contents of the
file and yield values from that result; rather, it should yield chunks of the
file as they are downloaded.</strong></p>
<p>We will also assume that any URL refers to arbitrary binary data (it could be
an image, or text, or random bytes, etc).  Aside from checking whether the URL
refers to a file manifest, your code should not need to change its behavior
based on the type of the data (or the <code>content-type</code> header).</p>
<p>There are a couple of additional complications.  If a request results in a
redirect (status codes <code>301</code>, <code>302</code>, or <code>307</code> for our purposes), your
downloader should follow that redirect and try the location to which you are
being redirected.  If a request gives a <code>404</code> status code, your downloader
should raise a <code>FileNotFoundError</code>.  If a request gives a <code>500</code> status code, or
if the connected was not made because of a network error, your downloader
should raise a <code>RuntimeError</code>.  A status code of <code>200</code> indicates a successful
request.</p>
<p><a class="anchor" name="catsoop_section_3_2"></a></p><h3>3.2) Handling Manifests</h3><p></p>
<p>If the location given at initialization time ends with <code>.parts</code> <strong>or</strong> if the
<code>Content-Type</code> header associated with a request is <code>'text/parts-manifest'</code>,
then it represents a file manifest.  In this case, rather than simply yielding
the contents of that <code>.parts</code> file, <code>download_file</code> should instead yield the
bytes from each of the files specified in the manifest, in the order they are
specified.</p>
<p>In order to keep things as smooth as possible, your function should start
streaming the first part as soon as it is available, rather than waiting for
all parts to be available before streaming.</p>
<p><a class="anchor" name="catsoop_section_3_2_1"></a></p><h4>3.2.1) Caching</h4><p></p>
<p>You should also make sure that your program properly caches files that were
indicated with <code>(*)</code> in any file manifests that were given (so that, if we have
already retrieved their contents once in the process of downloading the file,
we do not do so a second time).  Your program should not cache other files.</p>
<p>If a file is cached, it is OK to yield the entire contents of the cached file
as one bytestring (rather than splitting it up into chunks and yielding those
separately).</p>
<p>Importantly, the cache should not persist between calls to <code>download_file</code>.
That is, starred files that we try to download multiple times <em>within a single
top-level call to <code>download_file</code></em> should be cached, but that cache should be
invalidated with every new top-level call to <code>download_file</code>.</p>
<p><a class="anchor" name="catsoop_section_3_3"></a></p><h3>3.3) Handling File Sequences</h3><p></p>
<p>The description above should be enough for <em>downloading</em> file sequences, but it
is not yet enough for interpreting them.  You should not need to change any
behavior in your downloader to account for file sequences.  But the GUI needs
to know something about how to handle file sequences in order to properly
display them, so we'll add a small piece of functionality to allow us to grab
individual files from the sequence.</p>
<p>Write a new generator called <code>files_from_sequence(stream)</code>.  Given a generator
of the form described for <code>download_file</code>, <code>files_from_sequence</code> should yield
the contents of each file contained in the sequence, in the order they are
specified.  Note that each of the chunks yielded from <code>download_file</code> might
contain multiple files, or it might not contain an entire file.  Your function
will need to account for both of these cases.</p>
<a class="anchor" name="catsoop_section_4"></a><h2>4) Interfaces</h2>
<p>We would like to provide two interfaces to the programs we have just written.
We have already provided one such interface (for displaying downloaded images
and/or text files) for you in <code>gui.py</code> in the lab distribution.</p>
<p>You can run the GUI from the command line by giving it a URL as argument:</p>
<pre><code class="nohighlight">$ python3 gui.py URL
</code></pre>
<p>The GUI will then use your code to stream the file, and it will attempt to
display it.  You can also optionally specify an additional integer argument
that specifies how long the GUI should wait between switching files in a file
sequence when displaying them (this value is specified in milliseconds).</p>
<p>In addition, we would like to provide an interface for saving the results of
downloading a file and saving its contents to disk.</p>
<p>Modify your <code>lab.py</code> so that it takes two arguments when it is run from the
command line:</p>
<pre><code class="nohighlight">$ python3 lab.py URL FILENAME
</code></pre>
<p>When invoked in this way, your program should download a file from <code>URL</code>, and
save its contents at a location given by <code>FILENAME</code>.  If the given URL refers
to a parts manifest, you should not directly save the contents of the manifest;
rather, you should save the contents of the file to which that manifest refers.
If the given URL refers to a sequence, then instead of saving a single file,
you should save multiple files of the form <code>FILENAME-file1</code>, <code>FILENAME-file2</code>, ...;
each of these files should contain one file from the sequence.</p>
<p>Recall that you can access command line arguments via the <code>sys.argv</code> variable.</p>
<a class="anchor" name="catsoop_section_5"></a><h2>5) Implementation Advice</h2>
<p>This is a fairly complicated task, and so trying to write it all in one go
might make the task of organizing your code (and of debugging) more difficult.
You may find it easier to implement the lab in small pieces first.  For
example, you might:</p>
<ul>
<li>start by writing something that downloads a single file that you know exists (after which <code>Test1_Streaming</code> should pass), then</li>
<li>add the command line interface for downloading a file, then</li>
<li>introduce support for handling redirects and/or errors (after which <code>Test2_Behaviors</code> should pass), then</li>
<li>add support for handling file manifests (after which <code>Test3_Manifest</code> should pass), then</li>
<li>add support for caching (after which <code>Test4_Caching</code> should pass), then</li>
<li>add support for file streams (after which all tests should pass).</li>
</ul>
<p>You might find a different order preferable, but starting small and then adding
functionality piece by piece is likely to make the debugging process more
straightforward.</p>
<a class="anchor" name="catsoop_section_6"></a><h2>6) Test Files</h2>
<p>The files below provide some data for testing (roughly in order of increasing complexity):</p>
<ul>
<li><a href="./lab_9_files/logo.gif" target="_blank"><tt>https://6009.cat-soop.org/_static/fall18/logo.gif</tt></a> (single image)</li>
<li><a href="http://hz.mit.edu/009_lab9/bird.jpg" target="_blank"><tt>http://hz.mit.edu/009_lab9/bird.jpg</tt></a> (single image, with single redirect)</li>
<li><a href="http://scripts.mit.edu/~6.009/lab9/redir.py/0/wug.jpg" target="_blank"><tt>http://scripts.mit.edu/~6.009/lab9/redir.py/0/wug.jpg</tt></a> (single image, with many redirects)</li>
<li><a href="http://mit.edu/6.009/www/lab9_examples/yellowsub.txt.parts" target="_blank"><tt>http://mit.edu/6.009/www/lab9_examples/yellowsub.txt.parts</tt></a> (manifest file representing a piece of text)</li>
<li><a href="http://mit.edu/6.009/www/lab9_examples/fugue.wav.parts" target="_blank"><tt>http://mit.edu/6.009/www/lab9_examples/fugue.wav.parts</tt></a> (manifest file representing a piece of music)</li>
<li><a href="http://mit.edu/6.009/www/lab9_examples/cornsnake.jpg.parts" target="_blank"><tt>http://mit.edu/6.009/www/lab9_examples/cornsnake.jpg.parts</tt></a> (manifest file representing an image, with pieces spread across multiple machines)</li>
<li><a href="http://mit.edu/6.009/www/lab9_examples/cached_yellowsub.txt.parts" target="_blank"><tt>http://mit.edu/6.009/www/lab9_examples/cached_yellowsub.txt.parts</tt></a> (same as <code>yellowsub.txt.parts</code>, but with caching)</li>
<li><a href="http://mit.edu/6.009/www/lab9_examples/kafka.txt-seq" target="_blank"><tt>http://mit.edu/6.009/www/lab9_examples/kafka.txt-seq</tt></a> (sequence of many small files, best viewed in GUI)</li>
<li><a href="http://scripts.mit.edu/~6.009/lab9/fly.py/fly.txt-seq" target="_blank"><tt>http://scripts.mit.edu/~6.009/lab9/fly.py/fly.txt-seq</tt></a> (infinitely long sequence)</li>
<li><a href="http://scripts.mit.edu/~6.009/lab9/redir.py/0/smallcat.png-seq" target="_blank"><tt>http://scripts.mit.edu/~6.009/lab9/redir.py/0/smallcat.png-seq</tt></a> (sequence of images representing a short film, many redirects)</li>
<li><a href="http://scripts.mit.edu/~6.009/lab9/cats.png-seq.py" target="_blank"><tt>http://scripts.mit.edu/~6.009/lab9/cats.png-seq.py</tt></a> (infinitely long manifest of an animation, with simulation of a slow connection)</li>
<li><a href="http://scripts.mit.edu/~6.009/lab9/cats.png-seq.cached.py" target="_blank"><tt>http://scripts.mit.edu/~6.009/lab9/cats.png-seq.cached.py</tt></a> (like the above, but with caching)</li>
<li><a href="http://mit.edu/6.009/www/lab9_examples/skeletons.png-seq.parts" target="_blank"><tt>http://mit.edu/6.009/www/lab9_examples/skeletons.png-seq.parts</tt></a> (recursive manifest, sequence representing an infinitely looping animation)</li>
<li><a href="http://mit.edu/6.009/www/lab9_examples/skeletons.cached.png-seq.parts" target="_blank"><tt>http://mit.edu/6.009/www/lab9_examples/skeletons.cached.png-seq.parts</tt></a> (like the above, but with caching)</li>
<li><a href="https://hz.mit.edu/009_lab9/vassar_stream.jpg-seq.parts" target="_blank"><tt>https://hz.mit.edu/009_lab9/vassar_stream.jpg-seq.parts</tt></a> (an infinite webcam stream of the intersection of Mass Ave and Vassar Street)</li>
</ul>
<a class="anchor" name="catsoop_section_7"></a><h2>7) Other Errors</h2>
<p>What we have built in this lab is a fairly realistic system that interacts with
other computers via the Internet.  In such systems, there is the potential for
unforeseen errors to arise.  When using this system, a variety of errors could
happen that the description above has not explicitly accounted for.</p>
<p>Think through a few possible kinds of errors that could occur, but that aren't
explicitly described above, and modify your code so that it handles them.
<strong>You should be prepared to discuss this during your checkoff conversation.</strong></p>
<a class="anchor" name="catsoop_section_8"></a><h2>8) Code Submission</h2>
<p>When you have tested locally and are satisfied that your code is working, you
can use the box below to submit your code to the server for testing.</p>
<p>
<!--START question code -->
</p><div class="question question-lab009" id="cs_qdiv_code" style="position: static">
<div id="code_rendered_question">
<input id="code" name="code" style="display: none" type="file"><button class="btn btn-catsoop" id="code_select_button">Select File</button>&nbsp;<tt><span id="code_selected_file">No file selected</span></tt>
<script type="text/javascript">
document.getElementById('code').value = '';
document.getElementById('code_select_button').addEventListener('click', function (){
    document.getElementById("code").click();
});
document.getElementById('code').addEventListener('change', function (){
    document.getElementById('code_selected_file').innerText = document.getElementById('code').value;
});
</script>
</div><div>
<span id="code_buttons"></span>
<span id="code_loading_wrapper">
<span id="code_loading" style="display:none;"><img src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="></span>
</span>
<span id="code_score_display"></span>
<div class="nsubmits_left" id="code_nsubmits_left"></div></div>
<div id="code_solution_container">
<div id="code_solution">
</div>
<div id="code_solution_explanation">
</div>
</div>
<div id="code_message"></div>
<span style="font-size: small; color: #888; font-weight: bold;">This question is due on Wednesday December 12, 2018 at 03:00:00 PM.</span></div>
<!--END question code -->
<p></p>
<style>
.impsolution{display:none;}
</style>
<a class="anchor" name="catsoop_section_9"></a><h2>9) Checkoff</h2>
<p>Once you are finished with the code, please come to a tutorial, lab session, or
office hour and add yourself to the queue asking for a checkoff.  <strong>You must be
ready to discuss your code and test cases in detail before asking for a checkoff.</strong></p>
<p>You should be prepared to demonstrate your code (which should be
well-commented, should avoid repetition, and should make good use of helper
functions).  In particular, be prepared to discuss:</p>
<ul>
<li>the basic structure of your downloader, including how you handle file manifests</li>
<li>your code for handling redirects and 404/500 errors</li>
<li>any helper functions and/or classes you wrote, and why they were helpful</li>
<li>your implementation of <code>files_from_sequence</code></li>
<li>your implementation of caching, including how the cache persists within a single top-level call but does not persist across top-level calls</li>
<li>a demonstration of your code downloading the file specified by <a href="http://mit.edu/6.009/www/lab9_examples/cornsnake.jpg.parts" target="_blank"><tt>http://mit.edu/6.009/www/lab9_examples/cornsnake.jpg.parts</tt></a>, and viewing the resulting image</li>
<li>a demonstration of your code downloading the files specified by <a href="http://scripts.mit.edu/~6.009/lab9/redir.py/0/smallcat.png-seq" target="_blank"><tt>http://scripts.mit.edu/~6.009/lab9/redir.py/0/smallcat.png-seq</tt></a>, and viewing one of the resulting files in an image viewer</li>
<li>a demonstration of your code working on <a href="http://scripts.mit.edu/~6.009/lab9/cats.png-seq.cached.py" target="_blank"><tt>http://scripts.mit.edu/~6.009/lab9/cats.png-seq.cached.py</tt></a> using the GUI</li>
<li>a demonstration of your code working on <a href="http://mit.edu/6.009/www/lab9_examples/skeletons.cached.png-seq.parts" target="_blank"><tt>http://mit.edu/6.009/www/lab9_examples/skeletons.cached.png-seq.parts</tt></a> using the GUI</li>
<li>your thoughts about other errors that might occur in the process of downloading files, including how your code accounts for those potential errors.</li>
</ul>
<p><a class="anchor" name="catsoop_section_9_1"></a></p><h3>9.1) Grade</h3>
<div class="response"><i>You have not yet received this checkoff.  When you have completed this checkoff, you will see a grade here.</i></div><p></p>
<a class="anchor" name="catsoop_section_10"></a><h2>10) (Optional) Additional Extensions</h2>
<p><a class="anchor" name="catsoop_section_10_1"></a></p><h3>10.1) Files of Your Own</h3><p></p>
<p>It would be cool to use your downloader on some files of your own.  Try making
some files:</p>
<ul>
<li>an image or audio file of at least 100kB</li>
<li>an image or text file of at least 100kB, split into at least 3 distinct pieces and represented as a <code>.parts</code> file</li>
<li>a file sequence of at least 100kB, consisting of at least 3 distinct files</li>
</ul>
<p>Note that you can make a file accessible at <code>http://mit.edu/YOUR_ATHENA_USERNAME/www/FILENAME</code> by creating
a file called <code>FILENAME</code> in your Athena account under the <code>www</code> directory.  You
can use this to put your files on the web so that your downloader can reach
them.  See <a href="http://kb.mit.edu/confluence/pages/viewpage.action?pageId=3907182">this page from IS&amp;T</a> for information about how to transfer files to your Athena account.</p>
<p>Then try downloading these files.</p>
<p><a class="anchor" name="catsoop_section_10_2"></a></p><h3>10.2) Parallel Downloads</h3><p></p>
<p>So far, our focus has been on the increased <em>reliability</em> that can come from
distrtibuting files across multiple parts/machines.  It turns out that doing
this can also be used to increase download <em>speeds</em>.  The basic idea is that a
way to download a file more quickly is to break it into parts, and to download
the different parts from different machines<a class="anchor" name="catsoop_footnote_ref_2"></a><a href="https://6009.cat-soop.org/fall18/labs/lab9#catsoop_footnote_2"><sup>2</sup></a>.  By downloading files in
multiple small parts, the chance of the entire download failing is reduced; by
downloading those parts in parallel, we can often achieve faster download
speeds; and load is spread more evenly across the network.  As such, it is
often faster to download files in this way, compared to downloading the entire
file as one piece.</p>
<p>One nice extension for this lab would be modifying your code so that, when it
encounters a manifest file, it downloads all of the pieces in parallel (rather
than sequentially).</p>
<p><a class="anchor" name="catsoop_section_10_3"></a></p><h3>10.3) Avoiding the Recursion Limit</h3><p></p>
<p>At this point, a fairly common solution to the lab will not be able to play the
stream in <code>vassar_stream.jpg-seq.parts</code> indefinitely, as it will typically
error out due to hitting Python's recursion limit.  If your program has this
issue, try to find a way to fix it!</p>
<a class="anchor" name="catsoop_section_11"></a><h2 id="catsoop_label_bytes" label="bytes">11) Appendix: Working with Raw Binary Data in Python</h2>
<p>The strings in Python that we are familiar with (the <code>str</code> type) consist of a
useful abstraction for representing text.  In particular, Python strings
represent sequences of characters (where each character represents a
<a href="https://en.wikipedia.org/wiki/Unicode">Unicode</a> character).</p>
<p>These are a useful abstraction for displaying text, but the fact that they
exist as an abstraction for the text means that they do not work as a
representation for other kinds of data, for example images or audio (since text
has a particular struture in its binary data that images or audio won't
generally have).  Ultimately, what can be stored on disk (or sent over the
network) is a series of binary values (1's and 0's).  Saving character strings
to disk, for example, requires first converting them to raw binary data first.</p>
<p>In this lab, we will be working with binary data in a variety of formats
(including not only text, but also images and audio), so we will need a
different, lower-level abstraction that lets us work directly with binary data.
Conveniently, Python offers just such an abstraction, through <em>bytestrings</em> and
<em>bytearrays</em>.</p>
<p><a class="anchor" name="catsoop_section_11_1"></a></p><h3>11.1) Byte Strings</h3><p></p>
<p>Python offers a built-in type called <code>bytes</code> that represents a sequence of raw
binary data.  While this does represent a sequence of 0's and 1's; the <code>bytes</code>
type exposes those values to us not as individual <em>bits</em>, but rather as
<em>bytes</em>, each of which contains 8 bits.  As such, we can think of each byte as
representing an integer between 0 and 255 (inclusive).</p>
<p>One way to construct bytestrings is directly from arrays of integers, for example:</p>
<pre><code class="py hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span>x = <span class="hljs-built_in">bytes</span>([<span class="hljs-number">207</span>, <span class="hljs-number">128</span>])
<span class="hljs-meta">&gt;&gt;&gt; </span>y = <span class="hljs-built_in">bytes</span>([<span class="hljs-number">207</span>, <span class="hljs-number">132</span>, <span class="hljs-number">32</span>, <span class="hljs-number">62</span>, <span class="hljs-number">32</span>])
</code></pre>
<p>If we print the resulting value, we see a different Python syntax for
bytestrings (which looks like a regular string, but with a <code>b</code> in front:</p>
<pre><code class="py hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span>print(x)
<span class="hljs-string">b'\xcf\x80'</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>print(y)
<span class="hljs-string">b'\xcf\x84 &gt; '</span>
</code></pre>
<p>Note that this is not human readable like a regular Python character string.
However, it is in a format that makes it easy to directly write the data to disk,
or to send it across a network (which will be relevant for this lab!).</p>
<p>Byte strings support indexing like regular strings.  When we index into a
bytestring, we get the integer value associated with the byte at that index
(this will be an integer in the range 0 to 255, inclusive).  Similarly, looping
over a bytestring gives us integer values.</p>
<pre><code class="py hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span>print(x[<span class="hljs-number">0</span>])
<span class="hljs-number">207</span>
<span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> y:
<span class="hljs-meta">... </span>    print(i)
...
<span class="hljs-number">207</span>
<span class="hljs-number">132</span>
<span class="hljs-number">32</span>
<span class="hljs-number">62</span>
<span class="hljs-number">32</span>
</code></pre>
<p><a class="anchor" name="catsoop_section_11_2"></a></p><h3>11.2) Converting Between Character Strings and Bytestrings</h3><p></p>
<p>As we have mentioned above, Python has two separate internal representations
for strings: character strings (<code>str</code>) and byte strings (<code>bytes</code>).  The conversion
between these is described by an <em>encoding</em> (which specifies how each character
is represented as a sequence of bytes).</p>
<p>In order to store a character string on disk, it must first be <em>encoded</em>; and
to view a human-readable form of a string that has been read from a file on
disk, it must be <em>decoded</em>.</p>
<p>There are many different possible encodings for string data (that is, given a
seequence of abstract characters, there are a number of different ways we could
choose to represent those as raw binary data).  Two of the most common encodings
are <code>ASCII</code>, <code>UTF-8</code>, and <code>UTF-16</code>.  As we can see, encoding the same string with
two different encodings gives us two different sequences of bytes:</p>
<pre><code class="py hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span>x = <span class="hljs-string">"Fußgänger"</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>u8 = x.encode(<span class="hljs-string">'utf-8'</span>)
<span class="hljs-meta">&gt;&gt;&gt; </span>u8
<span class="hljs-string">b'Fu\xc3\x9fg\xc3\xa4nger'</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>u16 = x.encode(<span class="hljs-string">'utf-16'</span>)
<span class="hljs-meta">&gt;&gt;&gt; </span>u16
<span class="hljs-string">b'\xff\xfeF\x00u\x00\xdf\x00g\x00\xe4\x00n\x00g\x00e\x00r\x00'</span>
</code></pre>
<p>When decoding, we also need to know which character encoding we are using.
Trying to use the wrong encoding will either produce an unexpected answer, or
an error:</p>
<pre><code class="py hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span>u8.decode(<span class="hljs-string">'utf-8'</span>)
<span class="hljs-string">'Fußgänger'</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>u8.decode(<span class="hljs-string">'utf-16'</span>)
Traceback (most recent call last):
  File <span class="hljs-string">"&lt;pyshell#119&gt;"</span>, line <span class="hljs-number">1</span>, <span class="hljs-keyword">in</span> &lt;module&gt;
    u8.decode(<span class="hljs-string">'utf-16'</span>)
<span class="hljs-built_in">UnicodeDecodeError</span>: <span class="hljs-string">'utf-16-le'</span> codec can<span class="hljs-string">'t decode byte 0x72 in position 10: truncated data
</span></code></pre>
<p><a class="anchor" name="catsoop_section_11_3"></a></p><h3>11.3) Reading and Writing Binary Data From Files</h3><p></p>
<p>When we dealt with files in previous labs, we were making the (unstated)
assumption that the files we were working with contained textual data
(specifically, textual data encoded using the
<a href="https://en.wikipedia.org/wiki/UTF-8">UTF-8</a> encoding, which is a broadly-used
standard).</p>
<p>Let's see what happens when we try to open a file that does not contain
UTF-8-encoded text:</p>
<pre><code class="py hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">'Havana.mp3'</span>, <span class="hljs-string">'r'</span>) <span class="hljs-keyword">as</span> f:
<span class="hljs-meta">... </span>    x = f.read()
...
Traceback (most recent call last):
  File <span class="hljs-string">"&lt;stdin&gt;"</span>, line <span class="hljs-number">2</span>, <span class="hljs-keyword">in</span> &lt;module&gt;
  File <span class="hljs-string">"/usr/local/lib/python3.7/codecs.py"</span>, line <span class="hljs-number">322</span>, <span class="hljs-keyword">in</span> decode
    (result, consumed) = self._buffer_decode(data, self.errors, final)
<span class="hljs-built_in">UnicodeDecodeError</span>: <span class="hljs-string">'utf-8'</span> codec can<span class="hljs-string">'t decode byte 0xff in position 45: invalid start byte
</span></code></pre>
<p>Indeed, we get an exception saying that Python does not know how to convert the
data in that file into a human-readable character string!  In order to grab the
data from the file, we need to tell Python to open the file in <em>binary read</em> mode
by specifying <code>'rb'</code> when opening the file:</p>
<pre><code class="py hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">'Havana.mp3'</span>, <span class="hljs-string">'rb'</span>) <span class="hljs-keyword">as</span> f:
<span class="hljs-meta">... </span>    x = f.read()
...
</code></pre>
<p>Having done this, we have the raw binary data available to us in the variable <code>x</code>
(as a bytestring).</p>
<pre><code class="py hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">len</span>(x)
<span class="hljs-number">3471822</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>x[:<span class="hljs-number">100</span>]
<span class="hljs-string">b'ID3\x04\x00\x00\x00\x00\x00#TSSE\x00\x00\x00\x0f\x00\x00\x03Lavf57.56.101\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xff\xfbP\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00Info\x00\x00\x00\x0f\x00\x00 r\x004\xf9\xa1\x00\x02\x05'</span>
<span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> x[:<span class="hljs-number">10</span>]:
<span class="hljs-meta">... </span>    print(i)
...
<span class="hljs-number">73</span>
<span class="hljs-number">68</span>
<span class="hljs-number">51</span>
<span class="hljs-number">4</span>
<span class="hljs-number">0</span>
<span class="hljs-number">0</span>
<span class="hljs-number">0</span>
<span class="hljs-number">0</span>
<span class="hljs-number">0</span>
<span class="hljs-number">35</span>
</code></pre>
<p><a class="anchor" name="catsoop_section_11_4"></a></p><h3 id="catsoop_label_int_as_bytes" label="int_as_bytes">11.4) Representing Integers with Bytestrings</h3><p></p>
<p>As we mentioned above, each byte in a bytestring has a representation as an
integer in the range 0-255 (inclusive).  A few different representations for
each possible byte are shown in the table on <a href="https://6009.cat-soop.org/fall18/labs/lab9/bytetable" target="_blank">this page</a> for reference, though it is certainly not
necessary to commit that table to memory.</p>
<p>The question might arise, though: what do we do if we want to represent a
number bigger than 255?  Clearly, one byte isn't enough in that case!  So we
need a different convention for representing larger integers.</p>
<p>In general, we can use the concatenation of multiple bytes to represent larger
integers.  In this lab, we choose a "<a href="https://en.wikipedia.org/wiki/Endianness">big-endian</a>"
representation, where the most-significant byte comes first.  By this, we mean that,
if we have a byte string containing bytes <span class=""><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>b</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">b_0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.84444em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathdefault">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>, <span class=""><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>b</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">b_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.84444em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathdefault">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>, <span class=""><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>b</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">b_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.84444em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathdefault">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>, and <span class=""><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>b</mi><mn>3</mn></msub></mrow><annotation encoding="application/x-tex">b_3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.84444em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathdefault">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span> (in that order),
this represents an integer:</p>
<p></p><div class="cs_displaymath" style="text-align:center;padding-bottom:10px;"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>(</mo><mn>25</mn><msup><mn>6</mn><mn>3</mn></msup><mo>×</mo><msub><mi>b</mi><mn>0</mn></msub><mo>)</mo><mo>+</mo><mo>(</mo><mn>25</mn><msup><mn>6</mn><mn>2</mn></msup><mo>×</mo><msub><mi>b</mi><mn>1</mn></msub><mo>)</mo><mo>+</mo><mo>(</mo><mn>256</mn><mo>×</mo><msub><mi>b</mi><mn>2</mn></msub><mo>)</mo><mo>+</mo><msub><mi>b</mi><mn>3</mn></msub></mrow><annotation encoding="application/x-tex">(256^3\times b_0) + (256^2\times b_1) + (256\times b_2) + b_3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1.11411em; vertical-align: -0.25em;"></span><span class="mopen">(</span><span class="mord">2</span><span class="mord">5</span><span class="mord"><span class="mord">6</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.864108em;"><span class="" style="top: -3.113em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord"><span class="mord mathdefault">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 1.11411em; vertical-align: -0.25em;"></span><span class="mopen">(</span><span class="mord">2</span><span class="mord">5</span><span class="mord"><span class="mord">6</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.864108em;"><span class="" style="top: -3.113em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord"><span class="mord mathdefault">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mopen">(</span><span class="mord">2</span><span class="mord">5</span><span class="mord">6</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord"><span class="mord mathdefault">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.84444em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathdefault">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span></div><p></p>
<p>In theory, we could extend this to an arbitrary number of bytes to represent
arbitrarily-large integers.  In this lab, though, we chose to represent lengths
using 4 bytes only (though this still allows us to represent integers up to
4,294,967,295).</p>
<p>Since we can index into bytestrings to get integer values, it is possible to
compute this value directly without a complicated algorithm.  Alternatively,
you can look up the documentation for the <code>int.to_bytes</code> and <code>int.from_bytes</code>,
which will handle this conversion (in either direction).</p>
<p><a class="anchor" name="catsoop_section_11_5"></a></p><h3>11.5) Byte Arrays</h3><p></p>
<p>It is worth noting also that the <code>bytes</code> type, like regular Python strings, is
<em>immutable</em>.  On occasion (depending on the operation you want to perform), you
may wish to work with a <em>mutable</em> array of bytes (such that you can mutate it
by changing a character in place, by appending/extending values, etc).</p>
<p>To this end, Python gives us the <code>bytearray</code> type.  You can create a
<code>bytearray</code> from a bytestring with <code>bytearray(x)</code>, or you can create an empty
<code>bytearray</code> with <code>bytearray()</code>.</p>
<pre><code class="py hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span>ba = <span class="hljs-built_in">bytearray</span>()
<span class="hljs-meta">&gt;&gt;&gt; </span>ba.extend(u8)
<span class="hljs-meta">&gt;&gt;&gt; </span>ba.extend(<span class="hljs-string">"übergänge"</span>.encode(<span class="hljs-string">'utf-8'</span>))
<span class="hljs-meta">&gt;&gt;&gt; </span>ba
<span class="hljs-built_in">bytearray</span>(<span class="hljs-string">b'Fu\xc3\x9fg\xc3\xa4nger\xc3\xbcberg\xc3\xa4nge'</span>)
</code></pre>
<p>Note that the elements in the <code>bytearray</code> need to be valid bytes (integers in
the range 0 to 255, inclusive).  So you can <code>extend</code> a <code>bytearray</code> by an
iterable of integers.  But if you want to append values (or modify values),
those values need to be given as integers.</p>
<p>It is worth noting, also, that <code>bytearray</code> objects can, in many ways, be
treated like <code>bytes</code> objects (for example, they provide a <code>decode</code> method:</p>
<pre><code class="py hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span>ba.decode(<span class="hljs-string">'utf-8'</span>)
<span class="hljs-string">'Fußgängerübergänge'</span>
</code></pre>
<p>But if you need to, you can always convert back to a <code>bytes</code> object:</p>
<pre><code class="py hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span>x2 = <span class="hljs-built_in">bytes</span>(ba)
</code></pre>
<p>Just like lists vs tuples, the question of whether you want a byte string or a
byte array is heavily dependent on the application (certain operations might
only be possible on one type or the other, or certain operations might be more
efficient with one type than with the other).</p>
<script src="./lab_9_files/cs_ajax.js.Без названия" type="text/javascript"></script>
<script type="text/javascript">
catsoop.all_questions = ['code'];
catsoop.username = null;
catsoop.api_token = null;
catsoop.this_path = 'https://6009.cat-soop.org/fall18/labs/lab9';
catsoop.path_info = ['fall18', 'labs', 'lab9'];
catsoop.course = 'fall18';
catsoop.url_root = 'https://6009.cat-soop.org';
catsoop.imp = '';
catsoop.skip_alert = [];
catsoop.viewans_confirm = "Are you sure?  Viewing the answer will prevent any further submissions to this question.  Press 'OK' to view the answer, or press 'Cancel' if you have changed your mind.";
</script>
<br>&nbsp;<hr><b name="cs_footnotes">Footnotes</b><p><a class="anchor" name="catsoop_footnote_1"></a><sup style="padding-right:0.25em;color:var(--cs-base-bg-color);">1</sup>In this case, "streaming" refers to the fact that we want
to provide bytes from the file as they are being received, rather than
downloading the entire file first and then returning its contents. <a href="https://6009.cat-soop.org/fall18/labs/lab9#catsoop_footnote_ref_1"><span class="noprint">(click to return to text)</span></a></p><p><a class="anchor" name="catsoop_footnote_2"></a><sup style="padding-right:0.25em;color:var(--cs-base-bg-color);">2</sup>You may be familiar with
the peer-to-peer file sharing protocol BitTorrent, which uses this idea.  It is
also used in a variety of other contexts. <a href="https://6009.cat-soop.org/fall18/labs/lab9#catsoop_footnote_ref_2"><span class="noprint">(click to return to text)</span></a></p>
</div>
<div class="cs_right_menu"></div>
</main>
<footer>
<pre class="catsooplogo" style="font-size:50%;">\            
/    /\__/\  
\__=(  o_O )=
(__________) 
 |_ |_ |_ |_ </pre>
      Powered by <a href="https://catsoop.mit.edu/" target="_blank">CAT-SOOP</a> (development version, v13.0.0+).<br>
      CAT-SOOP is <a href="http://www.fsf.org/about/what-is-free-software" target="_blank">free/libre software</a>, available under the terms<br>of the <a href="https://6009.cat-soop.org/_util/license" target="_blank">GNU Affero General Public License, version 3</a>.<br>
<a download="" href="https://6009.cat-soop.org/_util/source.zip?course=fall18" target="_blank">Download Source Code</a><br>
<a href="https://6009.cat-soop.org/_util/jslicense.html" rel="jslicense" target="_blank">Javascript License Information</a>
</footer>



</body></html>